var $jscomp={};$jscomp.scope={};$jscomp.defineProperty=typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=(a);if(a.get||a.set){throw new TypeError('ES3 does not support getters and setters.')}if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(c,b,a){var d=this.length;c=Number(c);b=Number(b);a=Number(a!=null?a:d);if(c<b){a=Math.min(a,d);while(b<a){if(b in this){this[c++]=this[b++]}else {delete this[c++];b++}}}else {a=Math.min(a,d+b-c);c+=a-b;while(a>b){if(--a in this){this[--c]=this[a]}else {delete this[c]}}}return this};return b},'es6-impl','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global.Symbol){$jscomp.global.Symbol=$jscomp.Symbol}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return ($jscomp.SYMBOL_PREFIX+(a||'')+$jscomp.symbolCounter_++)};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;if(!a){a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global.Symbol.iterator]=function(){return this};return (a)};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(a,b){return [a,b]})};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(e,b,a){var c=this.length||0;if(b<0){b=Math.max(0,c+(b))}if(a==null||a>c){a=c}a=Number(a);if(a<0){a=Math.max(0,c+a)}for(var d=Number(b||0);d<a;d++){this[d]=e}return this};return b},'es6-impl','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=(String(a))}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(b,a){return $jscomp.findInternal(this,b,a).v};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(b,a){return $jscomp.findInternal(this,b,a).i};return b},'es6-impl','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(a,b,f){$jscomp.initSymbolIterator();b=b!=null?b:function(a){return a};var c=[];var e=(a)[Symbol.iterator];if(typeof e=='function'){a=e.call(a);var g;while(!(g=a.next()).done){c.push(b.call((f),g.value))}}else {var h=a.length;for(var d=0;d<h;d++){c.push(b.call((f),a[d]))}}return c};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(a){return a})};return b},'es6-impl','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(a){return Array.from(arguments)};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})};return b},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(a){if(a.done){b(a.value)}else {Promise.resolve(a.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=(a)[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator((a))};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new (c)([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var c={};$jscomp.defineProperty(b,a,{value:c})}}function patch(a){var b=Object[a];if(b){Object[a]=function(a){insert(a);return b(a)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var b;while(!(b=e.next()).done){var c=b.value;this.set((c[0]),(c[1]))}}};b.prototype.set=function(b,c){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=c;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6-impl','es3');$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.polyfill('Map',function(b){var h=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=(b);var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(k){return !1}}();if(h){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=new WeakMap();var c=function(){};c.prototype.previous;c.prototype.next;c.prototype.head;c.prototype.key;c.prototype.value;var a=function(a){this.data_={};this.head_=g();this.size=0;if(a){var d=$jscomp.makeIterator(a);var b;while(!(b=d.next()).done){var c=(b).value;this.set((c[0]),(c[1]))}}};a.prototype.set=function(c,b){var a=d(this,c);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:b};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=b}return this};a.prototype['delete']=function(b){var a=d(this,b);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};a.prototype.has=function(a){return !!d(this,a).entry};a.prototype.get=function(b){var a=d(this,b).entry;return (a&&(a.value))};a.prototype.entries=function(){return e(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return e(this,function(a){return a.key})};a.prototype.values=function(){return e(this,function(a){return a.value})};a.prototype.forEach=function(d,c){var e=this.entries();var b;while(!(b=e.next()).done){var a=b.value;d.call((c),(a[1]),(a[0]),this)}};(a.prototype)[Symbol.iterator]=a.prototype.entries;var d=function(f,d){var e=j(d);var a=f.data_[e];if(a&&$jscomp.owns(f.data_,e)){for(var c=0;c<a.length;c++){var b=a[c];if(d!==d&&b.key!==b.key||d===b.key){return {id:e,list:a,index:c,entry:b}}}}return {id:e,list:a,index:-1,entry:undefined}};var e=function(b,c){var a=b.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=b.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:c(a)}}a=null}return {done:!0,value:void 0}})};var g=function(){var a={};a.previous=a.next=a.head=a;return a};var i=0;var j=function(a){var b=a&&typeof a;if(b=='object'||b=='function'){a=(a);if(!f.has(a)){var c=''+ ++i;f.set(a,c);return c}return f.get(a)}return 'p_'+a};return a},'es6-impl','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};return b},'es6-impl','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(a){a=Number(a);if(a===0){return a}var b=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return a<0?-b:b};return b},'es6-impl','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(a){a=Number(a);if(a<0.25&&a>-0.25){var e=a;var f=1;var b=a;var c=0;var d=1;while(c!=b){e*=a;d*=-1;b=(c=b)+d*e/++f}return b}return Math.log(1+a)};return b},'es6-impl','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(b){b=Number(b);return (a(b)-a(-b))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(a){if(a===0){return a}a=Number(a);var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b};return b},'es6-impl','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(a){a=Number(a)>>>0;if(a===0){return 32}var b=0;if((a&4.29490176E9)===0){a<<=16;b+=16}if((a&4.27819008E9)===0){a<<=8;b+=8}if((a&4.02653184E9)===0){a<<=4;b+=4}if((a&3.221225472E9)===0){a<<=2;b+=2}if((a&2.147483648E9)===0){b++}return b};return b},'es6-impl','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(a){a=Number(a);return (b(a)+b(-a))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(a){a=Number(a);if(a<0.25&&a>-0.25){var d=a;var e=1;var b=a;var c=0;while(c!=b){d*=a/++e;b=(c=b)+d}return b}return Math.exp(a)-1};return b},'es6-impl','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(b,c,g){b=Number(b);c=Number(c);var a,f,e;var d=Math.max(Math.abs(b),Math.abs(c));for(a=2;a<arguments.length;a++){d=Math.max(d,Math.abs(arguments[a]))}if(d>1.0E100||d<1.0E-100){b=b/d;c=c/d;e=b*b+c*c;for(a=2;a<arguments.length;a++){f=Number(arguments[a])/d;e+=f*f}return Math.sqrt(e)*d}else {e=b*b+c*c;for(a=2;a<arguments.length;a++){f=Number(arguments[a]);e+=f*f}return Math.sqrt(e)}};return b},'es6-impl','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(a,b){a=Number(a);b=Number(b);var e=a>>>16&65535;var c=a&65535;var f=b>>>16&65535;var d=b&65535;var g=e*d+c*f<<16>>>0;return c*d+g|0};return b},'es6-impl','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(a){return Math.log(a)/Math.LN10};return b},'es6-impl','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(a){return Math.log(a)/Math.LN2};return b},'es6-impl','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(a){a=Number(a);return a===0||isNaN(a)?a:a>0?1:-1};return b},'es6-impl','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(a){a=Number(a);if(a===0){return a}return (b(a)-b(-a))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(a){a=Number(a);if(a===0){return a}var b=Math.exp(-2*Math.abs(a));var c=(1-b)/(1+b);return a<0?-c:c};return b},'es6-impl','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(a){a=Number(a);if(isNaN(a)||a===Infinity||a===-Infinity||a===0){return a}var b=Math.floor(Math.abs(a));return a<0?-b:b};return b},'es6-impl','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6-impl','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6-impl','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6-impl','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(a){if(typeof a!=='number'){return !1}return !isNaN(a)&&a!==Infinity&&a!==-Infinity};return b},'es6-impl','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(a){if(!Number.isFinite(a)){return !1}return a===Math.floor(a)};return b},'es6-impl','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(a){return typeof a==='number'&&isNaN(a)};return b},'es6-impl','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(a){return Number.isInteger(a)&&Math.abs(a)<=Number.MAX_SAFE_INTEGER};return b},'es6-impl','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(d,e){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(!a){continue}for(var b in a){if($jscomp.owns(a,b)){d[b]=a[b]}}}return d};return b},'es6-impl','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6-impl','es5');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(a,b){if(a===b){return a!==0||1/a===1/(b)}else {return a!==a&&b!==b}};return b},'es6-impl','es3');$jscomp.polyfill('Object.setPrototypeOf',function(a){if(a){return a}if(typeof ''.__proto__!='object'){return null}var b=function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a};return b},'es6','es5');$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var c=b[a];delete b[a];try{c()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(c){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(c){return function(d){if(!a){a=!0;c.call(b,d)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_((b))}else {if(isObject(b)){this.resolveToNonPromiseObj_((b))}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,(b))}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(c,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+c+', '+a|'): Promise already settled in state'+this.state_)}this.state_=c;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){(b[a]).call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,c){var a=this.createResolveAndReject_();try{b.call(c,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(e,f){var b;var c;var d=new a(function(a,d){b=a;c=d});function createCallback(a,d){if(typeof a=='function'){return function(d){try{b(a(d))}catch(g){c(g)}}}else {return d}}this.callWhenSettled_(createCallback(e,b),createCallback(f,c));return d};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(c,e){var a=this;function callback(){switch(a.state_){case b.FULFILLED:c(a.result_);break;case b.REJECTED:e(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};a.resolve=function(b){if(b instanceof a){return b}else {return new a(function(a,c){a(b)})}};a.reject=function(b){return new a(function(c,a){a(b)})};a.race=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var c=d.next();!c.done;c=d.next()){a.resolve(c.value).callWhenSettled_(e,f)}})};a.all=function(d){var c=$jscomp.makeIterator(d);var b=c.next();if(b.done){return a.resolve([])}else {return new a(function(f,g){var d=[];var e=0;function onFulfilled(a){return function(b){d[a]=b;e--;if(e==0){f(d)}}}do{d.push(undefined);e++;a.resolve(b.value).callWhenSettled_(onFulfilled(d.length-1),g);b=c.next()}while(!b.done)})}};if($jscomp.EXPOSE_ASYNC_EXECUTOR){a['$jscomp$new$AsyncExecutor']=function(){return new AsyncExecutor()}}return a},'es6-impl','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(d,b,a){return c.call(d,b,a)};return b},'es6','es3');$jscomp.polyfill('Reflect.construct',function(a){if(a){return a}var b=function(b,d,a){if(a===undefined){a=b}var e=a.prototype||Object.prototype;var c=Object.create(e);var f=Reflect.apply(b,c,d);return f||c};return b},'es6','es5');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(d,c,b){try{Object.defineProperty(d,c,b);var a=Object.getOwnPropertyDescriptor(d,c);if(!a){return !1}return a.configurable===(b.configurable||!1)&&a.enumerable===(b.enumerable||!1)&&('value' in a?a.value===b.value&&a.writable===(b.writable||!1):a.get===b.get&&a.set===b.set)}catch(e){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(b,a){if(!$jscomp.owns(b,a)){return !0}try{return delete b[a]}catch(c){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(c,b,d){if(arguments.length<=2){return c[b]}var a=$jscomp.findDescriptor(c,b);if(a){return a.get?a.get.call(d):a.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(b,a){return a in b};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if(typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(b){return b.substring(0,a.length)==a}var c=function(d){var e=[];var b=Object.getOwnPropertyNames(d);var c=Object.getOwnPropertySymbols(d);for(var a=0;a<b.length;a++){(isSymbol(b[a])?c:e).push(b[a])}return e.concat(c)};return c},'es6','es5');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(typeof Object.preventExtensions!='function'){return function(){return !1}}var b=function(a){Object.preventExtensions(a);return !Object.isExtensible(a)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(a,c,d,e){var b=$jscomp.findDescriptor(a,c);if(!b){if(Reflect.isExtensible(a)){a[c]=d;return !0}return !1}if(b.set){b.set.call(arguments.length>3?e:a,d);return !0}else {if(b.writable&&!Object.isFrozen(a)){a[c]=d;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}if(typeof ''.__proto__!='object'){return null}var b=function(a,b){try{a.__proto__=b;return a.__proto__===b}catch(c){return !1}};return b},'es6','es5');$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=(b);var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var d=$jscomp.makeIterator(a);var b;while(!(b=d.next()).done){var c=(b).value;this.add(c)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(b){var a=this.map_['delete'](b);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};(a.prototype)[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(b,a){var c=this;this.map_.forEach(function(d){return b.call((a),d,d,c)})};return a},'es6-impl','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(a){var d=$jscomp.checkStringArgs(this,null,'codePointAt');var e=d.length;a=Number(a)||0;if(!(a>=0&&a<e)){return void 0}a=a|0;var b=d.charCodeAt(a);if(b<55296||b>56319||a+1===e){return b}var c=d.charCodeAt(a+1);if(c<56320||c>57343){return b}return (b-55296)*1024+c+9216};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(a,b){var c=$jscomp.checkStringArgs(this,a,'endsWith');a=a+'';if(b===void 0){b=c.length}var e=Math.max(0,Math.min(b|0,c.length));var d=a.length;while(d>0&&e>0){if(c[--e]!=a[--d]){return !1}}return d<=0};return b},'es6-impl','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(d){var b='';for(var c=0;c<arguments.length;c++){var a=Number(arguments[c]);if(a<0||a>1114111||a!==Math.floor(a)){throw new RangeError('invalid_code_point '+a)}if(a<=65535){b+=String.fromCharCode(a)}else {a-=65536;b+=String.fromCharCode(a>>>10&1023|55296);b+=String.fromCharCode(a&1023|56320)}}return b};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(a,b){var c=$jscomp.checkStringArgs(this,a,'includes');return c.indexOf(a,b||0)!==-1};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(a){var b=$jscomp.checkStringArgs(this,null,'repeat');if(a<0||a>1342177279){throw new RangeError('Invalid count value')}a=a|0;var c='';while(a){if(a&1){c+=b}if(a>>>=1){b+=b}}return c};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(a,f){var b=$jscomp.checkStringArgs(this,a,'startsWith');a=a+'';var g=b.length;var d=a.length;var e=Math.max(0,Math.min((f)|0,b.length));var c=0;while(c<d&&e<g){if(b[e++]!=a[c++]){return !1}}return c>=d};return b},'es6-impl','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){function tempCtor(){}tempCtor.prototype=b.prototype;a.prototype=new tempCtor();a.prototype.constructor=a;for(var c in b){if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new (b)([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=$jscomp.makeIterator(a);var b;while(!(b=d.next()).done){var c=b.value;this.add(c)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6-impl','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}(function(b,a){typeof exports==='object'&&typeof module!=='undefined'?a(exports):typeof define==='function'&&define.amd?define(['exports'],a):a(b.d3=b.d3||{})})(this,function(a){var jA='4.7.4';var aG=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};var dl=function(a){if(a.length===1){a=ascendingComparator(a)}return {left:function(e,f,b,c){if(b==null){b=0}if(c==null){c=e.length}while(b<c){var d=b+c>>>1;if(a(e[d],f)<0){b=d+1}else {c=d}}return b},right:function(e,f,b,c){if(b==null){b=0}if(c==null){c=e.length}while(b<c){var d=b+c>>>1;if(a(e[d],f)>0){c=d}else {b=d+1}}return b}}};function ascendingComparator(a){return function(b,c){return aG(a(b),c)}}var ek=dl(aG);var aD=ek.right;var h3=ek.left;var j0=function(a,b){if(b==null){b=pair}var c=0,d=a.length-1,f=a[0],e=new Array(d<0?0:d);while(c<d){e[c]=b(f,f=a[++c])}return e};function pair(a,b){return [a,b]}var jV=function(h,i,d){var e=h.length,f=i.length,j=new Array(e*f),a,b,c,g;if(d==null){d=pair}for(a=c=0;a<e;++a){for(g=h[a],b=0;b<f;++b,++c){j[c]=d(g,i[b])}}return j};var ia=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};var ax=function(a){return a===null?NaN:+a};var fg=function(e,h){var i=e.length,c=0,a,b,g=0,d=-1,f=0;if(h==null){while(++d<i){if(!isNaN(a=ax(e[d]))){b=a-c;c+=b/++f;g+=b*(a-c)}}}else {while(++d<i){if(!isNaN(a=ax(h(e[d],d,e)))){b=a-c;c+=b/++f;g+=b*(a-c)}}}if(f>1){return g/(f-1)}};var eY=function(b,c){var a=fg(b,c);return a?Math.sqrt(a):a};var fE=function(c,g){var b=-1,f=c.length,d,a,e;if(g==null){while(++b<f){if((a=c[b])!=null&&a>=a){d=e=a;break}}while(++b<f){if((a=c[b])!=null){if(d>a){d=a}if(e<a){e=a}}}}else {while(++b<f){if((a=g(c[b],b,c))!=null&&a>=a){d=e=a;break}}while(++b<f){if((a=g(c[b],b,c))!=null){if(d>a){d=a}if(e<a){e=a}}}}return [d,e]};var fN=Array.prototype;var j2=fN.slice;var kk=fN.map;var bt=function(a){return function(){return a}};var iX=function(a){return a};var Y=function(a,c,b){a=+a,c=+c,b=(d=arguments.length)<2?(c=a,a=0,1):d<3?1:+b;var e=-1,d=Math.max(0,Math.ceil((c-a)/b))|0,f=new Array(d);while(++e<d){f[e]=a+e*b}return f};var kj=Math.sqrt(50);var kB=Math.sqrt(10);var kA=Math.sqrt(2);var cs=function(b,c,d){var a=tickStep(b,c,d);return Y(Math.ceil(b/a)*a,Math.floor(c/a)*a+a/2,a)};function tickStep(c,e,f){var d=Math.abs(e-c)/Math.max(0,f),a=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),b=d/a;if(b>=kj){a*=10}else {if(b>=kB){a*=5}else {if(b>=kA){a*=2}}}return e<c?-a:a}var fz=function(a){return Math.ceil(Math.log(a.length)/Math.LN2)+1};var aj=function(){var c=iX,b=fE,a=fz;function aj(j){var d,n=j.length,k,i=new Array(n);for(d=0;d<n;++d){i[d]=c(j[d],d,j)}var o=b(i),g=o[0],h=o[1],e=a(i,g,h);if(!Array.isArray(e)){e=cs(g,h,e)}var f=e.length;while(e[0]<=g){e.shift(),--f}while(e[f-1]>=h){e.pop(),--f}var l=new Array(f+1),m;for(d=0;d<=f;++d){m=l[d]=[];m.x0=d>0?e[d-1]:g;m.x1=d<f?e[d]:h}for(d=0;d<n;++d){k=i[d];if(g<=k&&k<=h){l[aD(e,k,0,f)].push(j[d])}}return l}aj.value=function(a){return arguments.length?(c=typeof a==='function'?a:bt(a),aj):c};aj.domain=function(a){return arguments.length?(b=typeof a==='function'?a:bt([a[0],a[1]]),aj):b};aj.thresholds=function(b){return arguments.length?(a=typeof b==='function'?b:Array.isArray(b)?bt(j2.call(b)):bt(b),aj):a};return aj};var br=function(a,e,b){if(b==null){b=ax}if(!(d=a.length)){return}if((e=+e)<=0||d<2){return +b(a[0],0,a)}if(e>=1){return +b(a[d-1],d-1,a)}var d,g=(d-1)*e,c=Math.floor(g),f=+b(a[c],c,a),h=+b(a[c+1],c+1,a);return f+(h-f)*(g-c)};var gJ=function(a,c,b){a=kk.call(a,ax).sort(aG);return Math.ceil((b-c)/(2*(br(a,0.75)-br(a,0.25))*Math.pow(a.length,-1/3)))};var j1=function(a,c,b){return Math.ceil((b-c)/(3.5*eY(a)*Math.pow(a.length,-1/3)))};var kl=function(c,f){var b=-1,e=c.length,d,a;if(f==null){while(++b<e){if((a=c[b])!=null&&a>=a){d=a;break}}while(++b<e){if((a=c[b])!=null&&a>d){d=a}}}else {while(++b<e){if((a=f(c[b],b,c))!=null&&a>=a){d=a;break}}while(++b<e){if((a=f(c[b],b,c))!=null&&a>d){d=a}}}return d};var kc=function(b,g){var f=0,e=b.length,c,a=-1,d=e;if(g==null){while(++a<e){if(!isNaN(c=ax(b[a]))){f+=c}else {--d}}}else {while(++a<e){if(!isNaN(c=ax(g(b[a],a,b)))){f+=c}else {--d}}}if(d){return f/d}};var jH=function(b,e){var d=[],f=b.length,c,a=-1;if(e==null){while(++a<f){if(!isNaN(c=ax(b[a]))){d.push(c)}}}else {while(++a<f){if(!isNaN(c=ax(e(b[a],a,b)))){d.push(c)}}}return br(d.sort(aG),0.5)};var dI=function(a){var f=a.length,e,g=-1,d=0,b,c;while(++g<f){d+=a[g].length}b=new Array(d);while(--f>=0){c=a[f];e=c.length;while(--e>=0){b[--d]=c[e]}}return b};var f8=function(c,f){var b=-1,e=c.length,d,a;if(f==null){while(++b<e){if((a=c[b])!=null&&a>=a){d=a;break}}while(++b<e){if((a=c[b])!=null&&d>a){d=a}}}else {while(++b<e){if((a=f(c[b],b,c))!=null&&a>=a){d=a;break}}while(++b<e){if((a=f(c[b],b,c))!=null&&d>a){d=a}}}return d};var jo=function(d,c){var a=c.length,b=new Array(a);while(a--){b[a]=d[c[a]]}return b};var kf=function(c,b){if(!(g=c.length)){return}var d=0,g,e=0,f,a=c[e];if(!b){b=aG}while(++d<g){if(b(f=c[d],a)<0||b(a,a)!==0){a=f,e=d}}if(b(a,a)===0){return e}};var jr=function(b,a,e){var c=(e==null?b.length:e)-(a=a==null?0:+a),f,d;while(c){d=Math.random()*c--|0;f=b[c+a];b[c+a]=b[d+a];b[d+a]=f}return b};var km=function(b,e){var d=0,f=b.length,c,a=-1;if(e==null){while(++a<f){if(c=+b[a]){d+=c}}}else {while(++a<f){if(c=+e(b[a],a,b)){d+=c}}}return d};var e1=function(a){if(!(d=a.length)){return []}for(var b=-1,f=f8(a,length),e=new Array(f);++b<f;){for(var c=-1,d,g=e[b]=new Array(d);++c<d;){g[c]=a[c][b]}}return e};function length(a){return a.length}var kq=function(){return e1(arguments)};var dz=Array.prototype.slice;var eO=function(a){return a};var cD=1;var cr=2;var dC=3;var bJ=4;var fs=1.0E-6;function translateX(a){return 'translate('+a+',0)'}function translateY(a){return 'translate(0,'+a+')'}function center(b){var a=b.bandwidth()/2;if(b.round()){a=Math.round(a)}return function(c){return b(c)+a}}function entering(){return !this.__axis}function axis(b,a){var g=[],h=null,i=null,d=6,e=6,j=3,c=b===cD||b===bJ?-1:1,f,l=b===bJ||b===cr?(f='x','y'):(f='y','x'),k=b===cD||b===dC?translateX:translateY;function axis(m){var A=h==null?a.ticks?a.ticks.apply(a,g):a.domain():h,z=i==null?a.tickFormat?a.tickFormat.apply(a,g):eO:i,w=Math.max(d,0)+j,v=a.range(),x=v[0]+0.5,y=v[v.length-1]+0.5,t=(a.bandwidth?center:eO)(a.copy()),p=m.selection?m.selection():m,o=p.selectAll('.domain').data([null]),n=p.selectAll('.tick').data(A,a).order(),u=n.exit(),s=n.enter().append('g').attr('class','tick'),q=n.select('line'),r=n.select('text');o=o.merge(o.enter().insert('path','.tick').attr('class','domain').attr('stroke','#000'));n=n.merge(s);q=q.merge(s.append('line').attr('stroke','#000').attr(f+'2',c*d).attr(l+'1',0.5).attr(l+'2',0.5));r=r.merge(s.append('text').attr('fill','#000').attr(f,c*w).attr(l,0.5).attr('dy',b===cD?'0em':b===dC?'0.71em':'0.32em'));if(m!==p){o=o.transition(m);n=n.transition(m);q=q.transition(m);r=r.transition(m);u=u.transition(m).attr('opacity',fs).attr('transform',function(a){return isFinite(a=t(a))?k(a):this.getAttribute('transform')});s.attr('opacity',fs).attr('transform',function(b){var a=this.parentNode.__axis;return k(a&&isFinite(a=a(b))?a:t(b))})}u.remove();o.attr('d',b===bJ||b==cr?'M'+c*e+','+x+'H0.5V'+y+'H'+c*e:'M'+x+','+c*e+'V0.5H'+y+'V'+c*e);n.attr('opacity',1).attr('transform',function(a){return k(t(a))});q.attr(f+'2',c*d);r.attr(f,c*w).text(z);p.filter(entering).attr('fill','none').attr('font-size',10).attr('font-family','sans-serif').attr('text-anchor',b===cr?'start':b===bJ?'end':'middle');p.each(function(){this.__axis=t})}axis.scale=function(b){return arguments.length?(a=b,axis):a};axis.ticks=function(){return g=dz.call(arguments),axis};axis.tickArguments=function(a){return arguments.length?(g=a==null?[]:dz.call(a),axis):g.slice()};axis.tickValues=function(a){return arguments.length?(h=a==null?null:dz.call(a),axis):h&&h.slice()};axis.tickFormat=function(a){return arguments.length?(i=a,axis):i};axis.tickSize=function(a){return arguments.length?(d=e=+a,axis):d};axis.tickSizeInner=function(a){return arguments.length?(d=+a,axis):d};axis.tickSizeOuter=function(a){return arguments.length?(e=+a,axis):e};axis.tickPadding=function(a){return arguments.length?(j=+a,axis):j};return axis}function axisTop(a){return axis(cD,a)}function axisRight(a){return axis(cr,a)}function axisBottom(a){return axis(dC,a)}function axisLeft(a){return axis(bJ,a)}var ke={value:function(){}};function dispatch(){for(var c=0,d=arguments.length,b={},a;c<d;++c){if(!(a=arguments[c]+'')||a in b){throw new Error('illegal type: '+a)}b[a]=[]}return new Dispatch(b)}function Dispatch(a){this._=a}function parseTypenames(a,b){return a.trim().split(/^|\s+/).map(function(a){var d='',c=a.indexOf('.');if(c>=0){d=a.slice(c+1),a=a.slice(0,c)}if(a&&!b.hasOwnProperty(a)){throw new Error('unknown type: '+a)}return {type:a,name:d}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(c,d){var b=this._,f=parseTypenames(c+'',b),a,e=-1,g=f.length;if(arguments.length<2){while(++e<g){if((a=(c=f[e]).type)&&(a=get(b[a],c.name))){return a}}return}if(d!=null&&typeof d!=='function'){throw new Error('invalid callback: '+d)}while(++e<g){if(a=(c=f[e]).type){b[a]=set(b[a],c.name,d)}else {if(d==null){for(a in b){b[a]=set(b[a],c.name,null)}}}}return this},copy:function(){var a={},b=this._;for(var c in b){a[c]=b[c].slice()}return new Dispatch(a)},call:function(c,f){if((b=arguments.length-2)>0){for(var e=new Array(b),a=0,b,d;a<b;++a){e[a]=arguments[a+2]}}if(!this._.hasOwnProperty(c)){throw new Error('unknown type: '+c)}for(d=this._[c],a=0,b=d.length;a<b;++a){d[a].value.apply(f,e)}},apply:function(a,e,d){if(!this._.hasOwnProperty(a)){throw new Error('unknown type: '+a)}for(var c=this._[a],b=0,f=c.length;b<f;++b){c[b].value.apply(e,d)}}};function get(b,d){for(var a=0,e=b.length,c;a<e;++a){if((c=b[a]).name===d){return c.value}}}function set(a,d,c){for(var b=0,e=a.length;b<e;++b){if(a[b].name===d){a[b]=ke,a=a.slice(0,b).concat(a.slice(b+1));break}}if(c!=null){a.push({name:d,value:c})}return a}var dO='http://www.w3.org/1999/xhtml';var c8={svg:'http://www.w3.org/2000/svg',xhtml:dO,xlink:'http://www.w3.org/1999/xlink',xml:'http://www.w3.org/XML/1998/namespace',xmlns:'http://www.w3.org/2000/xmlns/'};var bo=function(a){var b=a+='',c=b.indexOf(':');if(c>=0&&(b=a.slice(0,c))!=='xmlns'){a=a.slice(c+1)}return c8.hasOwnProperty(b)?{space:c8[b],local:a}:a};function creatorInherit(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return c===dO&&b.documentElement.namespaceURI===dO?b.createElement(a):b.createElementNS(c,a)}}function creatorFixed(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}var du=function(b){var a=bo(b);return (a.local?creatorFixed:creatorInherit)(a)};var jJ=0;function local$1(){return new Local()}function Local(){this._='@'+(++jJ).toString(36)}Local.prototype=local$1.prototype={constructor:Local,get:function(a){var b=this._;while(!(b in a)){if(!(a=a.parentNode)){return}}return a[b]},set:function(b,a){return b[this._]=a},remove:function(a){return this._ in a&&delete a[this._]},toString:function(){return this._}};var ft=function(a){return function(){return this.matches(a)}};if(typeof document!=='undefined'){var bD=document.documentElement;if(!bD.matches){var hD=bD.webkitMatchesSelector||bD.msMatchesSelector||bD.mozMatchesSelector||bD.oMatchesSelector;ft=function(a){return function(){return hD.call(this,a)}}}}var dg=ft;var ew={};a.event=null;if(typeof document!=='undefined'){var iw=document.documentElement;if(!('onmouseenter' in iw)){ew={mouseenter:'mouseover',mouseleave:'mouseout'}}}function filterContextListener(a,c,b){a=contextListener(a,c,b);return function(c){var b=c.relatedTarget;if(!b||b!==this&&!(b.compareDocumentPosition(this)&8)){a.call(this,c)}}}function contextListener(b,d,c){return function(f){var e=a.event;a.event=f;try{b.call(this,this.__data__,d,c)}finally{a.event=e}}}function parseTypenames$1(a){return a.trim().split(/^|\s+/).map(function(a){var c='',b=a.indexOf('.');if(b>=0){c=a.slice(b+1),a=a.slice(0,b)}return {type:a,name:c}})}function onRemove(a){return function(){var c=this.__on;if(!c){return}for(var e=0,d=-1,f=c.length,b;e<f;++e){if(b=c[e],(!a.type||b.type===a.type)&&b.name===a.name){this.removeEventListener(b.type,b.listener,b.capture)}else {c[++d]=b}}if(++d){c.length=d}else {delete this.__on}}}function onAdd(a,c,b){var d=ew.hasOwnProperty(a.type)?filterContextListener:contextListener;return function(l,j,i){var f=this.__on,e,g=d(c,j,i);if(f){for(var h=0,k=f.length;h<k;++h){if((e=f[h]).type===a.type&&e.name===a.name){this.removeEventListener(e.type,e.listener,e.capture);this.addEventListener(e.type,e.listener=g,e.capture=b);e.value=c;return}}}this.addEventListener(a.type,g,b);e={type:a.type,name:a.name,value:c,listener:g,capture:b};if(!f){this.__on=[e]}else {f.push(e)}}}var hQ=function(j,g,e){var d=parseTypenames$1(j+''),a,h=d.length,i;if(arguments.length<2){var b=this.node().__on;if(b){for(var f=0,k=b.length,c;f<k;++f){for(a=0,c=b[f];a<h;++a){if((i=d[a]).type===c.type&&i.name===c.name){return c.value}}}}return}b=g?onAdd:onRemove;if(e==null){e=!1}for(a=0;a<h;++a){this.each(b(d[a],g,e))}return this};function customEvent(b,c,f,e){var d=a.event;b.sourceEvent=a.event;a.event=b;try{return c.apply(f,e)}finally{a.event=d}}var c0=function(){var b=a.event,c;while(c=b.sourceEvent){b=c}return b};var C=function(b,c){var e=b.ownerSVGElement||b;if(e.createSVGPoint){var a=e.createSVGPoint();a.x=c.clientX,a.y=c.clientY;a=a.matrixTransform(b.getScreenCTM().inverse());return [a.x,a.y]}var d=b.getBoundingClientRect();return [c.clientX-d.left-b.clientLeft,c.clientY-d.top-b.clientTop]};var aA=function(b){var a=c0();if(a.changedTouches){a=a.changedTouches[0]}return C(b,a)};function none(){}var cc=function(a){return a==null?none:function(){return this.querySelector(a)}};var gP=function(c){if(typeof c!=='function'){c=cc(c)}for(var h=this._groups,i=h.length,g=new Array(i),d=0;d<i;++d){for(var f=h[d],j=f.length,k=g[d]=new Array(j),a,e,b=0;b<j;++b){if((a=f[b])&&(e=c.call(a,a.__data__,b,f))){if('__data__' in a){e.__data__=a.__data__}k[b]=e}}}return new Selection(g,this._parents)};function empty$1(){return []}var c_=function(a){return a==null?empty$1:function(){return this.querySelectorAll(a)}};var gw=function(a){if(typeof a!=='function'){a=c_(a)}for(var h=this._groups,i=h.length,f=[],g=[],e=0;e<i;++e){for(var d=h[e],j=d.length,b,c=0;c<j;++c){if(b=d[c]){f.push(a.call(b,b.__data__,c,d));g.push(b)}}}return new Selection(f,g)};var gM=function(a){if(typeof a!=='function'){a=dg(a)}for(var g=this._groups,h=g.length,f=new Array(h),d=0;d<h;++d){for(var e=g[d],j=e.length,i=f[d]=[],b,c=0;c<j;++c){if((b=e[c])&&a.call(b,b.__data__,c,e)){i.push(b)}}}return new Selection(f,this._parents)};var fJ=function(a){return new Array(a.length)};var gZ=function(){return new Selection(this._enter||this._groups.map(fJ),this._parents)};function EnterNode(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}EnterNode.prototype={constructor:EnterNode,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var h8=function(a){return function(){return a}};var e$='$';function bindIndex(g,c,i,h,j,d){var a=0,b,e=c.length,f=d.length;for(;a<f;++a){if(b=c[a]){b.__data__=d[a];h[a]=b}else {i[a]=new EnterNode(g,d[a])}}for(;a<e;++a){if(b=c[a]){j[a]=b}}}function bindKey(i,f,n,m,j,e,k){var a,b,d={},g=f.length,l=e.length,h=new Array(g),c;for(a=0;a<g;++a){if(b=f[a]){h[a]=c=e$+k.call(b,b.__data__,a,f);if(c in d){j[a]=b}else {d[c]=b}}}for(a=0;a<l;++a){c=e$+k.call(i,e[a],a,e);if(b=d[c]){m[a]=b;b.__data__=e[a];d[c]=null}else {n[a]=new EnterNode(i,e[a])}}for(a=0;a<g;++a){if((b=f[a])&&d[h[a]]===b){j[a]=b}}}var hi=function(c,s){if(!c){d=new Array(this.size()),a=-1;this.each(function(b){d[++a]=b});return d}var v=s?bindKey:bindIndex,j=this._parents,n=this._groups;if(typeof c!=='function'){c=h8(c)}for(var i=n.length,b=new Array(i),o=new Array(i),q=new Array(i),a=0;a<i;++a){var g=j[a],p=n[a],t=p.length,d=c.call(g,g&&g.__data__,a,j),f=d.length,l=o[a]=new Array(f),k=b[a]=new Array(f),u=q[a]=new Array(t);v(g,p,l,k,u,d,s);for(var e=0,h=0,m,r;e<f;++e){if(m=l[e]){if(e>=h){h=e+1}while(!(r=k[h])&&++h<f){}m._next=r||null}}}b=new Selection(b,j);b._enter=o;b._exit=q;return b};var hk=function(){return new Selection(this._exit||this._groups.map(fJ),this._parents)};var g_=function(j){for(var c=this._groups,f=j._groups,e=c.length,m=f.length,n=Math.min(e,m),d=new Array(e),a=0;a<n;++a){for(var g=c[a],k=f[a],i=g.length,l=d[a]=new Array(i),h,b=0;b<i;++b){if(h=g[b]||k[b]){l[b]=h}}}for(;a<e;++a){d[a]=c[a]}return new Selection(d,this._parents)};var g1=function(){for(var e=this._groups,f=-1,g=e.length;++f<g;){for(var c=e[f],d=c.length-1,a=c[d],b;--d>=0;){if(b=c[d]){if(a&&a!==b.nextSibling){a.parentNode.insertBefore(b,a)}a=b}}}return this};var ho=function(c){if(!c){c=ascending$1}function compareNode(a,b){return a&&b?c(a.__data__,b.__data__):!a-!b}for(var f=this._groups,i=f.length,d=new Array(i),b=0;b<i;++b){for(var g=f[b],j=g.length,e=d[b]=new Array(j),h,a=0;a<j;++a){if(h=g[a]){e[a]=h}}e.sort(compareNode)}return (new Selection(d,this._parents)).order()};function ascending$1(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}var hh=function(){var a=arguments[0];arguments[0]=this;a.apply(null,arguments);return this};var g0=function(){var a=new Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a};var hm=function(){for(var c=this._groups,b=0,f=c.length;b<f;++b){for(var d=c[b],a=0,g=d.length;a<g;++a){var e=d[a];if(e){return e}}}return null};var hn=function(){var a=0;this.each(function(){++a});return a};var gY=function(){return !this.node()};var hj=function(f){for(var e=this._groups,d=0,g=e.length;d<g;++d){for(var b=e[d],a=0,h=b.length,c;a<h;++a){if(c=b[a]){f.call(c,c.__data__,a,b)}}}return this};function attrRemove(a){return function(){this.removeAttribute(a)}}function attrRemoveNS(a){return function(){this.removeAttributeNS(a.space,a.local)}}function attrConstant(b,a){return function(){this.setAttribute(b,a)}}function attrConstantNS(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function attrFunction(a,b){return function(){var c=b.apply(this,arguments);if(c==null){this.removeAttribute(a)}else {this.setAttribute(a,c)}}}function attrFunctionNS(a,b){return function(){var c=b.apply(this,arguments);if(c==null){this.removeAttributeNS(a.space,a.local)}else {this.setAttributeNS(a.space,a.local,c)}}}var hg=function(d,b){var a=bo(d);if(arguments.length<2){var c=this.node();return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}return this.each((b==null?a.local?attrRemoveNS:attrRemove:typeof b==='function'?a.local?attrFunctionNS:attrFunction:a.local?attrConstantNS:attrConstant)(a,b))};var a4=function(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView};function styleRemove(a){return function(){this.style.removeProperty(a)}}function styleConstant(c,b,a){return function(){this.style.setProperty(c,b,a)}}function styleFunction(a,c,b){return function(){var d=c.apply(this,arguments);if(d==null){this.style.removeProperty(a)}else {this.style.setProperty(a,d,b)}}}var g3=function(c,a,b){var d;return arguments.length>1?this.each((a==null?styleRemove:typeof a==='function'?styleFunction:styleConstant)(c,a,b==null?'':b)):a4(d=this.node()).getComputedStyle(d,null).getPropertyValue(c)};function propertyRemove(a){return function(){delete this[a]}}function propertyConstant(b,a){return function(){this[b]=a}}function propertyFunction(a,b){return function(){var c=b.apply(this,arguments);if(c==null){delete this[a]}else {this[a]=c}}}var gA=function(b,a){return arguments.length>1?this.each((a==null?propertyRemove:typeof a==='function'?propertyFunction:propertyConstant)(b,a)):this.node()[b]};function classArray(a){return a.trim().split(/^|\s+/)}function classList(a){return a.classList||new ClassList(a)}function ClassList(a){this._node=a;this._names=classArray(a.getAttribute('class')||'')}ClassList.prototype={add:function(a){var b=this._names.indexOf(a);if(b<0){this._names.push(a);this._node.setAttribute('class',this._names.join(' '))}},remove:function(b){var a=this._names.indexOf(b);if(a>=0){this._names.splice(a,1);this._node.setAttribute('class',this._names.join(' '))}},contains:function(a){return this._names.indexOf(a)>=0}};function classedAdd(d,a){var c=classList(d),b=-1,e=a.length;while(++b<e){c.add(a[b])}}function classedRemove(d,a){var c=classList(d),b=-1,e=a.length;while(++b<e){c.remove(a[b])}}function classedTrue(a){return function(){classedAdd(this,a)}}function classedFalse(a){return function(){classedRemove(this,a)}}function classedFunction(a,b){return function(){(b.apply(this,arguments)?classedAdd:classedRemove)(this,a)}}var gC=function(e,b){var a=classArray(e+'');if(arguments.length<2){var d=classList(this.node()),c=-1,f=a.length;while(++c<f){if(!d.contains(a[c])){return !1}}return !0}return this.each((typeof b==='function'?classedFunction:b?classedTrue:classedFalse)(a,b))};function textRemove(){this.textContent=''}function textConstant(a){return function(){this.textContent=a}}function textFunction(a){return function(){var b=a.apply(this,arguments);this.textContent=b==null?'':b}}var hp=function(a){return arguments.length?this.each(a==null?textRemove:(typeof a==='function'?textFunction:textConstant)(a)):this.node().textContent};function htmlRemove(){this.innerHTML=''}function htmlConstant(a){return function(){this.innerHTML=a}}function htmlFunction(a){return function(){var b=a.apply(this,arguments);this.innerHTML=b==null?'':b}}var hl=function(a){return arguments.length?this.each(a==null?htmlRemove:(typeof a==='function'?htmlFunction:htmlConstant)(a)):this.node().innerHTML};function raise(){if(this.nextSibling){this.parentNode.appendChild(this)}}var g2=function(){return this.each(raise)};function lower(){if(this.previousSibling){this.parentNode.insertBefore(this,this.parentNode.firstChild)}}var g$=function(){return this.each(lower)};var gL=function(a){var b=typeof a==='function'?a:du(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};function constantNull(){return null}var gN=function(b,a){var c=typeof b==='function'?b:du(b),d=a==null?constantNull:typeof a==='function'?a:cc(a);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})};function remove(){var a=this.parentNode;if(a){a.removeChild(this)}}var gO=function(){return this.each(remove)};var gX=function(a){return arguments.length?this.property('__data__',a):this.node().__data__};function dispatchEvent(e,c,b){var d=a4(e),a=d.CustomEvent;if(a){a=new a(c,b)}else {a=d.document.createEvent('Event');if(b){a.initEvent(c,b.bubbles,b.cancelable),a.detail=b.detail}else {a.initEvent(c,!1,!1)}}e.dispatchEvent(a)}function dispatchConstant(b,a){return function(){return dispatchEvent(this,b,a)}}function dispatchFunction(b,a){return function(){return dispatchEvent(this,b,a.apply(this,arguments))}}var gz=function(b,a){return this.each((typeof a==='function'?dispatchFunction:dispatchConstant)(b,a))};var dW=[null];function Selection(b,a){this._groups=b;this._parents=a}function selection(){return new Selection([[document.documentElement]],dW)}Selection.prototype=selection.prototype={constructor:Selection,select:gP,selectAll:gw,filter:gM,data:hi,enter:gZ,exit:hk,merge:g_,order:g1,sort:ho,call:hh,nodes:g0,node:hm,size:hn,empty:gY,each:hj,attr:hg,style:g3,property:gA,classed:gC,text:hp,html:hl,raise:g2,lower:g$,append:gL,insert:gN,remove:gO,datum:gX,on:hQ,dispatch:gz};var M=function(a){return typeof a==='string'?new Selection([[document.querySelector(a)]],[document.documentElement]):new Selection([[a]],dW)};var iH=function(a){return typeof a==='string'?new Selection([document.querySelectorAll(a)],[document.documentElement]):new Selection([a==null?[]:a],dW)};var ct=function(e,a,c){if(arguments.length<3){c=a,a=c0().changedTouches}for(var b=0,f=a?a.length:0,d;b<f;++b){if((d=a[b]).identifier===c){return C(e,d)}}return null};var jw=function(e,a){if(a==null){a=c0().touches}for(var b=0,d=a?a.length:0,c=new Array(d);b<d;++b){c[b]=C(e,a[b])}return c};function nopropagation(){a.event.stopImmediatePropagation()}var a_=function(){a.event.preventDefault();a.event.stopImmediatePropagation()};var b$=function(b){var a=b.document.documentElement,c=M(b).on('dragstart.drag',a_,!0);if('onselectstart' in a){c.on('selectstart.drag',a_,!0)}else {a.__noselect=a.style.MozUserSelect;a.style.MozUserSelect='none'}};function yesdrag(c,d){var a=c.document.documentElement,b=M(c).on('dragstart.drag',null);if(d){b.on('click.drag',a_,!0);setTimeout(function(){b.on('click.drag',null)},0)}if('onselectstart' in a){b.on('selectstart.drag',null)}else {a.style.MozUserSelect=a.__noselect;delete a.__noselect}}var c2=function(a){return function(){return a}};function DragEvent(d,e,b,h,c,i,j,f,g,a){this.target=d;this.type=e;this.subject=b;this.identifier=h;this.active=c;this.x=i;this.y=j;this.dx=f;this.dy=g;this._=a}DragEvent.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};function defaultFilter$1(){return !a.event.button}function defaultContainer(){return this.parentNode}function defaultSubject(b){return b==null?{x:a.event.x,y:a.event.y}:b}var O=function(){var g=defaultFilter$1,d=defaultContainer,i=defaultSubject,b={},e=dispatch('start','drag','end'),f=0,h,c;function O(a){a.on('mousedown.drag',mousedowned).on('touchstart.drag',touchstarted).on('touchmove.drag',touchmoved).on('touchend.drag touchcancel.drag',touchended).style('-webkit-tap-highlight-color','rgba(0,0,0,0)')}function mousedowned(){if(c||!g.apply(this,arguments)){return}var b=beforestart('mouse',d.apply(this,arguments),aA,this,arguments);if(!b){return}M(a.event.view).on('mousemove.drag',mousemoved,!0).on('mouseup.drag',mouseupped,!0);b$(a.event.view);nopropagation();h=!1;b('start')}function mousemoved(){a_();h=!0;b.mouse('drag')}function mouseupped(){M(a.event.view).on('mousemove.drag mouseup.drag',null);yesdrag(a.event.view,h);a_();b.mouse('end')}function touchstarted(){if(!g.apply(this,arguments)){return}var c=a.event.changedTouches,f=d.apply(this,arguments),h=c.length,b,e;for(b=0;b<h;++b){if(e=beforestart(c[b].identifier,f,ct,this,arguments)){nopropagation();e('start')}}}function touchmoved(){var d=a.event.changedTouches,f=d.length,c,e;for(c=0;c<f;++c){if(e=b[d[c].identifier]){a_();e('drag')}}}function touchended(){var e=a.event.changedTouches,g=e.length,d,f;if(c){clearTimeout(c)}c=setTimeout(function(){c=null},500);for(d=0;d<g;++d){if(f=b[e[d].identifier]){nopropagation();f('end')}}}function beforestart(d,j,k,m,l){var c=k(j,d),g,n,o,h=e.copy();if(!customEvent(new DragEvent(O,'beforestart',g,d,f,c[0],c[1],0,0,h),function(){if((a.event.subject=g=i.apply(m,l))==null){return !1}n=g.x-c[0]||0;o=g.y-c[1]||0;return !0})){return}return function gesture(a){var i=c,e;switch(a){case 'start':b[d]=gesture,e=f++;break;case 'end':delete b[d],--f;case 'drag':c=k(j,d),e=f;break;}customEvent(new DragEvent(O,a,g,d,e,c[0]+n,c[1]+o,c[0]-i[0],c[1]-i[1],h),h.apply,h,[a,m,l])}}O.filter=function(a){return arguments.length?(g=typeof a==='function'?a:c2(!!a),O):g};O.container=function(a){return arguments.length?(d=typeof a==='function'?a:c2(a),O):d};O.subject=function(a){return arguments.length?(i=typeof a==='function'?a:c2(a),O):i};O.on=function(){var a=e.on.apply(e,arguments);return a===e?O:a};return O};var a0=function(a,c,b){a.prototype=c.prototype=b;b.constructor=a};function extend(d,a){var b=Object.create(d.prototype);for(var c in a){b[c]=a[c]}return b}function Color(){}var aM=0.7;var aY=1/aM;var a9='\\s*([+-]?\\d+)\\s*';var bN='\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*';var af='\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*';var jL=/^#([0-9a-f]{3})$/;var jM=/^#([0-9a-f]{6})$/;var hO=new RegExp('^rgb\\('+[a9,a9,a9]+'\\)$');var hP=new RegExp('^rgb\\('+[af,af,af]+'\\)$');var hx=new RegExp('^rgba\\('+[a9,a9,a9,bN]+'\\)$');var hy=new RegExp('^rgba\\('+[af,af,af,bN]+'\\)$');var hN=new RegExp('^hsl\\('+[bN,af,af]+'\\)$');var hw=new RegExp('^hsla\\('+[bN,af,af,bN]+'\\)$');var fS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};a0(Color,color,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+''}});function color(b){var a;b=(b+'').trim().toLowerCase();return (a=jL.exec(b))?(a=parseInt(a[1],16),new Rgb(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1)):(a=jM.exec(b))?rgbn(parseInt(a[1],16)):(a=hO.exec(b))?new Rgb(a[1],a[2],a[3],1):(a=hP.exec(b))?new Rgb(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=hx.exec(b))?rgba(a[1],a[2],a[3],a[4]):(a=hy.exec(b))?rgba(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=hN.exec(b))?hsla(a[1],a[2]/100,a[3]/100,1):(a=hw.exec(b))?hsla(a[1],a[2]/100,a[3]/100,a[4]):fS.hasOwnProperty(b)?rgbn(fS[b]):b==='transparent'?new Rgb(NaN,NaN,NaN,0):null}function rgbn(a){return new Rgb(a>>16&255,a>>8&255,a&255,1)}function rgba(d,c,b,a){if(a<=0){d=c=b=NaN}return new Rgb(d,c,b,a)}function rgbConvert(a){if(!(a instanceof Color)){a=color(a)}if(!a){return new Rgb()}a=a.rgb();return new Rgb(a.r,a.g,a.b,a.opacity)}function rgb(b,d,c,a){return arguments.length===1?rgbConvert(b):new Rgb(b,d,c,a==null?1:a)}function Rgb(d,c,b,a){this.r=+d;this.g=+c;this.b=+b;this.opacity=+a}a0(Rgb,rgb,extend(Color,{brighter:function(a){a=a==null?aY:Math.pow(aY,a);return new Rgb(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=a==null?aM:Math.pow(aM,a);return new Rgb(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&(0<=this.g&&this.g<=255)&&(0<=this.b&&this.b<=255)&&(0<=this.opacity&&this.opacity<=1)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return (a===1?'rgb(':'rgba(')+Math.max(0,Math.min(255,Math.round(this.r)||0))+', '+Math.max(0,Math.min(255,Math.round(this.g)||0))+', '+Math.max(0,Math.min(255,Math.round(this.b)||0))+(a===1?')':', '+a+')')}}));function hsla(a,c,b,d){if(d<=0){a=c=b=NaN}else {if(b<=0||b>=1){a=c=NaN}else {if(c<=0){a=NaN}}}return new Hsl(a,c,b,d)}function hslConvert(a){if(a instanceof Hsl){return new Hsl(a.h,a.s,a.l,a.opacity)}if(!(a instanceof Color)){a=color(a)}if(!a){return new Hsl()}if(a instanceof Hsl){return a}a=a.rgb();var g=a.r/255,d=a.g/255,f=a.b/255,h=Math.min(g,d,f),c=Math.max(g,d,f),e=NaN,b=c-h,i=(c+h)/2;if(b){if(g===c){e=(d-f)/b+(d<f)*6}else {if(d===c){e=(f-g)/b+2}else {e=(g-d)/b+4}}b/=i<0.5?c+h:2-c-h;e*=60}else {b=i>0&&i<1?0:e}return new Hsl(e,b,i,a.opacity)}function hsl(b,d,c,a){return arguments.length===1?hslConvert(b):new Hsl(b,d,c,a==null?1:a)}function Hsl(b,d,c,a){this.h=+b;this.s=+d;this.l=+c;this.opacity=+a}a0(Hsl,hsl,extend(Color,{brighter:function(a){a=a==null?aY:Math.pow(aY,a);return new Hsl(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=a==null?aM:Math.pow(aM,a);return new Hsl(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+(this.h<0)*360,e=isNaN(a)||isNaN(this.s)?0:this.s,b=this.l,c=b+(b<0.5?b:1-b)*e,d=2*b-c;return new Rgb(hsl2rgb(a>=240?a-240:a+120,d,c),hsl2rgb(a,d,c),hsl2rgb(a<120?a+240:a-120,d,c),this.opacity)},displayable:function(){return (0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)}}));function hsl2rgb(b,a,c){return (b<60?a+(c-a)*b/60:b<180?c:b<240?a+(c-a)*(240-b)/60:a)*255}var fo=Math.PI/180;var fw=180/Math.PI;var cF=18;var gg=0.95047;var gh=1;var gi=1.08883;var gl=4/29;var bc=6/29;var gm=3*bc*bc;var kH=bc*bc*bc;function labConvert(a){if(a instanceof Lab){return new Lab(a.l,a.a,a.b,a.opacity)}if(a instanceof Hcl){var f=a.h*fo;return new Lab(a.l,Math.cos(f)*a.c,Math.sin(f)*a.c,a.opacity)}if(!(a instanceof Rgb)){a=rgbConvert(a)}var c=rgb2xyz(a.r),b=rgb2xyz(a.g),d=rgb2xyz(a.b),g=xyz2lab((0.4124564*c+0.3575761*b+0.1804375*d)/gg),e=xyz2lab((0.2126729*c+0.7151522*b+0.072175*d)/gh),h=xyz2lab((0.0193339*c+0.119192*b+0.9503041*d)/gi);return new Lab(116*e-16,500*(g-e),200*(e-h),a.opacity)}function lab(b,c,d,a){return arguments.length===1?labConvert(b):new Lab(b,c,d,a==null?1:a)}function Lab(d,b,c,a){this.l=+d;this.a=+b;this.b=+c;this.opacity=+a}a0(Lab,lab,extend(Color,{brighter:function(a){return new Lab(this.l+cF*(a==null?1:a),this.a,this.b,this.opacity)},darker:function(a){return new Lab(this.l-cF*(a==null?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;a=gh*lab2xyz(a);b=gg*lab2xyz(b);c=gi*lab2xyz(c);return new Rgb(xyz2rgb(3.2404542*b-1.5371385*a-0.4985314*c),xyz2rgb(-0.969266*b+1.8760108*a+0.041556*c),xyz2rgb(0.0556434*b-0.2040259*a+1.0572252*c),this.opacity)}}));function xyz2lab(a){return a>kH?Math.pow(a,1/3):a/gm+gl}function lab2xyz(a){return a>bc?a*a*a:gm*(a-gl)}function xyz2rgb(a){return 255*(a<=0.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-0.055)}function rgb2xyz(a){return (a/=255)<=0.04045?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function hclConvert(a){if(a instanceof Hcl){return new Hcl(a.h,a.c,a.l,a.opacity)}if(!(a instanceof Lab)){a=labConvert(a)}var b=Math.atan2(a.b,a.a)*fw;return new Hcl(b<0?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function hcl(b,c,d,a){return arguments.length===1?hclConvert(b):new Hcl(b,c,d,a==null?1:a)}function Hcl(c,b,d,a){this.h=+c;this.c=+b;this.l=+d;this.opacity=+a}a0(Hcl,hcl,extend(Color,{brighter:function(a){return new Hcl(this.h,this.c,this.l+cF*(a==null?1:a),this.opacity)},darker:function(a){return new Hcl(this.h,this.c,this.l-cF*(a==null?1:a),this.opacity)},rgb:function(){return labConvert(this).rgb()}}));var gn=-0.14861;var d8=+1.78277;var d9=-0.29227;var cP=-0.90649;var bR=+1.97294;var gf=bR*cP;var ge=bR*d8;var fL=d8*d9-cP*gn;function cubehelixConvert(a){if(a instanceof Cubehelix){return new Cubehelix(a.h,a.s,a.l,a.opacity)}if(!(a instanceof Rgb)){a=rgbConvert(a)}var i=a.r/255,g=a.g/255,f=a.b/255,b=(fL*f+gf*i-ge*g)/(fL+gf-ge),c=f-b,e=(bR*(g-b)-d9*c)/cP,h=Math.sqrt(e*e+c*c)/(bR*b*(1-b)),d=h?Math.atan2(e,c)*fw-120:NaN;return new Cubehelix(d<0?d+360:d,h,b,a.opacity)}function cubehelix(b,d,c,a){return arguments.length===1?cubehelixConvert(b):new Cubehelix(b,d,c,a==null?1:a)}function Cubehelix(b,d,c,a){this.h=+b;this.s=+d;this.l=+c;this.opacity=+a}a0(Cubehelix,cubehelix,extend(Color,{brighter:function(a){a=a==null?aY:Math.pow(aY,a);return new Cubehelix(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=a==null?aM:Math.pow(aM,a);return new Cubehelix(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*fo,a=+this.l,c=isNaN(this.s)?0:this.s*a*(1-a),b=Math.cos(e),d=Math.sin(e);return new Rgb(255*(a+c*(gn*b+d8*d)),255*(a+c*(d9*b+cP*d)),255*(a+c*(bR*b)),this.opacity)}}));function basis(a,d,e,f,g){var b=a*a,c=b*a;return ((1-3*a+3*b-c)*d+(4-6*b+3*c)*e+(1+3*a+3*b-3*c)*f+c*g)/6}var fl=function(a){var b=a.length-1;return function(d){var c=d<=0?d=0:d>=1?(d=1,b-1):Math.floor(d*b),e=a[c],f=a[c+1],g=c>0?a[c-1]:2*e-f,h=c<b-1?a[c+2]:2*f-e;return basis((d-c/b)*b,g,e,f,h)}};var eC=function(b){var a=b.length;return function(d){var c=Math.floor(((d%=1)<0?++d:d)*a),e=b[(c+a-1)%a],f=b[c%a],g=b[(c+1)%a],h=b[(c+2)%a];return basis((d-c/a)*a,e,f,g,h)}};var b_=function(a){return function(){return a}};function linear(a,b){return function(c){return a+c*b}}function exponential(b,c,a){return b=Math.pow(b,a),c=Math.pow(c,a)-b,a=1/a,function(d){return Math.pow(b+d*c,a)}}function hue(b,c){var a=c-b;return a?linear(b,a>180||a<-180?a-360*Math.round(a/360):a):b_(isNaN(b)?c:b)}function gamma(a){return (a=+a)===1?nogamma:function(b,c){return c-b?exponential(b,c,a):b_(isNaN(b)?c:b)}}function nogamma(a,b){var c=b-a;return c?linear(a,c):b_(isNaN(a)?b:a)}var bg=function rgbGamma(b){var a=gamma(b);function rgb$$1(b,c){var g=a((b=rgb(b)).r,(c=rgb(c)).r),f=a(b.g,c.g),e=a(b.b,c.b),d=nogamma(b.opacity,c.opacity);return function(a){b.r=g(a);b.g=f(a);b.b=e(a);b.opacity=d(a);return b+''}}rgb$$1.gamma=rgbGamma;return rgb$$1}(1);function rgbSpline(a){return function(h){var f=h.length,g=new Array(f),e=new Array(f),d=new Array(f),c,b;for(c=0;c<f;++c){b=rgb(h[c]);g[c]=b.r||0;e[c]=b.g||0;d[c]=b.b||0}g=a(g);e=a(e);d=a(d);b.opacity=1;return function(a){b.r=g(a);b.g=e(a);b.b=d(a);return b+''}}}var i3=rgbSpline(fl);var hf=rgbSpline(eC);var fj=function(d,c){var b=c?c.length:0,f=d?Math.min(b,d.length):0,g=new Array(b),e=new Array(b),a;for(a=0;a<f;++a){g[a]=bd(d[a],c[a])}for(;a<b;++a){e[a]=c[a]}return function(b){for(a=0;a<f;++a){e[a]=g[a](b)}return e}};var f_=function(a,b){var c=new Date();return a=+a,b-=a,function(d){return c.setTime(a+b*d),c}};var w=function(a,b){return a=+a,b-=a,function(c){return a+b*c}};var fI=function(c,b){var e={},d={},a;if(c===null||typeof c!=='object'){c={}}if(b===null||typeof b!=='object'){b={}}for(a in b){if(a in c){e[a]=bd(c[a],b[a])}else {d[a]=b[a]}}return function(b){for(a in e){d[a]=e[a](b)}return d}};var d1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;var d2=new RegExp(d1.source,'g');function zero(a){return function(){return a}}function one(a){return function(b){return a(b)+''}}var cU=function(i,c){var f=d1.lastIndex=d2.lastIndex=0,h,e,d,b=-1,a=[],g=[];i=i+'',c=c+'';while((h=d1.exec(i))&&(e=d2.exec(c))){if((d=e.index)>f){d=c.slice(f,d);if(a[b]){a[b]+=d}else {a[++b]=d}}if((h=h[0])===(e=e[0])){if(a[b]){a[b]+=e}else {a[++b]=e}}else {a[++b]=null;g.push({i:b,x:w(h,e)})}f=d2.lastIndex}if(f<c.length){d=c.slice(f);if(a[b]){a[b]+=d}else {a[++b]=d}}return a.length<2?g[0]?one(g[0].x):zero(c):(c=g.length,function(e){for(var b=0,d;b<c;++b){a[(d=g[b]).i]=d.x(e)}return a.join('')})};var bd=function(d,a){var b=typeof a,c;return a==null||b==='boolean'?b_(a):(b==='number'?w:b==='string'?(c=color(a))?(a=c,bg):cU:a instanceof color?bg:a instanceof Date?f_:Array.isArray(a)?fj:isNaN(a)?fI:w)(d,a)};var ei=function(a,b){return a=+a,b-=a,function(c){return Math.round(a+b*c)}};var fp=180/Math.PI;var c5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};var eX=function(a,b,e,f,h,i){var d,g,c;if(d=Math.sqrt(a*a+b*b)){a/=d,b/=d}if(c=a*e+b*f){e-=a*c,f-=b*c}if(g=Math.sqrt(e*e+f*f)){e/=g,f/=g,c/=g}if(a*f<b*e){a=-a,b=-b,c=-c,d=-d}return {translateX:h,translateY:i,rotate:Math.atan2(b,a)*fp,skewX:Math.atan(c)*fp,scaleX:d,scaleY:g}};var bC;var dv;var fn;var ck;function parseCss(a){if(a==='none'){return c5}if(!bC){bC=document.createElement('DIV'),dv=document.documentElement,fn=document.defaultView}bC.style.transform=a;a=fn.getComputedStyle(dv.appendChild(bC),null).getPropertyValue('transform');dv.removeChild(bC);a=a.slice(7,-1).split(',');return eX(+a[0],+a[1],+a[2],+a[3],+a[4],+a[5])}function parseSvg(a){if(a==null){return c5}if(!ck){ck=document.createElementNS('http://www.w3.org/2000/svg','g')}ck.setAttribute('transform',a);if(!(a=ck.transform.baseVal.consolidate())){return c5}a=a.matrix;return eX(a.a,a.b,a.c,a.d,a.e,a.f)}function interpolateTransform(d,b,c,a){function pop(a){return a.length?a.pop()+' ':''}function translate(e,f,a,d,h,i){if(e!==a||f!==d){var g=h.push('translate(',null,b,null,c);i.push({i:g-4,x:w(e,a)},{i:g-2,x:w(f,d)})}else {if(a||d){h.push('translate('+a+b+d+c)}}}function rotate(c,b,d,e){if(c!==b){if(c-b>180){b+=360}else {if(b-c>180){c+=360}}e.push({i:d.push(pop(d)+'rotate(',null,a)-2,x:w(c,b)})}else {if(b){d.push(pop(d)+'rotate('+b+a)}}}function skewX(d,b,c,e){if(d!==b){e.push({i:c.push(pop(c)+'skewX(',null,a)-2,x:w(d,b)})}else {if(b){c.push(pop(c)+'skewX('+b+a)}}}function scale(d,e,a,b,c,g){if(d!==a||e!==b){var f=c.push(pop(c)+'scale(',null,',',null,')');g.push({i:f-4,x:w(d,a)},{i:f-2,x:w(e,b)})}else {if(a!==1||b!==1){c.push(pop(c)+'scale('+a+','+b+')')}}}return function(a,b){var e=[],c=[];a=d(a),b=d(b);translate(a.translateX,a.translateY,b.translateX,b.translateY,e,c);rotate(a.rotate,b.rotate,e,c);skewX(a.skewX,b.skewX,e,c);scale(a.scaleX,a.scaleY,b.scaleX,b.scaleY,e,c);a=b=null;return function(f){var a=-1,d=c.length,b;while(++a<d){e[(b=c[a]).i]=b.x(f)}return e.join('')}}}var eb=interpolateTransform(parseCss,'px, ','px)','deg)');var ec=interpolateTransform(parseSvg,', ',')',')');var bO=Math.SQRT2;var dV=2;var f3=4;var iU=1.0E-12;function cosh(a){return ((a=Math.exp(a))+1/a)/2}function sinh(a){return ((a=Math.exp(a))-1/a)/2}function tanh(a){return ((a=Math.exp(2*a))-1)/(a+1)}var el=function(n,o){var i=n[0],j=n[1],a=n[2],p=o[0],q=o[1],b=o[2],f=p-i,g=q-j,e=f*f+g*g,h,d;if(e<iU){d=Math.log(b/a)/bO;h=function(b){return [i+b*f,j+b*g,a*Math.exp(bO*b*d)]}}else {var m=Math.sqrt(e),k=(b*b-a*a+f3*e)/(2*a*dV*m),l=(b*b-a*a-f3*e)/(2*b*dV*m),c=Math.log(Math.sqrt(k*k+1)-k),r=Math.log(Math.sqrt(l*l+1)-l);d=(r-c)/bO;h=function(k){var e=k*d,b=cosh(c),h=a/(dV*m)*(b*tanh(bO*e+c)-sinh(c));return [i+h*f,j+h*g,a*b/cosh(bO*e+c)]}}h.duration=d*1000;return h};function hsl$1(a){return function(b,c){var e=a((b=hsl(b)).h,(c=hsl(c)).h),g=nogamma(b.s,c.s),f=nogamma(b.l,c.l),d=nogamma(b.opacity,c.opacity);return function(a){b.h=e(a);b.s=g(a);b.l=f(a);b.opacity=d(a);return b+''}}}var jZ=hsl$1(hue);var jf=hsl$1(nogamma);function lab$1(a,b){var f=nogamma((a=lab(a)).l,(b=lab(b)).l),d=nogamma(a.a,b.a),e=nogamma(a.b,b.b),c=nogamma(a.opacity,b.opacity);return function(b){a.l=f(b);a.a=d(b);a.b=e(b);a.opacity=c(b);return a+''}}function hcl$1(a){return function(b,c){var f=a((b=hcl(b)).h,(c=hcl(c)).h),e=nogamma(b.c,c.c),g=nogamma(b.l,c.l),d=nogamma(b.opacity,c.opacity);return function(a){b.h=f(a);b.c=e(a);b.l=g(a);b.opacity=d(a);return b+''}}}var jX=hcl$1(hue);var je=hcl$1(nogamma);function cubehelix$1(a){return function cubehelixGamma(b){b=+b;function cubehelix$$1(c,d){var f=a((c=cubehelix(c)).h,(d=cubehelix(d)).h),h=nogamma(c.s,d.s),g=nogamma(c.l,d.l),e=nogamma(c.opacity,d.opacity);return function(a){c.h=f(a);c.s=h(a);c.l=g(Math.pow(a,b));c.opacity=e(a);return c+''}}cubehelix$$1.gamma=cubehelixGamma;return cubehelix$$1}(1)}var hX=cubehelix$1(hue);var bV=cubehelix$1(nogamma);var i2=function(d,b){var c=new Array(b);for(var a=0;a<b;++a){c[a]=d(a/(b-1))}return c};var a5=0;var bE=0;var n=0;var e_=1000;var cd;var by;var b2=0;var as=0;var dd=0;var dG=typeof performance==='object'&&performance.now?performance:Date;var fc=typeof requestAnimationFrame==='function'?requestAnimationFrame:function(a){setTimeout(a,17)};function now(){return as||(fc(clearNow),as=dG.now()+dd)}function clearNow(){as=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(b,c,a){if(typeof b!=='function'){throw new TypeError('callback is not a function')}a=(a==null?now():+a)+(c==null?0:+c);if(!this._next&&by!==this){if(by){by._next=this}else {cd=this}by=this}this._call=b;this._time=a;sleep()},stop:function(){if(this._call){this._call=null;this._time=Infinity;sleep()}}};function timer(b,c,d){var a=new Timer();a.restart(b,c,d);return a}function timerFlush(){now();++a5;var a=cd,b;while(a){if((b=as-a._time)>=0){a._call.call(null,b)}a=a._next}--a5}function wake(){as=(b2=dG.now())+dd;a5=bE=0;try{timerFlush()}finally{a5=0;nap();as=0}}function poke(){var b=dG.now(),a=b-b2;if(a>e_){dd-=a,b2=b}}function nap(){var b,a=cd,d,c=Infinity;while(a){if(a._call){if(c>a._time){c=a._time}b=a,a=a._next}else {d=a._next,a._next=null;a=b?b._next=d:cd=d}}by=b;sleep(c)}function sleep(b){if(a5){return}if(bE){bE=clearTimeout(bE)}var a=b-as;if(a>24){if(b<Infinity){bE=setTimeout(wake,a)}if(n){n=clearInterval(n)}}else {if(!n){b2=as,n=setInterval(poke,e_)}a5=1,fc(wake)}}var di=function(c,a,d){var b=new Timer();a=a==null?0:+a;b.restart(function(d){b.stop();c(d+a)},a,d);return b};var ig=function(d,a,b){var c=new Timer(),e=a;if(a==null){return c.restart(d,a,b),c}a=+a,b=b==null?now():+b;c.restart(function tick(f){f+=e;c.restart(tick,e+=a,b);d(f)},a,b);return c};var jc=dispatch('start','end','interrupt');var ib=[];var fh=0;var da=1;var b7=2;var ds=3;var fi=4;var dB=5;var cq=6;var ak=function(b,g,d,f,e,a){var c=b.__transition;if(!c){b.__transition={}}else {if(d in c){return}}create(b,d,{name:g,index:f,group:e,on:jc,tween:ib,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:fh})};function init(b,c){var a=b.__transition;if(!a||!(a=a[c])||a.state>fh){throw new Error('too late')}return a}function set$1(b,c){var a=b.__transition;if(!a||!(a=a[c])||a.state>b7){throw new Error('too late')}return a}function get$1(b,c){var a=b.__transition;if(!a||!(a=a[c])){throw new Error('too late')}return a}function create(b,e,a){var c=b.__transition,d;c[e]=a;a.timer=timer(ak,0,a.time);function ak(b){a.state=da;a.timer.restart(start,a.delay,a.time);if(a.delay<=b){start(b-a.delay)}}function start(j){var g,h,i,f;if(a.state!==da){return stop()}for(g in c){f=c[g];if(f.name!==a.name){continue}if(f.state===ds){return di(start)}if(f.state===fi){f.state=cq;f.timer.stop();f.on.call('interrupt',b,b.__data__,f.index,f.group);delete c[g]}else {if(+g<e){f.state=cq;f.timer.stop();delete c[g]}}}di(function(){if(a.state===ds){a.state=fi;a.timer.restart(tick,a.delay,a.time);tick(j)}});a.state=b7;a.on.call('start',b,b.__data__,a.index,a.group);if(a.state!==b7){return}a.state=ds;d=new Array(i=a.tween.length);for(g=0,h=-1;g<i;++g){if(f=a.tween[g].value.call(b,b.__data__,a.index,a.group)){d[++h]=f}}d.length=h+1}function tick(c){var g=c<a.duration?a.ease.call(null,c/a.duration):(a.timer.restart(stop),a.state=dB,1),e=-1,f=d.length;while(++e<f){d[e].call(null,g)}if(a.state===dB){a.on.call('end',b,b.__data__,a.index,a.group);stop()}}function stop(){a.state=cq;a.timer.stop();delete c[e];for(var d in c){return}delete b.__transition}}var aI=function(d,c){var b=d.__transition,a,f,g=!0,e;if(!b){return}c=c==null?null:c+'';for(e in b){if((a=b[e]).name!==c){g=!1;continue}f=a.state>b7&&a.state<dB;a.state=cq;a.timer.stop();if(f){a.on.call('interrupt',d,d.__data__,a.index,a.group)}delete b[e]}if(g){delete d.__transition}};var gv=function(a){return this.each(function(){aI(this,a)})};function tweenRemove(d,c){var b,a;return function(){var f=set$1(this,d),g=f.tween;if(g!==b){a=b=g;for(var e=0,h=a.length;e<h;++e){if(a[e].name===c){a=a.slice();a.splice(e,1);break}}}f.tween=a}}function tweenFunction(e,d,c){var b,a;if(typeof c!=='function'){throw new Error()}return function(){var g=set$1(this,e),h=g.tween;if(h!==b){a=(b=h).slice();for(var j={name:d,value:c},f=0,i=a.length;f<i;++f){if(a[f].name===d){a[f]=j;break}}if(f===i){a.push(j)}}g.tween=a}}var gU=function(a,d){var e=this._id;a+='';if(arguments.length<2){var c=get$1(this.node(),e).tween;for(var b=0,g=c.length,f;b<g;++b){if((f=c[b]).name===a){return f.value}}return null}return this.each((d==null?tweenRemove:tweenFunction)(e,a,d))};function tweenValue(a,b,d){var c=a._id;a.each(function(){var a=set$1(this,c);(a.value||(a.value={}))[b]=d.apply(this,arguments)});return function(a){return get$1(a,c).value[b]}}var ep=function(c,a){var b;return (typeof a==='number'?w:a instanceof color?bg:(b=color(a))?(a=b,bg):cU)(c,a)};function attrRemove$1(a){return function(){this.removeAttribute(a)}}function attrRemoveNS$1(a){return function(){this.removeAttributeNS(a.space,a.local)}}function attrConstant$1(e,d,c){var b,a;return function(){var f=this.getAttribute(e);return f===c?null:f===b?a:a=d(b=f,c)}}function attrConstantNS$1(b,e,d){var c,a;return function(){var f=this.getAttributeNS(b.space,b.local);return f===d?null:f===c?a:a=e(c=f,d)}}function attrFunction$1(d,e,f){var b,c,a;return function(){var g,h=f(this);if(h==null){return void this.removeAttribute(d)}g=this.getAttribute(d);return g===h?null:g===b&&h===c?a:a=e(b=g,c=h)}}function attrFunctionNS$1(a,e,f){var c,d,b;return function(){var g,h=f(this);if(h==null){return void this.removeAttributeNS(a.space,a.local)}g=this.getAttributeNS(a.space,a.local);return g===h?null:g===c&&h===d?b:b=e(c=g,d=h)}}var g4=function(c,b){var a=bo(c),d=a==='transform'?ec:ep;return this.attrTween(c,typeof b==='function'?(a.local?attrFunctionNS$1:attrFunction$1)(a,d,tweenValue(this,'attr.'+c,b)):b==null?(a.local?attrRemoveNS$1:attrRemove$1)(a):(a.local?attrConstantNS$1:attrConstant$1)(a,d,b+''))};function attrTweenNS(a,b){function tween(){var c=this,d=b.apply(c,arguments);return d&&function(b){c.setAttributeNS(a.space,a.local,d(b))}}tween._value=b;return tween}function attrTween(b,a){function tween(){var c=this,d=a.apply(c,arguments);return d&&function(a){c.setAttribute(b,d(a))}}tween._value=a;return tween}var gs=function(d,b){var a='attr.'+d;if(arguments.length<2){return (a=this.tween(a))&&a._value}if(b==null){return this.tween(a,null)}if(typeof b!=='function'){throw new Error()}var c=bo(d);return this.tween(a,(c.local?attrTweenNS:attrTween)(c,b))};function delayFunction(b,a){return function(){init(this,b).delay=+a.apply(this,arguments)}}function delayConstant(b,a){return a=+a,function(){init(this,b).delay=a}}var gR=function(a){var b=this._id;return arguments.length?this.each((typeof a==='function'?delayFunction:delayConstant)(b,a)):get$1(this.node(),b).delay};function durationFunction(b,a){return function(){set$1(this,b).duration=+a.apply(this,arguments)}}function durationConstant(b,a){return a=+a,function(){set$1(this,b).duration=a}}var gx=function(a){var b=this._id;return arguments.length?this.each((typeof a==='function'?durationFunction:durationConstant)(b,a)):get$1(this.node(),b).duration};function easeConstant(b,a){if(typeof a!=='function'){throw new Error()}return function(){set$1(this,b).ease=a}}var g5=function(b){var a=this._id;return arguments.length?this.each(easeConstant(a,b)):get$1(this.node(),a).ease};var gD=function(a){if(typeof a!=='function'){a=dg(a)}for(var g=this._groups,h=g.length,f=new Array(h),d=0;d<h;++d){for(var e=g[d],j=e.length,i=f[d]=[],b,c=0;c<j;++c){if((b=e[c])&&a.call(b,b.__data__,c,e)){i.push(b)}}}return new Transition(f,this._parents,this._name,this._id)};var gS=function(f){if(f._id!==this._id){throw new Error()}for(var c=this._groups,g=f._groups,e=c.length,m=g.length,n=Math.min(e,m),d=new Array(e),a=0;a<n;++a){for(var h=c[a],k=g[a],j=h.length,l=d[a]=new Array(j),i,b=0;b<j;++b){if(i=h[b]||k[b]){l[b]=i}}}for(;a<e;++a){d[a]=c[a]}return new Transition(d,this._parents,this._name,this._id)};function start(a){return (a+'').trim().split(/^|\s+/).every(function(a){var b=a.indexOf('.');if(b>=0){a=a.slice(0,b)}return !a||a==='start'})}function onFunction(f,a,d){var b,c,e=start(a)?init:set$1;return function(){var g=e(this,f),h=g.on;if(h!==b){(c=(b=h).copy()).on(a,d)}g.on=c}}var hA=function(a,c){var b=this._id;return arguments.length<2?get$1(this.node(),b).on.on(a):this.each(onFunction(b,a,c))};function removeFunction(a){return function(){var b=this.parentNode;for(var c in this.__transition){if(+c!==a){return}}if(b){b.removeChild(this)}}}var gE=function(){return this.on('end.remove',removeFunction(this._id))};var gF=function(c){var k=this._name,h=this._id;if(typeof c!=='function'){c=cc(c)}for(var j=this._groups,l=j.length,i=new Array(l),d=0;d<l;++d){for(var g=j[d],m=g.length,e=i[d]=new Array(m),b,f,a=0;a<m;++a){if((b=g[a])&&(f=c.call(b,b.__data__,a,g))){if('__data__' in b){f.__data__=b.__data__}e[a]=f;ak(e[a],k,h,a,e,get$1(b,h))}}}return new Transition(i,this._parents,k,h)};var gt=function(b){var m=this._name,g=this._id;if(typeof b!=='function'){b=c_(b)}for(var k=this._groups,p=k.length,i=[],j=[],h=0;h<p;++h){for(var f=k[h],q=f.length,a,d=0;d<q;++d){if(a=f[d]){for(var c=b.call(a,a.__data__,d,f),l,n=get$1(a,g),e=0,o=c.length;e<o;++e){if(l=c[e]){ak(l,m,g,e,c,n)}}i.push(c);j.push(a)}}}return new Transition(i,j,m,g)};var hU=selection.prototype.constructor;var gu=function(){return new hU(this._groups,this._parents)};function styleRemove$1(a,e){var c,d,b;return function(){var h=a4(this).getComputedStyle(this,null),f=h.getPropertyValue(a),g=(this.style.removeProperty(a),h.getPropertyValue(a));return f===g?null:f===c&&g===d?b:b=e(c=f,d=g)}}function styleRemoveEnd(a){return function(){this.style.removeProperty(a)}}function styleConstant$1(e,d,c){var b,a;return function(){var f=a4(this).getComputedStyle(this,null).getPropertyValue(e);return f===c?null:f===b?a:a=d(b=f,c)}}function styleFunction$1(a,e,f){var c,d,b;return function(){var i=a4(this).getComputedStyle(this,null),h=i.getPropertyValue(a),g=f(this);if(g==null){g=(this.style.removeProperty(a),i.getPropertyValue(a))}return h===g?null:h===c&&g===d?b:b=e(c=h,d=g)}}var gT=function(a,b,d){var c=(a+='')==='transform'?eb:ep;return b==null?this.styleTween(a,styleRemove$1(a,c)).on('end.style.'+a,styleRemoveEnd(a)):this.styleTween(a,typeof b==='function'?styleFunction$1(a,c,tweenValue(this,'style.'+a,b)):styleConstant$1(a,c,b+''),d)};function styleTween(c,a,b){function tween(){var d=this,e=a.apply(d,arguments);return e&&function(a){d.style.setProperty(c,e(a),b)}}tween._value=a;return tween}var go=function(d,b,c){var a='style.'+(d+='');if(arguments.length<2){return (a=this.tween(a))&&a._value}if(b==null){return this.tween(a,null)}if(typeof b!=='function'){throw new Error()}return this.tween(a,styleTween(d,b,c==null?'':c))};function textConstant$1(a){return function(){this.textContent=a}}function textFunction$1(a){return function(){var b=a(this);this.textContent=b==null?'':b}}var g6=function(a){return this.tween('text',typeof a==='function'?textFunction$1(tweenValue(this,'text',a)):textConstant$1(a==null?'':a+''))};var gp=function(){var g=this._name,i=this._id,h=newId();for(var c=this._groups,j=c.length,f=0;f<j;++f){for(var d=c[f],k=d.length,e,b=0;b<k;++b){if(e=d[b]){var a=get$1(e,i);ak(e,g,h,b,d,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease})}}}return new Transition(c,this._parents,g,h)};var kC=0;function Transition(b,a,c,d){this._groups=b;this._parents=a;this._name=c;this._id=d}function transition(a){return selection().transition(a)}function newId(){return ++kC}var aQ=selection.prototype;Transition.prototype=transition.prototype={constructor:Transition,select:gF,selectAll:gt,filter:gD,merge:gS,selection:gu,transition:gp,call:aQ.call,nodes:aQ.nodes,node:aQ.node,size:aQ.size,empty:aQ.empty,each:aQ.each,on:hA,attr:g4,attrTween:gs,style:gT,styleTween:go,text:g6,remove:gE,tween:gU,delay:gR,duration:gx,ease:g5};function linear$1(a){return +a}function quadIn(a){return a*a}function quadOut(a){return a*(2-a)}function quadInOut(a){return ((a*=2)<=1?a*a:--a*(2-a)+1)/2}function cubicIn(a){return a*a*a}function cubicOut(a){return --a*a*a+1}function cubicInOut(a){return ((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}var dp=3;var cn=function custom(a){a=+a;function cn(b){return Math.pow(b,a)}cn.exponent=custom;return cn}(dp);var ci=function custom(a){a=+a;function ci(b){return 1-Math.pow(1-b,a)}ci.exponent=custom;return ci}(dp);var bq=function custom(a){a=+a;function bq(b){return ((b*=2)<=1?Math.pow(b,a):2-Math.pow(2-b,a))/2}bq.exponent=custom;return bq}(dp);var gk=Math.PI;var fG=gk/2;function sinIn(a){return 1-Math.cos(a*fG)}function sinOut(a){return Math.sin(a*fG)}function sinInOut(a){return (1-Math.cos(gk*a))/2}function expIn(a){return Math.pow(2,10*a-10)}function expOut(a){return 1-Math.pow(2,-10*a)}function expInOut(a){return ((a*=2)<=1?Math.pow(2,10*a-10):2-Math.pow(2,10-10*a))/2}function circleIn(a){return 1-Math.sqrt(1-a*a)}function circleOut(a){return Math.sqrt(1- --a*a)}function circleInOut(a){return ((a*=2)<=1?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}var d7=4/11;var ks=6/11;var kt=8/11;var ku=3/4;var kv=9/11;var kw=10/11;var kx=15/16;var ky=21/22;var kz=63/64;var cN=1/d7/d7;function bounceIn(a){return 1-bounceOut(1-a)}function bounceOut(a){return (a=+a)<d7?cN*a*a:a<kt?cN*(a-=ks)*a+ku:a<kw?cN*(a-=kv)*a+kx:cN*(a-=ky)*a+kz}function bounceInOut(a){return ((a*=2)<=1?1-bounceOut(1-a):bounceOut(a-1)+1)/2}var dh=1.70158;var cl=function custom(a){a=+a;function cl(b){return b*b*((a+1)*b-a)}cl.overshoot=custom;return cl}(dh);var cf=function custom(a){a=+a;function cf(b){return --b*b*((a+1)*b+a)+1}cf.overshoot=custom;return cf}(dh);var bm=function custom(a){a=+a;function bm(b){return ((b*=2)<1?b*b*((a+1)*b-a):(b-=2)*b*((a+1)*b+a)+2)/2}bm.overshoot=custom;return bm}(dh);var ba=2*Math.PI;var db=1;var dF=0.3;var bn=function custom(a,b){var c=Math.asin(1/(a=Math.max(1,a)))*(b/=ba);function bn(d){return a*Math.pow(2,10*--d)*Math.sin((c-d)/b)}bn.amplitude=function(a){return custom(a,b*ba)};bn.period=function(b){return custom(a,b)};return bn}(db,dF);var aW=function custom(a,b){var c=Math.asin(1/(a=Math.max(1,a)))*(b/=ba);function aW(d){return 1-a*Math.pow(2,-10*(d=+d))*Math.sin((d+c)/b)}aW.amplitude=function(a){return custom(a,b*ba)};aW.period=function(b){return custom(a,b)};return aW}(db,dF);var bj=function custom(a,b){var c=Math.asin(1/(a=Math.max(1,a)))*(b/=ba);function bj(d){return ((d=d*2-1)<0?a*Math.pow(2,10*d)*Math.sin((c-d)/b):2-a*Math.pow(2,-10*d)*Math.sin((c+d)/b))/2}bj.amplitude=function(a){return custom(a,b*ba)};bj.period=function(b){return custom(a,b)};return bj}(db,dF);var cW={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(b,c){var a;while(!(a=b.__transition)||!(a=a[c])){if(!(b=b.parentNode)){return cW.time=now(),cW}}return a}var gr=function(a){var b,h;if(a instanceof Transition){b=a._id,a=a._name}else {b=newId(),(h=cW).time=now(),a=a==null?null:a+''}for(var d=this._groups,i=d.length,g=0;g<i;++g){for(var e=d[g],j=e.length,f,c=0;c<j;++c){if(f=e[c]){ak(f,a,b,c,e,h||inherit(f,b))}}}return new Transition(d,this._parents,a,b)};selection.prototype.interrupt=gv;selection.prototype.transition=gr;var jN=[null];var jC=function(e,a){var b=e.__transition,d,c;if(b){a=a==null?null:a+'';for(c in b){if((d=b[c]).state>da&&d.name===a){return new Transition([[e]],jN,a,+c)}}}return null};var eM=function(a){return function(){return a}};var h2=function(b,c,a){this.target=b;this.type=c;this.selection=a};function nopropagation$1(){a.event.stopImmediatePropagation()}var b4=function(){a.event.preventDefault();a.event.stopImmediatePropagation()};var eU={name:'drag'};var c1={name:'space'};var aT={name:'handle'};var aS={name:'center'};var cQ={name:'x',handles:['e','w'].map(type),input:function(a,b){return a&&[[a[0],b[0][1]],[a[1],b[1][1]]]},output:function(a){return a&&[a[0][0],a[1][0]]}};var cR={name:'y',handles:['n','s'].map(type),input:function(a,b){return a&&[[b[0][0],a[0]],[b[1][0],a[1]]]},output:function(a){return a&&[a[0][1],a[1][1]]}};var kr={name:'xy',handles:['n','e','s','w','nw','ne','se','sw'].map(type),input:function(a){return a},output:function(a){return a}};var am={overlay:'crosshair',selection:'move',n:'ns-resize',e:'ew-resize',s:'ns-resize',w:'ew-resize',nw:'nwse-resize',ne:'nesw-resize',se:'nwse-resize',sw:'nesw-resize'};var fP={e:'w',w:'e',nw:'ne',ne:'nw',se:'sw',sw:'se'};var fQ={n:'s',s:'n',nw:'sw',ne:'se',se:'ne',sw:'nw'};var jO={overlay:+1,selection:+1,n:null,e:+1,s:null,w:-1,nw:-1,ne:+1,se:+1,sw:-1};var jP={overlay:+1,selection:+1,n:-1,e:null,s:+1,w:null,nw:-1,ne:-1,se:+1,sw:+1};function type(a){return {type:a}}function defaultFilter(){return !a.event.button}function defaultExtent(){var a=this.ownerSVGElement||this;return [[0,0],[a.width.baseVal.value,a.height.baseVal.value]]}function local$$1(a){while(!a.__brush){if(!(a=a.parentNode)){return}}return a.__brush}function empty(a){return a[0][0]===a[1][0]||a[0][1]===a[1][1]}function brushSelection(b){var a=b.__brush;return a?a.dim.output(a.selection):null}function brushX(){return brush$1(cQ)}function brushY(){return brush$1(cR)}var K=function(){return brush$1(kr)};function brush$1(b){var f=defaultExtent,g=defaultFilter,e=dispatch(K,'start','brush','end'),c=6,d;function K(a){var c=a.property('__brush',initialize).selectAll('.overlay').data([type('overlay')]);c.enter().append('rect').attr('class','overlay').attr('pointer-events','all').attr('cursor',am.overlay).merge(c).each(function(){var a=local$$1(this).extent;M(this).attr('x',a[0][0]).attr('y',a[0][1]).attr('width',a[1][0]-a[0][0]).attr('height',a[1][1]-a[0][1])});a.selectAll('.selection').data([type('selection')]).enter().append('rect').attr('class','selection').attr('cursor',am.selection).attr('fill','#777').attr('fill-opacity',0.3).attr('stroke','#fff').attr('shape-rendering','crispEdges');var d=a.selectAll('.handle').data(b.handles,function(a){return a.type});d.exit().remove();d.enter().append('rect').attr('class',function(a){return 'handle handle--'+a.type}).attr('cursor',function(a){return am[a.type]});a.each(redraw).attr('fill','none').attr('pointer-events','all').style('-webkit-tap-highlight-color','rgba(0,0,0,0)').on('mousedown.brush touchstart.brush',started)}K.move=function(c,a){if(c.selection){c.on('start.brush',function(){emitter(this,arguments).beforestart().start()}).on('interrupt.brush end.brush',function(){emitter(this,arguments).end()}).tween('brush',function(){var e=this,d=e.__brush,g=emitter(e,arguments),f=d.selection,c=b.input(typeof a==='function'?a.apply(this,arguments):a,d.extent),h=bd(f,c);function tween(a){d.selection=a===1&&empty(c)?null:h(a);redraw.call(e);g.brush()}return f&&c?tween:tween(1)})}else {c.each(function(){var c=this,f=arguments,e=c.__brush,d=b.input(typeof a==='function'?a.apply(c,f):a,e.extent),g=emitter(c,f).beforestart();aI(c);e.selection=d==null||empty(d)?null:d;redraw.call(c);g.start().brush().end()})}};function redraw(){var b=M(this),a=local$$1(this).selection;if(a){b.selectAll('.selection').style('display',null).attr('x',a[0][0]).attr('y',a[0][1]).attr('width',a[1][0]-a[0][0]).attr('height',a[1][1]-a[0][1]);b.selectAll('.handle').style('display',null).attr('x',function(b){return b.type[b.type.length-1]==='e'?a[1][0]-c/2:a[0][0]-c/2}).attr('y',function(b){return b.type[0]==='s'?a[1][1]-c/2:a[0][1]-c/2}).attr('width',function(b){return b.type==='n'||b.type==='s'?a[1][0]-a[0][0]+c:c}).attr('height',function(b){return b.type==='e'||b.type==='w'?a[1][1]-a[0][1]+c:c})}else {b.selectAll('.selection,.handle').style('display','none').attr('x',null).attr('y',null).attr('width',null).attr('height',null)}}function emitter(a,b){return a.__brush.emitter||new Emitter(a,b)}function Emitter(a,b){this.that=a;this.args=b;this.state=a.__brush;this.active=0}Emitter.prototype={beforestart:function(){if(++this.active===1){this.state.emitter=this,this.starting=!0}return this},start:function(){if(this.starting){this.starting=!1,this.emit('start')}return this},brush:function(){this.emit('brush');return this},end:function(){if(--this.active===0){delete this.state.emitter,this.emit('end')}return this},emit:function(a){customEvent(new h2(K,a,b.output(this.state.selection)),e.apply,e,[a,this.that,this.args])}};function started(){if(a.event.touches){if(a.event.changedTouches.length<a.event.touches.length){return b4()}}else {if(d){return}}if(!g.apply(this,arguments)){return}var u=this,r=a.event.target.__data__.type,s=(a.event.metaKey?r='overlay':r)==='selection'?eU:a.event.altKey?aS:aT,c=b===cR?null:jO[r],e=b===cQ?null:jP[r],t=local$$1(u),D=t.extent,m=t.selection,y=D[0][0],j,q,w=D[0][1],i,o,v=D[1][0],k,n,x=D[1][1],l,p,f,h,I,C=c&&e&&a.event.shiftKey,F,G,A=aA(u),B=A,H=emitter(u,arguments).beforestart();if(r==='overlay'){t.selection=m=[[j=b===cR?y:A[0],i=b===cQ?w:A[1]],[k=b===cR?v:j,l=b===cQ?x:i]]}else {j=m[0][0];i=m[0][1];k=m[1][0];l=m[1][1]}q=j;o=i;n=k;p=l;var E=M(u).attr('pointer-events','none');var z=E.selectAll('.overlay').attr('cursor',am[r]);if(a.event.touches){E.on('touchmove.brush',moved,!0).on('touchend.brush touchcancel.brush',ended,!0)}else {var J=M(a.event.view).on('keydown.brush',keydowned,!0).on('keyup.brush',keyupped,!0).on('mousemove.brush',moved,!0).on('mouseup.brush',ended,!0);b$(a.event.view)}nopropagation$1();aI(u);redraw.call(u);H.start();function moved(){var a=aA(u);if(C&&!F&&!G){if(Math.abs(a[0]-B[0])>Math.abs(a[1]-B[1])){G=!0}else {F=!0}}B=a;I=!0;b4();move()}function move(){var a;f=B[0]-A[0];h=B[1]-A[1];switch(s){case c1:case eU:if(c){f=Math.max(y-j,Math.min(v-k,f)),q=j+f,n=k+f};if(e){h=Math.max(w-i,Math.min(x-l,h)),o=i+h,p=l+h};break;case aT:if(c<0){f=Math.max(y-j,Math.min(v-j,f)),q=j+f,n=k}else {if(c>0){f=Math.max(y-k,Math.min(v-k,f)),q=j,n=k+f}};if(e<0){h=Math.max(w-i,Math.min(x-i,h)),o=i+h,p=l}else {if(e>0){h=Math.max(w-l,Math.min(x-l,h)),o=i,p=l+h}};break;case aS:if(c){q=Math.max(y,Math.min(v,j-f*c)),n=Math.max(y,Math.min(v,k+f*c))};if(e){o=Math.max(w,Math.min(x,i-h*e)),p=Math.max(w,Math.min(x,l+h*e))};break;}if(n<q){c*=-1;a=j,j=k,k=a;a=q,q=n,n=a;if(r in fP){z.attr('cursor',am[r=fP[r]])}}if(p<o){e*=-1;a=i,i=l,l=a;a=o,o=p,p=a;if(r in fQ){z.attr('cursor',am[r=fQ[r]])}}if(t.selection){m=t.selection}if(F){q=m[0][0],n=m[1][0]}if(G){o=m[0][1],p=m[1][1]}if(m[0][0]!==q||m[0][1]!==o||m[1][0]!==n||m[1][1]!==p){t.selection=[[q,o],[n,p]];redraw.call(u);H.brush()}}function ended(){nopropagation$1();if(a.event.touches){if(a.event.touches.length){return}if(d){clearTimeout(d)}d=setTimeout(function(){d=null},500);E.on('touchmove.brush touchend.brush touchcancel.brush',null)}else {yesdrag(a.event.view,I);J.on('keydown.brush keyup.brush mousemove.brush mouseup.brush',null)}E.attr('pointer-events','all');z.attr('cursor',am.overlay);if(t.selection){m=t.selection}if(empty(m)){t.selection=null,redraw.call(u)}H.end()}function keydowned(){switch(a.event.keyCode){case 16:C=c&&e;break;case 18:if(s===aT){if(c){k=n-f*c,j=q+f*c}if(e){l=p-h*e,i=o+h*e}s=aS;move()};break;case 32:if(s===aT||s===aS){if(c<0){k=n-f}else {if(c>0){j=q-f}}if(e<0){l=p-h}else {if(e>0){i=o-h}}s=c1;z.attr('cursor',am.selection);move()};break;default:return;}b4()}function keyupped(){switch(a.event.keyCode){case 16:if(C){F=G=C=!1;move()};break;case 18:if(s===aS){if(c<0){k=n}else {if(c>0){j=q}}if(e<0){l=p}else {if(e>0){i=o}}s=aT;move()};break;case 32:if(s===c1){if(a.event.altKey){if(c){k=n-f*c,j=q+f*c}if(e){l=p-h*e,i=o+h*e}s=aS}else {if(c<0){k=n}else {if(c>0){j=q}}if(e<0){l=p}else {if(e>0){i=o}}s=aT}z.attr('cursor',am[r]);move()};break;default:return;}b4()}}function initialize(){var a=this.__brush||{selection:null};a.extent=f.apply(this,arguments);a.dim=b;return a}K.extent=function(a){return arguments.length?(f=typeof a==='function'?a:eM([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),K):f};K.filter=function(a){return arguments.length?(g=typeof a==='function'?a:eM(!!a),K):g};K.handleSize=function(a){return arguments.length?(c=+a,K):c};K.on=function(){var a=e.on.apply(e,arguments);return a===e?K:a};return K}var f6=Math.cos;var ga=Math.sin;var f2=Math.PI;var b9=f2/2;var fV=f2*2;var fR=Math.max;function compareValue(a){return function(b,c){return a(b.source.value+b.target.value,c.source.value+c.target.value)}}var Z=function(){var d=0,c=null,b=null,a=null;function Z(k){var e=k.length,l=[],s=Y(e),p=[],m=[],w=m.groups=new Array(e),q=new Array(e*e),j,h,u,t,f,g;j=0,f=-1;while(++f<e){h=0,g=-1;while(++g<e){h+=k[f][g]}l.push(h);p.push(Y(e));j+=h}if(c){s.sort(function(a,b){return c(l[a],l[b])})}if(b){p.forEach(function(c,a){c.sort(function(c,d){return b(k[a][c],k[a][d])})})}j=fR(0,fV-d*e)/j;t=j?d:fV/e;h=0,f=-1;while(++f<e){u=h,g=-1;while(++g<e){var i=s[f],r=p[i][g],v=k[i][r],x=h,y=h+=v*j;q[r*e+i]={index:i,subindex:r,startAngle:x,endAngle:y,value:v}}w[i]={index:i,startAngle:u,endAngle:h,value:l[i]};h+=t}f=-1;while(++f<e){g=f-1;while(++g<e){var n=q[g*e+f],o=q[f*e+g];if(n.value||o.value){m.push(n.value<o.value?{source:o,target:n}:{source:n,target:o})}}}return a?m.sort(a):m}Z.padAngle=function(a){return arguments.length?(d=fR(0,a),Z):d};Z.sortGroups=function(a){return arguments.length?(c=a,Z):c};Z.sortSubgroups=function(a){return arguments.length?(b=a,Z):b};Z.sortChords=function(b){return arguments.length?(b==null?a=null:(a=compareValue(b))._=b,Z):a&&a._};return Z};var js=Array.prototype.slice;var c3=function(a){return function(){return a}};var dU=Math.PI;var dN=2*dU;var aH=1.0E-6;var im=dN-aH;function Path(){this._x0=this._y0=this._x1=this._y1=null;this._=''}function path(){return new Path()}Path.prototype=path.prototype={constructor:Path,moveTo:function(a,b){this._+='M'+(this._x0=this._x1=+a)+','+(this._y0=this._y1=+b)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+='Z'}},lineTo:function(a,b){this._+='L'+(this._x1=+a)+','+(this._y1=+b)},quadraticCurveTo:function(a,b,c,d){this._+='Q'+ +a+','+ +b+','+(this._x1=+c)+','+(this._y1=+d)},bezierCurveTo:function(a,c,b,d,e,f){this._+='C'+ +a+','+ +c+','+ +b+','+ +d+','+(this._x1=+e)+','+(this._y1=+f)},arcTo:function(a,b,h,i,c){a=+a,b=+b,h=+h,i=+i,c=+c;var r=this._x1,s=this._y1,f=h-a,g=i-b,d=r-a,e=s-b,j=d*d+e*e;if(c<0){throw new Error('negative radius: '+c)}if(this._x1===null){this._+='M'+(this._x1=a)+','+(this._y1=b)}else {if(!(j>aH)){}else {if(!(Math.abs(e*f-g*d)>aH)||!c){this._+='L'+(this._x1=a)+','+(this._y1=b)}else {var l=h-r,m=i-s,n=f*f+g*g,u=l*l+m*m,p=Math.sqrt(n),o=Math.sqrt(j),t=c*Math.tan((dU-Math.acos((n+j-u)/(2*p*o)))/2),k=t/o,q=t/p;if(Math.abs(k-1)>aH){this._+='L'+(a+k*d)+','+(b+k*e)}this._+='A'+c+','+c+',0,0,'+ +(e*l>d*m)+','+(this._x1=a+q*f)+','+(this._y1=b+q*g)}}}},arc:function(c,d,a,e,f,j){c=+c,d=+d,a=+a;var k=a*Math.cos(e),l=a*Math.sin(e),g=c+k,h=d+l,i=1^j,b=j?e-f:f-e;if(a<0){throw new Error('negative radius: '+a)}if(this._x1===null){this._+='M'+g+','+h}else {if(Math.abs(this._x1-g)>aH||Math.abs(this._y1-h)>aH){this._+='L'+g+','+h}}if(!a){return}if(b<0){b=b%dN+dN}if(b>im){this._+='A'+a+','+a+',0,1,'+i+','+(c-k)+','+(d-l)+'A'+a+','+a+',0,1,'+i+','+(this._x1=g)+','+(this._y1=h)}else {if(b>aH){this._+='A'+a+','+a+',0,'+ +(b>=dU)+','+i+','+(this._x1=c+a*Math.cos(f))+','+(this._y1=d+a*Math.sin(f))}}},rect:function(c,d,a,b){this._+='M'+(this._x0=this._x1=+c)+','+(this._y0=this._y1=+d)+'h'+ +a+'v'+ +b+'h'+-a+'Z'},toString:function(){return this._}};function defaultSource(a){return a.source}function defaultTarget(a){return a.target}function defaultRadius(a){return a.radius}function defaultStartAngle(a){return a.startAngle}function defaultEndAngle(a){return a.endAngle}var A=function(){var e=defaultSource,f=defaultTarget,d=defaultRadius,b=defaultStartAngle,c=defaultEndAngle,a=null;function A(){var j,g=js.call(arguments),q=e.apply(this,g),r=f.apply(this,g),k=+d.apply(this,(g[0]=q,g)),h=b.apply(this,g)-b9,m=c.apply(this,g)-b9,n=k*f6(h),o=k*ga(h),l=+d.apply(this,(g[0]=r,g)),i=b.apply(this,g)-b9,p=c.apply(this,g)-b9;if(!a){a=j=path()}a.moveTo(n,o);a.arc(0,0,k,h,m);if(h!==i||m!==p){a.quadraticCurveTo(0,0,l*f6(i),l*ga(i));a.arc(0,0,l,i,p)}a.quadraticCurveTo(0,0,n,o);a.closePath();if(j){return a=null,j+''||null}}A.radius=function(a){return arguments.length?(d=typeof a==='function'?a:c3(+a),A):d};A.startAngle=function(a){return arguments.length?(b=typeof a==='function'?a:c3(+a),A):b};A.endAngle=function(a){return arguments.length?(c=typeof a==='function'?a:c3(+a),A):c};A.source=function(a){return arguments.length?(e=a,A):e};A.target=function(a){return arguments.length?(f=a,A):f};A.context=function(b){return arguments.length?(a=b==null?null:b,A):a};return A};var S='$';function Map(){}Map.prototype=map$1.prototype={constructor:Map,has:function(a){return S+a in this},get:function(a){return this[S+a]},set:function(b,a){this[S+b]=a;return this},remove:function(b){var a=S+b;return a in this&&delete this[a]},clear:function(){for(var a in this){if(a[0]===S){delete this[a]}}},keys:function(){var b=[];for(var a in this){if(a[0]===S){b.push(a.slice(1))}}return b},values:function(){var b=[];for(var a in this){if(a[0]===S){b.push(this[a])}}return b},entries:function(){var b=[];for(var a in this){if(a[0]===S){b.push({key:a.slice(1),value:this[a]})}}return b},size:function(){var a=0;for(var b in this){if(b[0]===S){++a}}return a},empty:function(){for(var a in this){if(a[0]===S){return !1}}return !0},each:function(b){for(var a in this){if(a[0]===S){b(this[a],a.slice(1),this)}}}};function map$1(a,e){var c=new Map();if(a instanceof Map){a.each(function(a,b){c.set(b,a)})}else {if(Array.isArray(a)){var b=-1,f=a.length,g;if(e==null){while(++b<f){c.set(b,a[b])}}else {while(++b<f){c.set(e(g=a[b],b,a),g)}}}else {if(a){for(var d in a){c.set(d,a[d])}}}}return c}var kd=function(){var a=[],e=[],d,c,b;function apply(b,f,h,i){if(f>=a.length){return c!=null?c(b):d!=null?b.sort(d):b}var m=-1,o=b.length,n=a[f++],j,g,e=map$1(),l,k=h();while(++m<o){if(l=e.get(j=n(g=b[m])+'')){l.push(g)}else {e.set(j,[g])}}e.each(function(a,b){i(k,b,apply(a,f,h,i))});return k}function ch(f,d){if(++d>a.length){return f}var b,g=e[d-1];if(c!=null&&d>=a.length){b=f.entries()}else {b=[],f.each(function(c,a){b.push({key:a,values:ch(c,d)})})}return g!=null?b.sort(function(a,b){return g(a.key,b.key)}):b}return b={object:function(a){return apply(a,0,createObject,setObject)},map:function(a){return apply(a,0,createMap,setMap)},entries:function(a){return ch(apply(a,0,createMap,setMap),0)},key:function(c){a.push(c);return b},sortKeys:function(c){e[a.length-1]=c;return b},sortValues:function(a){d=a;return b},rollup:function(a){c=a;return b}}};function createObject(){return {}}function setObject(a,c,b){a[c]=b}function createMap(){return map$1()}function setMap(c,b,a){c.set(b,a)}function Set(){}var aO=map$1.prototype;Set.prototype=set$2.prototype={constructor:Set,has:aO.has,add:function(a){a+='';this[S+a]=a;return this},remove:aO.remove,clear:aO.clear,values:aO.keys,size:aO.size,empty:aO.empty,each:aO.each};function set$2(a,d){var c=new Set();if(a instanceof Set){a.each(function(a){c.add(a)})}else {if(a){var b=-1,e=a.length;if(d==null){while(++b<e){c.add(a[b])}}else {while(++b<e){c.add(d(a[b],b,a))}}}}return c}var ka=function(c){var a=[];for(var b in c){a.push(b)}return a};var jS=function(b){var a=[];for(var c in b){a.push(b[c])}return a};var ch=function(c){var a=[];for(var b in c){a.push({key:b,value:c[b]})}return a};function objectConverter(a){return new Function('d','return {'+a.map(function(a,b){return JSON.stringify(a)+': d['+b+']'}).join(',')+'}')}function customConverter(a,c){var b=objectConverter(a);return function(d,e){return c(b(d),e,a)}}function inferColumns(c){var a=Object.create(null),b=[];c.forEach(function(d){for(var c in d){if(!(c in a)){b.push(a[c]=c)}}});return b}var d_=function(a){var c=new RegExp('["'+a+'\n\r]'),b=a.charCodeAt(0);function parse(e,d){var a,b,c=parseRows(e,function(c,e){if(a){return a(c,e-1)}b=c,a=d?customConverter(c,d):objectConverter(c)});c.columns=b;return c}function parseRows(a,k){var j={},g={},i=[],h=a.length,c=0,l=0,e,d;function token(){if(c>=h){return g}if(d){return d=!1,j}var i=c,f;if(a.charCodeAt(i)===34){var e=i;while(e++<h){if(a.charCodeAt(e)===34){if(a.charCodeAt(e+1)!==34){break}++e}}c=e+2;f=a.charCodeAt(e+1);if(f===13){d=!0;if(a.charCodeAt(e+2)===10){++c}}else {if(f===10){d=!0}}return a.slice(i+1,e).replace(/""/g,'"')}while(c<h){var k=1;f=a.charCodeAt(c++);if(f===10){d=!0}else {if(f===13){d=!0;if(a.charCodeAt(c)===10){++c,++k}}else {if(f!==b){continue}}}return a.slice(i,c-k)}return a.slice(i)}while((e=token())!==g){var f=[];while(e!==j&&e!==g){f.push(e);e=token()}if(k&&(f=k(f,l++))==null){continue}i.push(f)}return i}function format(c,b){if(b==null){b=inferColumns(c)}return [b.map(formatValue).join(a)].concat(c.map(function(c){return b.map(function(a){return formatValue(c[a])}).join(a)})).join('\n')}function formatRows(a){return a.map(formatRow).join('\n')}function formatRow(b){return b.map(formatValue).join(a)}function formatValue(a){return a==null?'':c.test(a+='')?'"'+a.replace(/\"/g,'""')+'"':a}return {parse:parse,parseRows:parseRows,format:format,formatRows:formatRows}};var cA=d_(',');var e4=cA.parse;var hF=cA.parseRows;var iv=cA.format;var hr=cA.formatRows;var cE=d_('\t');var ff=cE.parse;var hR=cE.parseRows;var iQ=cE.format;var hB=cE.formatRows;var iS=function(a,b){var c;if(a==null){a=0}if(b==null){b=0}function force(){var d,h=c.length,e,f=0,g=0;for(d=0;d<h;++d){e=c[d],f+=e.x,g+=e.y}for(f=f/h-a,g=g/h-b,d=0;d<h;++d){e=c[d],e.x-=f,e.y-=g}}force.initialize=function(a){c=a};force.x=function(b){return arguments.length?(a=+b,force):a};force.y=function(a){return arguments.length?(b=+a,force):b};return force};var x=function(a){return function(){return a}};var av=function(){return (Math.random()-0.5)*1.0E-6};var i5=function(a){var b=+this._x.call(null,a),c=+this._y.call(null,a);return add(this.cover(b,c),b,c,a)};function add(a,n,o,s){if(isNaN(n)||isNaN(o)){return a}var b,c=a._root,f={data:s},j=a._x0,l=a._y0,k=a._x1,m=a._y1,d,e,p,q,i,h,g,r;if(!c){return a._root=f,a}while(c.length){if(i=n>=(d=(j+k)/2)){j=d}else {k=d}if(h=o>=(e=(l+m)/2)){l=e}else {m=e}if(b=c,!(c=c[g=h<<1|i])){return b[g]=f,a}}p=+a._x.call(null,c.data);q=+a._y.call(null,c.data);if(n===p&&o===q){return f.next=c,b?b[g]=f:a._root=f,a}do{b=b?b[g]=new Array(4):a._root=new Array(4);if(i=n>=(d=(j+k)/2)){j=d}else {k=d}if(h=o>=(e=(l+m)/2)){l=e}else {m=e}}while((g=h<<1|i)===(r=(q>=e)<<1|p>=d));return b[r]=c,b[g]=f,a}function addAll(i){var l,a,h=i.length,b,c,j=new Array(h),k=new Array(h),d=Infinity,f=Infinity,e=-Infinity,g=-Infinity;for(a=0;a<h;++a){if(isNaN(b=+this._x.call(null,l=i[a]))||isNaN(c=+this._y.call(null,l))){continue}j[a]=b;k[a]=c;if(b<d){d=b}if(b>e){e=b}if(c<f){f=c}if(c>g){g=c}}if(e<d){d=this._x0,e=this._x1}if(g<f){f=this._y0,g=this._y1}this.cover(d,f).cover(e,g);for(a=0;a<h;++a){add(this,j[a],k[a],i[a])}return this}var io=function(g,h){if(isNaN(g=+g)||isNaN(h=+h)){return this}var b=this._x0,e=this._y0,d=this._x1,f=this._y1;if(isNaN(b)){d=(b=Math.floor(g))+1;f=(e=Math.floor(h))+1}else {if(b>g||g>d||e>h||h>f){var c=d-b,i=this._root,a,j;switch(j=(h<(e+f)/2)<<1|g<(b+d)/2){case 0:do{a=new Array(4),a[j]=i,i=a}while(c*=2,d=b+c,f=e+c,g>d||h>f);break;case 1:do{a=new Array(4),a[j]=i,i=a}while(c*=2,b=d-c,f=e+c,b>g||h>f);break;case 2:do{a=new Array(4),a[j]=i,i=a}while(c*=2,d=b+c,e=f-c,g>d||e>h);break;case 3:do{a=new Array(4),a[j]=i,i=a}while(c*=2,b=d-c,e=f-c,b>g||e>h);break;}if(this._root&&this._root.length){this._root=i}}else {return this}}this._x0=b;this._y0=e;this._x1=d;this._y1=f;return this};var iM=function(){var a=[];this.visit(function(b){if(!b.length){do{a.push(b.data)}while(b=b.next)}});return a};var h_=function(a){return arguments.length?this.cover(+a[0][0],+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]]};var D=function(a,b,d,c,e){this.node=a;this.x0=b;this.y0=d;this.x1=c;this.y1=e};var iN=function(e,f,c){var s,i=this._x0,m=this._y0,j,n,k,o,l=this._x1,p=this._y1,a=[],b=this._root,d,r;if(b){a.push(new D(b,i,m,l,p))}if(c==null){c=Infinity}else {i=e-c,m=f-c;l=e+c,p=f+c;c*=c}while(d=a.pop()){if(!(b=d.node)||(j=d.x0)>l||(n=d.y0)>p||(k=d.x1)<i||(o=d.y1)<m){continue}if(b.length){var g=(j+k)/2,h=(n+o)/2;a.push(new D(b[3],g,h,k,o),new D(b[2],j,h,g,o),new D(b[1],g,n,k,h),new D(b[0],j,n,g,h));if(r=(f>=h)<<1|e>=g){d=a[a.length-1];a[a.length-1]=a[a.length-1-r];a[a.length-1-r]=d}}else {var u=e-+this._x.call(null,b.data),v=f-+this._y.call(null,b.data),t=u*u+v*v;if(t<c){var q=Math.sqrt(c=t);i=e-q,m=f-q;l=e+q,p=f+q;s=b.data}}}return s};var h0=function(i){if(isNaN(q=+this._x.call(null,i))||isNaN(r=+this._y.call(null,i))){return this}var b,a=this._root,f,e,d,l=this._x0,n=this._y0,m=this._x1,o=this._y1,q,r,g,h,k,j,c,p;if(!a){return this}if(a.length){while(!0){if(k=q>=(g=(l+m)/2)){l=g}else {m=g}if(j=r>=(h=(n+o)/2)){n=h}else {o=h}if(!(b=a,a=a[c=j<<1|k])){return this}if(!a.length){break}if(b[c+1&3]||b[c+2&3]||b[c+3&3]){f=b,p=c}}}while(a.data!==i){if(!(e=a,a=a.next)){return this}}if(d=a.next){delete a.next}if(e){return d?e.next=d:delete e.next,this}if(!b){return this._root=d,this}d?b[c]=d:delete b[c];if((a=b[0]||b[1]||b[2]||b[3])&&a===(b[3]||b[2]||b[1]||b[0])&&!a.length){if(f){f[p]=a}else {this._root=a}}return this};function removeAll(b){for(var a=0,c=b.length;a<c;++a){this.remove(b[a])}return this}var iO=function(){return this._root};var iP=function(){var a=0;this.visit(function(b){if(!b.length){do{++a}while(b=b.next)}});return a};var ip=function(k){var c=[],d,b=this._root,a,e,h,f,i;if(b){c.push(new D(b,this._x0,this._y0,this._x1,this._y1))}while(d=c.pop()){if(!k(b=d.node,e=d.x0,h=d.y0,f=d.x1,i=d.y1)&&b.length){var g=(e+f)/2,j=(h+i)/2;if(a=b[3]){c.push(new D(a,g,j,f,i))}if(a=b[2]){c.push(new D(a,e,j,g,i))}if(a=b[1]){c.push(new D(a,g,h,f,j))}if(a=b[0]){c.push(new D(a,e,h,g,j))}}}return this};var g7=function(l){var c=[],k=[],a;if(this._root){c.push(new D(this._root,this._x0,this._y0,this._x1,this._y1))}while(a=c.pop()){var d=a.node;if(d.length){var b,g=a.x0,i=a.y0,h=a.x1,j=a.y1,e=(g+h)/2,f=(i+j)/2;if(b=d[0]){c.push(new D(b,g,i,e,f))}if(b=d[1]){c.push(new D(b,e,i,h,f))}if(b=d[2]){c.push(new D(b,g,f,e,j))}if(b=d[3]){c.push(new D(b,e,f,h,j))}}k.push(a)}while(a=k.pop()){l(a.node,a.x0,a.y0,a.x1,a.y1)}return this};function defaultX(a){return a[0]}var jQ=function(a){return arguments.length?(this._x=a,this):this._x};function defaultY(a){return a[1]}var jR=function(a){return arguments.length?(this._y=a,this):this._y};function quadtree(a,c,d){var b=new Quadtree(c==null?defaultX:c,d==null?defaultY:d,NaN,NaN,NaN,NaN);return a==null?b:b.addAll(a)}function Quadtree(e,f,a,c,b,d){this._x=e;this._y=f;this._x0=a;this._y0=c;this._x1=b;this._y1=d;this._root=undefined}function leaf_copy(a){var b={data:a.data},c=b;while(a=a.next){c=c.next={data:a.data}}return b}var z=quadtree.prototype=Quadtree.prototype;z.copy=function(){var b=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root,e,d;if(!a){return b}if(!a.length){return b._root=leaf_copy(a),b}e=[{source:a,target:b._root=new Array(4)}];while(a=e.pop()){for(var c=0;c<4;++c){if(d=a.source[c]){if(d.length){e.push({source:d,target:a.target[c]=new Array(4)})}else {a.target[c]=leaf_copy(d)}}}}return b};z.add=i5;z.addAll=addAll;z.cover=io;z.data=iM;z.extent=h_;z.find=iN;z.remove=h0;z.removeAll=removeAll;z.root=iO;z.size=iP;z.visit=ip;z.visitAfter=g7;z.x=jQ;z.y=jR;function x(a){return a.x+a.vx}function y(a){return a.y+a.vy}var ja=function(b){var a,c,e=1,d=1;if(typeof b!=='function'){b=x(b==null?1:+b)}function force(){var i,m=a.length,j,b,g,h,f,k;for(var l=0;l<d;++l){j=quadtree(a,x,y).visitAfter(prepare);for(i=0;i<m;++i){b=a[i];f=c[b.index],k=f*f;g=b.x+b.vx;h=b.y+b.vy;j.visit(apply)}}function apply(m,n,p,o,q){var d=m.data,l=m.r,a=f+l;if(d){if(d.index>b.index){var i=g-d.x-d.vx,j=h-d.y-d.vy,c=i*i+j*j;if(c<a*a){if(i===0){i=av(),c+=i*i}if(j===0){j=av(),c+=j*j}c=(a-(c=Math.sqrt(c)))/c*e;b.vx+=(i*=c)*(a=(l*=l)/(k+l));b.vy+=(j*=c)*a;d.vx-=i*(a=1-a);d.vy-=j*a}}return}return n>g+a||o<g-a||p>h+a||q<h-a}}function prepare(a){if(a.data){return a.r=c[a.data.index]}for(var b=a.r=0;b<4;++b){if(a[b]&&a[b].r>a.r){a.r=a[b].r}}}function initialize(){if(!a){return}var d,f=a.length,e;c=new Array(f);for(d=0;d<f;++d){e=a[d],c[e.index]=+b(e,d,a)}}force.initialize=function(b){a=b;initialize()};force.iterations=function(a){return arguments.length?(d=+a,force):d};force.strength=function(a){return arguments.length?(e=+a,force):e};force.radius=function(a){return arguments.length?(b=typeof a==='function'?a:x(+a),initialize(),force):b};return force};function index(a){return a.index}function find(c,a){var b=c.get(a);if(!b){throw new Error('missing: '+a)}return b}var kb=function(a){var j=index,h=defaultStrength,f,g=x(30),e,c,b,i,d=1;if(a==null){a=[]}function defaultStrength(a){return 1/Math.min(b[a.source.index],b[a.target.index])}function force(o){for(var n=0,p=a.length;n<d;++n){for(var g=0,m,b,c,j,k,h,l;g<p;++g){m=a[g],b=m.source,c=m.target;j=c.x+c.vx-b.x-b.vx||av();k=c.y+c.vy-b.y-b.vy||av();h=Math.sqrt(j*j+k*k);h=(h-e[g])/h*o*f[g];j*=h,k*=h;c.vx-=j*(l=i[g]);c.vy-=k*l;b.vx+=j*(l=1-l);b.vy+=k*l}}}function initialize(){if(!c){return}var g,l=c.length,h=a.length,k=map$1(c,j),d;for(g=0,b=new Array(l);g<h;++g){d=a[g],d.index=g;if(typeof d.source!=='object'){d.source=find(k,d.source)}if(typeof d.target!=='object'){d.target=find(k,d.target)}b[d.source.index]=(b[d.source.index]||0)+1;b[d.target.index]=(b[d.target.index]||0)+1}for(g=0,i=new Array(h);g<h;++g){d=a[g],i[g]=b[d.source.index]/(b[d.source.index]+b[d.target.index])}f=new Array(h),initializeStrength();e=new Array(h),initializeDistance()}function initializeStrength(){if(!c){return}for(var b=0,d=a.length;b<d;++b){f[b]=+h(a[b],b,a)}}function initializeDistance(){if(!c){return}for(var b=0,d=a.length;b<d;++b){e[b]=+g(a[b],b,a)}}force.initialize=function(a){c=a;initialize()};force.links=function(b){return arguments.length?(a=b,initialize(),force):a};force.id=function(a){return arguments.length?(j=a,force):j};force.iterations=function(a){return arguments.length?(d=+a,force):d};force.strength=function(a){return arguments.length?(h=typeof a==='function'?a:x(+a),initializeStrength(),force):h};force.distance=function(a){return arguments.length?(g=typeof a==='function'?a:x(+a),initializeDistance(),force):g};return force};function x$1(a){return a.x}function y$1(a){return a.y}var hu=10;var hJ=Math.PI*(3-Math.sqrt(5));var il=function(b){var a,c=1,f=0.001,i=1-Math.pow(f,1/300),h=0,e=0.6,d=map$1(),j=timer(cx),g=dispatch('tick','end');if(b==null){b=[]}function cx(){tick();g.call('tick',a);if(c<f){j.stop();g.call('end',a)}}function tick(){var f,g=b.length,a;c+=(h-c)*i;d.each(function(a){a(c)});for(f=0;f<g;++f){a=b[f];if(a.fx==null){a.x+=a.vx*=e}else {a.x=a.fx,a.vx=0}if(a.fy==null){a.y+=a.vy*=e}else {a.y=a.fy,a.vy=0}}}function initializeNodes(){for(var c=0,f=b.length,a;c<f;++c){a=b[c],a.index=c;if(isNaN(a.x)||isNaN(a.y)){var d=hu*Math.sqrt(c),e=c*hJ;a.x=d*Math.cos(e);a.y=d*Math.sin(e)}if(isNaN(a.vx)||isNaN(a.vy)){a.vx=a.vy=0}}}function initializeForce(a){if(a.initialize){a.initialize(b)}return a}initializeNodes();return a={tick:tick,restart:function(){return j.restart(cx),a},stop:function(){return j.stop(),a},nodes:function(c){return arguments.length?(b=c,initializeNodes(),d.each(initializeForce),a):b},alpha:function(b){return arguments.length?(c=+b,a):c},alphaMin:function(b){return arguments.length?(f=+b,a):f},alphaDecay:function(b){return arguments.length?(i=+b,a):+i},alphaTarget:function(b){return arguments.length?(h=+b,a):h},velocityDecay:function(b){return arguments.length?(e=1-b,a):1-e},force:function(b,c){return arguments.length>1?(c==null?d.remove(b):d.set(b,initializeForce(c)),a):d.get(b)},find:function(j,k,a){var d=0,i=b.length,f,g,e,c,h;if(a==null){a=Infinity}else {a*=a}for(d=0;d<i;++d){c=b[d];f=j-c.x;g=k-c.y;e=f*f+g*g;if(e<a){h=c,a=e}}return h},on:function(b,c){return arguments.length>1?(g.on(b,c),a):g.on(b)}}};var iZ=function(){var b,a,f,g=x(-30),e,c=1,d=Infinity,h=0.81;function force(e){var c,g=b.length,d=quadtree(b,x$1,y$1).visitAfter(accumulate);for(f=e,c=0;c<g;++c){a=b[c],d.visit(apply)}}function initialize(){if(!b){return}var a,d=b.length,c;e=new Array(d);for(a=0;a<d;++a){c=b[a],e[c.index]=+g(c,a,b)}}function accumulate(b){var c=0,a,d,g,h,f;if(b.length){for(g=h=f=0;f<4;++f){if((a=b[f])&&(d=a.value)){c+=d,g+=d*a.x,h+=d*a.y}}b.x=g/c;b.y=h/c}else {a=b;a.x=a.data.x;a.y=a.data.y;do{c+=e[a.data.index]}while(a=a.next)}b.value=c}function apply(g,l,n,m){if(!g.value){return !0}var i=g.x-a.x,j=g.y-a.y,k=m-l,b=i*i+j*j;if(k*k/h<b){if(b<d){if(i===0){i=av(),b+=i*i}if(j===0){j=av(),b+=j*j}if(b<c){b=Math.sqrt(c*b)}a.vx+=i*g.value*f/b;a.vy+=j*g.value*f/b}return !0}else {if(g.length||b>=d){return}}if(g.data!==a||g.next){if(i===0){i=av(),b+=i*i}if(j===0){j=av(),b+=j*j}if(b<c){b=Math.sqrt(c*b)}}do{if(g.data!==a){k=e[g.data.index]*f/b;a.vx+=i*k;a.vy+=j*k}}while(g=g.next)}force.initialize=function(a){b=a;initialize()};force.strength=function(a){return arguments.length?(g=typeof a==='function'?a:x(+a),initialize(),force):g};force.distanceMin=function(a){return arguments.length?(c=a*a,force):Math.sqrt(c)};force.distanceMax=function(a){return arguments.length?(d=a*a,force):Math.sqrt(d)};force.theta=function(a){return arguments.length?(h=a*a,force):Math.sqrt(h)};return force};var kn=function(b){var d=x(0.1),a,c,e;if(typeof b!=='function'){b=x(b==null?0:+b)}function force(f){for(var b=0,g=a.length,d;b<g;++b){d=a[b],d.vx+=(e[b]-d.x)*c[b]*f}}function initialize(){if(!a){return}var f,g=a.length;c=new Array(g);e=new Array(g);for(f=0;f<g;++f){c[f]=isNaN(e[f]=+b(a[f],f,a))?0:+d(a[f],f,a)}}force.initialize=function(b){a=b;initialize()};force.strength=function(a){return arguments.length?(d=typeof a==='function'?a:x(+a),initialize(),force):d};force.x=function(a){return arguments.length?(b=typeof a==='function'?a:x(+a),initialize(),force):b};return force};var kp=function(b){var d=x(0.1),a,c,e;if(typeof b!=='function'){b=x(b==null?0:+b)}function force(f){for(var b=0,g=a.length,d;b<g;++b){d=a[b],d.vy+=(e[b]-d.y)*c[b]*f}}function initialize(){if(!a){return}var f,g=a.length;c=new Array(g);e=new Array(g);for(f=0;f<g;++f){c[f]=isNaN(e[f]=+b(a[f],f,a))?0:+d(a[f],f,a)}}force.initialize=function(b){a=b;initialize()};force.strength=function(a){return arguments.length?(d=typeof a==='function'?a:x(+a),initialize(),force):d};force.y=function(a){return arguments.length?(b=typeof a==='function'?a:x(+a),initialize(),force):b};return force};var bW=function(a,d){if((c=(a=d?a.toExponential(d-1):a.toExponential()).indexOf('e'))<0){return null}var c,b=a.slice(0,c);return [b.length>1?b[0]+b.slice(2):b,+a.slice(c+1)]};var aX=function(a){return a=bW(Math.abs(a)),a?a[1]:NaN};var hZ=function(a,b){return function(g,e){var f=g.length,i=[],h=0,c=a[0],d=0;while(f>0&&c>0){if(d+c+1>e){c=Math.max(1,e-d)}i.push(g.substring(f-=c,f+c));if((d+=c+1)>e){break}c=a[h=(h+1)%a.length]}return i.reverse().join(b)}};var hc=function(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}};var ht=function(b,f){b=b.toPrecision(f);out: for(var e=b.length,c=1,a=-1,d;c<e;++c){switch(b[c]){case '.':a=d=c;break;case '0':if(a===0){a=c};d=c;break;case 'e':break out;default:if(a>0){a=0};break;}}return a>0?b.slice(0,a)+b.slice(d+1):b};var es;var gI=function(e,g){var c=bW(e,g);if(!c){return e+''}var b=c[0],f=c[1],a=f-(es=Math.max(-8,Math.min(8,Math.floor(f/3)))*3)+1,d=b.length;return a===d?b:a>d?b+(new Array(a-d+1)).join('0'):a>0?b.slice(0,a)+'.'+b.slice(a):'0.'+(new Array(1-a)).join('0')+bW(e,Math.max(0,g+a-1))[0]};var ev=function(d,e){var c=bW(d,e);if(!c){return d+''}var a=c[0],b=c[1];return b<0?'0.'+(new Array(-b)).join('0')+a:a.length>b+1?a.slice(0,b+1)+'.'+a.slice(b+1):a+(new Array(b-a.length+2)).join('0')};var eG={'':ht,'%':function(b,a){return (b*100).toFixed(a)},'b':function(a){return Math.round(a).toString(2)},'c':function(a){return a+''},'d':function(a){return Math.round(a).toString(10)},'e':function(b,a){return b.toExponential(a)},'f':function(b,a){return b.toFixed(a)},'g':function(b,a){return b.toPrecision(a)},'o':function(a){return Math.round(a).toString(8)},'p':function(b,a){return ev(b*100,a)},'r':ev,'s':gI,'X':function(a){return Math.round(a).toString(16).toUpperCase()},'x':function(a){return Math.round(a).toString(16)}};var kG=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function formatSpecifier(a){return new FormatSpecifier(a)}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(f){if(!(a=kG.exec(f))){throw new Error('invalid format: '+f)}var a,d=a[1]||' ',c=a[2]||'>',k=a[3]||'-',i=a[4]||'',e=!!a[5],j=a[6]&&+a[6],g=!!a[7],h=a[8]&&+a[8].slice(1),b=a[9]||'';if(b==='n'){g=!0,b='g'}else {if(!eG[b]){b=''}}if(e||d==='0'&&c==='='){e=!0,d='0',c='='}this.fill=d;this.align=c;this.sign=k;this.symbol=i;this.zero=e;this.width=j;this.comma=g;this.precision=h;this.type=b}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?'0':'')+(this.width==null?'':Math.max(1,this.width|0))+(this.comma?',':'')+(this.precision==null?'':'.'+Math.max(0,this.precision|0))+this.type};var eP=function(a){return a};var e9=['y','z','a','f','p','n','','m','','k','M','G','T','P','E','Z','Y'];var ex=function(a){var c=a.grouping&&a.thousands?hZ(a.grouping,a.thousands):eP,b=a.currency,e=a.decimal,d=a.numerals?hc(a.numerals):eP;function newFormat(a){a=formatSpecifier(a);var r=a.fill,q=a.align,g=a.sign,i=a.symbol,m=a.zero,j=a.width,l=a.comma,h=a.precision,f=a.type;var o=i==='$'?b[0]:i==='#'&&/[boxX]/.test(f)?'0'+f.toLowerCase():'',p=i==='$'?b[1]:/[%p]/.test(f)?'%':'';var k=eG[f],n=!f||/[defgprs%]/.test(f);h=h==null?f?6:12:/[gprs]/.test(f)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h));function format(a){var s=o,b=p,t,x,w;if(f==='c'){b=k(a)+b;a=''}else {a=+a;var u=a<0;a=k(Math.abs(a),h);if(u&&+a===0){u=!1}s=(u?g==='('?g:'-':g==='-'||g==='('?'':g)+s;b=b+(f==='s'?e9[8+es/3]:'')+(u&&g==='('?')':'');if(n){t=-1,x=a.length;while(++t<x){if(w=a.charCodeAt(t),48>w||w>57){b=(w===46?e+a.slice(t+1):a.slice(t))+b;a=a.slice(0,t);break}}}}if(l&&!m){a=c(a,Infinity)}var v=s.length+a.length+b.length,i=v<j?(new Array(j-v+1)).join(r):'';if(l&&m){a=c(i+a,i.length?j-b.length:Infinity),i=''}switch(q){case '<':a=s+a+b+i;break;case '=':a=s+i+a+b;break;case '^':a=i.slice(0,v=i.length>>1)+s+a+b+i.slice(v);break;default:a=i+s+a+b;break;}return d(a)}format.toString=function(){return a+''};return format}function formatPrefix(a,d){var e=newFormat((a=formatSpecifier(a),a.type='f',a)),b=Math.max(-8,Math.min(8,Math.floor(aX(d)/3)))*3,f=Math.pow(10,-b),c=e9[8+b/3];return function(a){return e(f*a)+c}}return {format:newFormat,formatPrefix:formatPrefix}};var cb;defaultLocale({decimal:'.',thousands:',',grouping:[3],currency:['$','']});function defaultLocale(b){cb=ex(b);a.format=cb.format;a.formatPrefix=cb.formatPrefix;return cb}var eq=function(a){return Math.max(0,-aX(Math.abs(a)))};var en=function(b,a){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(aX(a)/3)))*3-aX(Math.abs(b)))};var er=function(a,b){a=Math.abs(a),b=Math.abs(b)-a;return Math.max(0,aX(b)-aX(a))+1};var az=function(){return new Adder()};function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(a){add$1(cy,a,this.t);add$1(this,cy.s,this.s);if(this.s){this.t+=cy.t}else {this.s=cy.t}},valueOf:function(){return this.s}};var cy=new Adder();function add$1(b,a,d){var e=b.s=a+d,c=e-a,f=e-c;b.t=a-f+(d-c)}var d=1.0E-6;var eN=1.0E-12;var g=Math.PI;var p=g/2;var b5=g/4;var L=g*2;var k=180/g;var e=g/180;var h=Math.abs;var a7=Math.atan;var B=Math.atan2;var c=Math.cos;var cw=Math.ceil;var f7=Math.exp;var cC=Math.log;var d0=Math.pow;var b=Math.sin;var bK=Math.sign||function(a){return a>0?1:a<0?-1:0};var r=Math.sqrt;var d3=Math.tan;function acos(a){return a>1?0:a<-1?g:Math.acos(a)}function asin(a){return a>1?p:a<-1?-p:Math.asin(a)}function haversin(a){return (a=b(a/2))*a}function noop$1(){}function streamGeometry(a,b){if(a&&ef.hasOwnProperty(a.type)){ef[a.type](a,b)}}var ej={Feature:function(a,b){streamGeometry(a.geometry,b)},FeatureCollection:function(c,d){var a=c.features,b=-1,e=a.length;while(++b<e){streamGeometry(a[b].geometry,d)}}};var ef={Sphere:function(b,a){a.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,d){var b=a.coordinates,c=-1,e=b.length;while(++c<e){a=b[c],d.point(a[0],a[1],a[2])}},LineString:function(a,b){streamLine(a.coordinates,b,0)},MultiLineString:function(c,d){var a=c.coordinates,b=-1,e=a.length;while(++b<e){streamLine(a[b],d,0)}},Polygon:function(a,b){streamPolygon(a.coordinates,b)},MultiPolygon:function(c,d){var a=c.coordinates,b=-1,e=a.length;while(++b<e){streamPolygon(a[b],d)}},GeometryCollection:function(c,d){var a=c.geometries,b=-1,e=a.length;while(++b<e){streamGeometry(a[b],d)}}};function streamLine(c,b,e){var d=-1,f=c.length-e,a;b.lineStart();while(++d<f){a=c[d],b.point(a[0],a[1],a[2])}b.lineEnd()}function streamPolygon(b,a){var c=-1,d=b.length;a.polygonStart();while(++c<d){streamLine(b[c],a,1)}a.polygonEnd()}var X=function(a,b){if(a&&ej.hasOwnProperty(a.type)){ej[a.type](a,b)}else {streamGeometry(a,b)}};var bY=az();var ce=az();var e5;var fT;var dw;var dt;var dy;var _={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){bY.reset();_.lineStart=areaRingStart;_.lineEnd=areaRingEnd},polygonEnd:function(){var a=+bY;ce.add(a<0?L+a:a);this.lineStart=this.lineEnd=this.point=noop$1},sphere:function(){ce.add(L)}};function areaRingStart(){_.point=areaPointFirst}function areaRingEnd(){areaPoint(e5,fT)}function areaPointFirst(d,a){_.point=areaPoint;e5=d,fT=a;d*=e,a*=e;dw=d,dt=c(a=a/2+b5),dy=b(a)}function areaPoint(d,a){d*=e,a*=e;a=a/2+b5;var h=d-dw,g=h>=0?1:-1,f=g*h,i=c(a),j=b(a),k=dy*j,l=dt*i+k*c(f),m=k*g*b(f);bY.add(B(m,l));dw=d,dt=i,dy=j}var l=function(a){ce.reset();X(a,_);return ce*2};function spherical(a){return [B(a[1],a[0]),asin(a[2])]}function cartesian(a){var e=a[0],f=a[1],d=c(f);return [d*c(e),d*b(e),b(f)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return [a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function cartesianScale(a,b){return [a[0]*b,a[1]*b,a[2]*b]}function cartesianNormalizeInPlace(a){var b=r(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}var m;var P;var o;var T;var aK;var eQ;var fu;var bb;var bu=az();var ay;var ap;var ai={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){ai.point=boundsRingPoint;ai.lineStart=boundsRingStart;ai.lineEnd=boundsRingEnd;bu.reset();_.polygonStart()},polygonEnd:function(){_.polygonEnd();ai.point=boundsPoint;ai.lineStart=boundsLineStart;ai.lineEnd=boundsLineEnd;if(bY<0){m=-(o=180),P=-(T=90)}else {if(bu>d){T=90}else {if(bu<-d){P=-90}}}ap[0]=m,ap[1]=o}};function boundsPoint(b,a){ay.push(ap=[m=b,o=b]);if(a<P){P=a}if(a>T){T=a}}function linePoint(a,b){var n=cartesian([a*e,b*e]);if(bb){var j=cartesianCross(bb,n),p=[j[1],-j[0],0],c=cartesianCross(p,j);cartesianNormalizeInPlace(c);c=spherical(c);var l=a-aK,g=l>0?1:-1,d=c[0]*k*g,f,i=h(l)>180;if(i^(g*aK<d&&d<g*a)){f=c[1]*k;if(f>T){T=f}}else {if(d=(d+360)%360-180,i^(g*aK<d&&d<g*a)){f=-c[1]*k;if(f<P){P=f}}else {if(b<P){P=b}if(b>T){T=b}}}if(i){if(a<aK){if(angle(m,a)>angle(m,o)){o=a}}else {if(angle(a,o)>angle(m,o)){m=a}}}else {if(o>=m){if(a<m){m=a}if(a>o){o=a}}else {if(a>aK){if(angle(m,a)>angle(m,o)){o=a}}else {if(angle(a,o)>angle(m,o)){m=a}}}}}else {ay.push(ap=[m=a,o=a])}if(b<P){P=b}if(b>T){T=b}bb=n,aK=a}function boundsLineStart(){ai.point=linePoint}function boundsLineEnd(){ap[0]=m,ap[1]=o;ai.point=boundsPoint;bb=null}function boundsRingPoint(a,c){if(bb){var b=a-aK;bu.add(h(b)>180?b+(b>0?360:-360):b)}else {eQ=a,fu=c}_.point(a,c);linePoint(a,c)}function boundsRingStart(){_.lineStart()}function boundsRingEnd(){boundsRingPoint(eQ,fu);_.lineEnd();if(h(bu)>d){m=-(o=180)}ap[0]=m,ap[1]=o;bb=null}function angle(b,a){return (a-=b)<0?a+360:a}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(a,b){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}var jF=function(h){var c,e,a,b,d,f,g;T=o=-(m=P=Infinity);ay=[];X(h,ai);if(e=ay.length){ay.sort(rangeCompare);for(c=1,a=ay[0],d=[a];c<e;++c){b=ay[c];if(rangeContains(a,b[0])||rangeContains(a,b[1])){if(angle(a[0],b[1])>angle(a[0],a[1])){a[1]=b[1]}if(angle(b[0],a[1])>angle(a[0],a[1])){a[0]=b[0]}}else {d.push(a=b)}}for(f=-Infinity,e=d.length-1,c=0,a=d[e];c<=e;a=b,++c){b=d[c];if((g=angle(a[1],b[0]))>f){f=g,m=b[0],o=a[1]}}}ay=ap=null;return m===Infinity||P===Infinity?[[NaN,NaN],[NaN,NaN]]:[[m,P],[o,T]]};var bP;var cG;var cH;var cJ;var cL;var cI;var cK;var cM;var d4;var d5;var d6;var eR;var fv;var G;var H;var I;var W={sphere:noop$1,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){W.lineStart=centroidRingStart;W.lineEnd=centroidRingEnd},polygonEnd:function(){W.lineStart=centroidLineStart;W.lineEnd=centroidLineEnd}};function centroidPoint(a,d){a*=e,d*=e;var f=c(d);centroidPointCartesian(f*c(a),f*b(a),b(d))}function centroidPointCartesian(a,b,c){++bP;cH+=(a-cH)/bP;cJ+=(b-cJ)/bP;cL+=(c-cL)/bP}function centroidLineStart(){W.point=centroidLinePointFirst}function centroidLinePointFirst(a,d){a*=e,d*=e;var f=c(d);G=f*c(a);H=f*b(a);I=b(d);W.point=centroidLinePoint;centroidPointCartesian(G,H,I)}function centroidLinePoint(h,i){h*=e,i*=e;var j=c(i),d=j*c(h),f=j*b(h),g=b(i),a=B(r((a=H*g-I*f)*a+(a=I*d-G*g)*a+(a=G*f-H*d)*a),G*d+H*f+I*g);cG+=a;cI+=a*(G+(G=d));cK+=a*(H+(H=f));cM+=a*(I+(I=g));centroidPointCartesian(G,H,I)}function centroidLineEnd(){W.point=centroidPoint}function centroidRingStart(){W.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(eR,fv);W.point=centroidPoint}function centroidRingPointFirst(a,d){eR=a,fv=d;a*=e,d*=e;W.point=centroidRingPoint;var f=c(d);G=f*c(a);H=f*b(a);I=b(d);centroidPointCartesian(G,H,I)}function centroidRingPoint(d,f){d*=e,f*=e;var o=c(f),l=o*c(d),m=o*b(d),n=b(f),g=H*n-I*m,h=I*l-G*n,i=G*m-H*l,j=r(g*g+h*h+i*i),a=asin(j),k=j&&-a/j;d4+=k*g;d5+=k*h;d6+=k*i;cG+=a;cI+=a*(G+(G=l));cK+=a*(H+(H=m));cM+=a*(I+(I=n));centroidPointCartesian(G,H,I)}var b8=function(f){bP=cG=cH=cJ=cL=cI=cK=cM=d4=d5=d6=0;X(f,W);var a=d4,b=d5,c=d6,e=a*a+b*b+c*c;if(e<eN){a=cI,b=cK,c=cM;if(cG<d){a=cH,b=cJ,c=cL}e=a*a+b*b+c*c;if(e<eN){return [NaN,NaN]}}return [B(b,a)*k,asin(c/r(e))*k]};var aU=function(a){return function(){return a}};var bB=function(a,b){function bB(c,d){return c=a(c,d),b(c[0],c[1])}if(a.invert&&b.invert){bB.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}}return bB};function rotationIdentity(a,b){return [a>g?a-L:a<-g?a+L:a,b]}rotationIdentity.invert=rotationIdentity;function rotateRadians(c,b,a){return (c%=L)?b||a?bB(rotationLambda(c),rotationPhiGamma(b,a)):rotationLambda(c):b||a?rotationPhiGamma(b,a):rotationIdentity}function forwardRotationLambda(a){return function(b,c){return b+=a,[b>g?b-L:b<-g?b+L:b,c]}}function rotationLambda(a){var b=forwardRotationLambda(a);b.invert=forwardRotationLambda(-a);return b}function rotationPhiGamma(h,g){var e=c(h),f=b(h),a=c(g),d=b(g);function bw(h,i){var g=c(i),k=c(h)*g,l=b(h)*g,m=b(i),j=m*e+k*f;return [B(l*a-j*d,k*e-m*f),asin(j*a+l*d)]}bw.invert=function(h,i){var g=c(i),k=c(h)*g,l=b(h)*g,m=b(i),j=m*a-l*d;return [B(l*a+m*d,k*e+j*f),asin(j*e-k*f)]};return bw}var bw=function(a){a=rotateRadians(a[0]*e,a[1]*e,a.length>2?a[2]*e:0);function forward(b){b=a(b[0]*e,b[1]*e);return b[0]*=k,b[1]*=k,b}forward.invert=function(b){b=a.invert(b[0]*e,b[1]*e);return b[0]*=k,b[1]*=k,b};return forward};function circleStream(m,g,k,e,a,d){if(!k){return}var h=c(g),j=b(g),l=e*k;if(a==null){a=g+e*L;d=g-l/2}else {a=circleRadius(h,a);d=circleRadius(h,d);if(e>0?a<d:a>d){a+=e*L}}for(var i,f=a;e>0?f>d:f<d;f-=l){i=spherical([h,-j*c(f),-j*b(f)]);m.point(i[0],i[1])}}function circleRadius(c,a){a=cartesian(a),a[0]-=c;cartesianNormalizeInPlace(a);var b=acos(-a[1]);return ((-a[2]<0?-b:b)+L-d)%L}var an=function(){var c=aU([0,0]),d=aU(90),b=aU(6),a,f,g={point:C};function C(b,c){a.push(b=f(b,c));b[0]*=k,b[1]*=k}function an(){var h=c.apply(this,arguments),j=d.apply(this,arguments)*e,i=b.apply(this,arguments)*e;a=[];f=rotateRadians(-h[0]*e,-h[1]*e,0).invert;circleStream(g,j,i,1);h={type:'Polygon',coordinates:[a]};a=f=null;return h}an.center=function(a){return arguments.length?(c=typeof a==='function'?a:aU([+a[0],+a[1]]),an):c};an.radius=function(a){return arguments.length?(d=typeof a==='function'?a:aU(+a),an):d};an.precision=function(a){return arguments.length?(b=typeof a==='function'?a:aU(+a),an):b};return an};var eL=function(){var a=[],b;return {point:function(a,c){b.push([a,c])},lineStart:function(){a.push(b=[])},lineEnd:noop$1,rejoin:function(){if(a.length>1){a.push(a.pop().concat(a.shift()))}},result:function(){var c=a;a=[];b=null;return c}}};var dn=function(h,i,l,n,m,o){var f=h[0],g=h[1],j=i[0],k=i[1],b=0,c=1,d=j-f,e=k-g,a;a=l-f;if(!d&&a>0){return}a/=d;if(d<0){if(a<b){return}if(a<c){c=a}}else {if(d>0){if(a>c){return}if(a>b){b=a}}}a=m-f;if(!d&&a<0){return}a/=d;if(d<0){if(a>c){return}if(a>b){b=a}}else {if(d>0){if(a<b){return}if(a<c){c=a}}}a=n-g;if(!e&&a>0){return}a/=e;if(e<0){if(a<b){return}if(a<c){c=a}}else {if(e>0){if(a>c){return}if(a>b){b=a}}}a=o-g;if(!e&&a<0){return}a/=e;if(e<0){if(a>c){return}if(a>b){b=a}}else {if(e>0){if(a<b){return}if(a<c){c=a}}}if(b>0){h[0]=f+b*d,h[1]=g+b*e}if(c<1){i[0]=f+c*d,i[1]=g+c*e}return !0};var b0=function(a,b){return h(a[0]-b[0])<d&&h(a[1]-b[1])<d};function Intersection(d,a,c,b){this.x=d;this.z=a;this.o=c;this.e=b;this.v=!1;this.n=this.p=null}var eD=function(n,m,k,j,c){var f=[],e=[],b,i;n.forEach(function(a){if((i=a.length-1)<=0){return}var i,g=a[0],h=a[i],d;if(b0(g,h)){c.lineStart();for(b=0;b<i;++b){c.point((g=a[b])[0],g[1])}c.lineEnd();return}f.push(d=new Intersection(g,a,null,!0));e.push(d.o=new Intersection(g,null,d,!1));f.push(d=new Intersection(h,a,null,!1));e.push(d.o=new Intersection(h,null,d,!0))});if(!f.length){return}e.sort(m);link$1(f);link$1(e);for(b=0,i=e.length;b<i;++b){e[b].e=k=!k}var l=f[0],d,h;while(1){var a=l,g=!0;while(a.v){if((a=a.n)===l){return}}d=a.z;c.lineStart();do{a.v=a.o.v=!0;if(a.e){if(g){for(b=0,i=d.length;b<i;++b){c.point((h=d[b])[0],h[1])}}else {j(a.x,a.n.x,1,c)}a=a.n}else {if(g){d=a.p.z;for(b=d.length-1;b>=0;--b){c.point((h=d[b])[0],h[1])}}else {j(a.x,a.p.x,-1,c)}a=a.p}a=a.o;d=a.z;g=!g}while(!a.v);c.lineEnd()}};function link$1(c){if(!(e=c.length)){return}var e,d=0,a=c[0],b;while(++d<e){a.n=b=c[d];b.p=a;a=b}a.n=b=c[0];b.p=a}var bA=1000000000;var cg=-bA;function clipExtent(b,e,c,a){function visible(d,f){return b<=d&&d<=c&&e<=f&&f<=a}function interpolate(h,g,f,i){var d=0,j=0;if(h==null||(d=corner(h,f))!==(j=corner(g,f))||comparePoint(h,g)<0^f>0){do{i.point(d===0||d===3?b:c,d>1?a:e)}while((d=(d+f+4)%4)!==j)}else {i.point(g[0],g[1])}}function corner(f,a){return h(f[0]-b)<d?a>0?0:3:h(f[0]-c)<d?a>0?2:1:h(f[1]-e)<d?a>0?1:0:a>0?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(b,c){var a=corner(b,1),d=corner(c,1);return a!==d?a-d:a===0?c[1]-b[1]:a===1?b[0]-c[0]:a===2?b[1]-c[1]:c[0]-b[0]}return function(f){var d=f,m=eL(),g,h,p,r,s,q,k,l,i,o,j;var n={point:C,lineStart:lineStart,lineEnd:lineEnd,polygonStart:polygonStart,polygonEnd:polygonEnd};function C(a,b){if(visible(a,b)){d.point(a,b)}}function polygonInside(){var i=0;for(var k=0,n=h.length;k<n;++k){for(var j=h[k],l=1,m=j.length,e=j[0],f,c,g=e[0],d=e[1];l<m;++l){f=g,c=d,e=j[l],g=e[0],d=e[1];if(c<=a){if(d>a&&(g-f)*(a-c)>(d-c)*(b-f)){++i}}else {if(d<=a&&(g-f)*(a-c)<(d-c)*(b-f)){--i}}}}return i}function polygonStart(){d=m,g=[],h=[],j=!0}function polygonEnd(){var b=polygonInside(),a=j&&b,c=(g=dI(g)).length;if(a||c){f.polygonStart();if(a){f.lineStart();interpolate(null,null,1,f);f.lineEnd()}if(c){eD(g,compareIntersection,b,interpolate,f)}f.polygonEnd()}d=f,g=h=p=null}function lineStart(){n.point=linePoint;if(h){h.push(p=[])}o=!0;i=!1;k=l=NaN}function lineEnd(){if(g){linePoint(r,s);if(q&&i){m.rejoin()}g.push(m.result())}n.point=C;if(i){d.lineEnd()}}function linePoint(f,g){var m=visible(f,g);if(h){p.push([f,g])}if(o){r=f,s=g,q=m;o=!1;if(m){d.lineStart();d.point(f,g)}}else {if(m&&i){d.point(f,g)}else {var n=[k=Math.max(cg,Math.min(bA,k)),l=Math.max(cg,Math.min(bA,l))],t=[f=Math.max(cg,Math.min(bA,f)),g=Math.max(cg,Math.min(bA,g))];if(dn(n,t,b,e,c,a)){if(!i){d.lineStart();d.point(n[0],n[1])}d.point(t[0],t[1]);if(!m){d.lineEnd()}j=!1}else {if(m){d.lineStart();d.point(f,g);j=!1}}}}k=f,l=g,i=m}return n}}var iV=function(){var c=0,e=0,d=960,f=500,a,b,g;return g={stream:function(g){return a&&b===g?a:a=clipExtent(c,e,d,f)(b=g)},extent:function(h){return arguments.length?(c=+h[0][0],e=+h[0][1],d=+h[1][0],f=+h[1][1],a=b=null,g):[[c,e],[d,f]]}}};var dM=az();var em=function(w,C){var f=C[0],F=C[1],H=[b(f),-c(f),0],o=0,z=0;dM.reset();for(var q=0,I=w.length;q<I;++q){if(!(s=(p=w[q]).length)){continue}var p,s,h=p[s-1],l=h[0],D=h[1]/2+b5,x=b(D),u=c(D);for(var r=0;r<s;++r,l=m,x=y,u=v,h=i){var i=p[r],m=i[0],E=i[1]/2+b5,y=b(E),v=c(E),a=m-l,n=a>=0?1:-1,k=n*a,e=k>g,G=x*y;dM.add(B(G*n*b(k),u*v+G*c(k)));o+=e?a+n*L:a;if(e^l>=f^m>=f){var j=cartesianCross(cartesian(h),cartesian(i));cartesianNormalizeInPlace(j);var t=cartesianCross(H,j);cartesianNormalizeInPlace(t);var A=(e^a>=0?-1:1)*asin(t[2]);if(F>A||F===A&&(j[0]||j[1])){z+=e^a>=0?1:-1}}}}return (o<-d||o<d&&dM<-d)^z&1};var df=az();var de;var b6;var b3;var aR={sphere:noop$1,point:noop$1,lineStart:lengthLineStart,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1};function lengthLineStart(){aR.point=lengthPointFirst;aR.lineEnd=lengthLineEnd}function lengthLineEnd(){aR.point=aR.lineEnd=noop$1}function lengthPointFirst(d,a){d*=e,a*=e;de=d,b6=b(a),b3=c(a);aR.point=lengthPoint}function lengthPoint(d,g){d*=e,g*=e;var f=b(g),a=c(g),j=h(d-de),i=c(j),m=b(j),k=a*m,l=b3*f-b6*a*i,n=b6*f+b3*a*i;df.add(B(r(k*k+l*l),n));de=d,b6=f,b3=a}var e6=function(a){df.reset();X(a,aR);return +df};var cY=[null,null];var i0={type:'LineString',coordinates:cY};var bv=function(a,b){cY[0]=a;cY[1]=b;return e6(i0)};var ee={Feature:function(a,b){return containsGeometry(a.geometry,b)},FeatureCollection:function(c,d){var a=c.features,b=-1,e=a.length;while(++b<e){if(containsGeometry(a[b].geometry,d)){return !0}}return !1}};var ed={Sphere:function(){return !0},Point:function(a,b){return containsPoint(a.coordinates,b)},MultiPoint:function(c,d){var a=c.coordinates,b=-1,e=a.length;while(++b<e){if(containsPoint(a[b],d)){return !0}}return !1},LineString:function(a,b){return containsLine(a.coordinates,b)},MultiLineString:function(c,d){var a=c.coordinates,b=-1,e=a.length;while(++b<e){if(containsLine(a[b],d)){return !0}}return !1},Polygon:function(a,b){return containsPolygon(a.coordinates,b)},MultiPolygon:function(c,d){var a=c.coordinates,b=-1,e=a.length;while(++b<e){if(containsPolygon(a[b],d)){return !0}}return !1},GeometryCollection:function(c,d){var a=c.geometries,b=-1,e=a.length;while(++b<e){if(containsGeometry(a[b],d)){return !0}}return !1}};function containsGeometry(a,b){return a&&ed.hasOwnProperty(a.type)?ed[a.type](a,b):!1}function containsPoint(a,b){return bv(a,b)===0}function containsLine(a,b){var c=bv(a[0],a[1]),e=bv(a[0],b),f=bv(b,a[1]);return e+f<=c+d}function containsPolygon(a,b){return !!em(a.map(ringRadians),pointRadians(b))}function ringRadians(a){return a=a.map(pointRadians),a.pop(),a}function pointRadians(a){return [a[0]*e,a[1]*e]}var iT=function(a,b){return (a&&ee.hasOwnProperty(a.type)?ee[a.type]:containsGeometry)(a,b)};function graticuleX(c,a,b){var e=Y(c,a-d,b).concat(a);return function(a){return e.map(function(b){return [a,b]})}}function graticuleY(c,a,b){var e=Y(c,a-d,b).concat(a);return function(a){return e.map(function(b){return [b,a]})}}function graticule(){var g,f,b,a,j,i,e,c,n=10,o=n,l=90,m=360,r,s,p,q,k=2.5;function graticule(){return {type:'MultiLineString',coordinates:lines()}}function lines(){return Y(cw(a/l)*l,b,l).map(p).concat(Y(cw(c/m)*m,e,m).map(q)).concat(Y(cw(f/n)*n,g,n).filter(function(a){return h(a%l)>d}).map(r)).concat(Y(cw(i/o)*o,j,o).filter(function(a){return h(a%m)>d}).map(s))}graticule.lines=function(){return lines().map(function(a){return {type:'LineString',coordinates:a}})};graticule.outline=function(){return {type:'Polygon',coordinates:[p(a).concat(q(e).slice(1),p(b).reverse().slice(1),q(c).reverse().slice(1))]}};graticule.extent=function(a){if(!arguments.length){return graticule.extentMinor()}return graticule.extentMajor(a).extentMinor(a)};graticule.extentMajor=function(d){if(!arguments.length){return [[a,c],[b,e]]}a=+d[0][0],b=+d[1][0];c=+d[0][1],e=+d[1][1];if(a>b){d=a,a=b,b=d}if(c>e){d=c,c=e,e=d}return graticule.precision(k)};graticule.extentMinor=function(a){if(!arguments.length){return [[f,i],[g,j]]}f=+a[0][0],g=+a[1][0];i=+a[0][1],j=+a[1][1];if(f>g){a=f,f=g,g=a}if(i>j){a=i,i=j,j=a}return graticule.precision(k)};graticule.step=function(a){if(!arguments.length){return graticule.stepMinor()}return graticule.stepMajor(a).stepMinor(a)};graticule.stepMajor=function(a){if(!arguments.length){return [l,m]}l=+a[0],m=+a[1];return graticule};graticule.stepMinor=function(a){if(!arguments.length){return [n,o]}n=+a[0],o=+a[1];return graticule};graticule.precision=function(d){if(!arguments.length){return k}k=+d;r=graticuleX(i,j,90);s=graticuleY(f,g,k);p=graticuleX(c,e,90);q=graticuleY(a,b,k);return graticule};return graticule.extentMajor([[-180,-90+d],[180,90-d]]).extentMinor([[-180,-80-d],[180,80+d]])}function graticule10(){return graticule()()}var hv=function(m,n){var d=m[0]*e,f=m[1]*e,i=n[0]*e,j=n[1]*e,g=c(f),u=b(f),h=c(j),v=b(j),p=g*c(d),s=g*b(d),q=h*c(i),t=h*b(i),a=2*asin(r(haversin(j-f)+g*h*haversin(i-d))),o=b(a);var l=a?function(g){var d=b(g*=a)/o,c=b(a-g)/o,e=c*p+d*q,f=c*s+d*t,h=c*u+d*v;return [B(f,e)*k,B(h,r(e*e+f*f))*k]}:function(){return [d*k,f*k]};l.distance=a;return l};var aF=function(a){return a};var dc=az();var cV=az();var gc;var gd;var dZ;var d$;var ah={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){ah.lineStart=areaRingStart$1;ah.lineEnd=areaRingEnd$1},polygonEnd:function(){ah.lineStart=ah.lineEnd=ah.point=noop$1;dc.add(h(cV));cV.reset()},result:function(){var a=dc/2;dc.reset();return a}};function areaRingStart$1(){ah.point=areaPointFirst$1}function areaPointFirst$1(a,b){ah.point=areaPoint$1;gc=dZ=a,gd=d$=b}function areaPoint$1(a,b){cV.add(d$*a-dZ*b);dZ=a,d$=b}function areaRingEnd$1(){areaPoint$1(gc,gd)}var a8=Infinity;var cz=a8;var bQ=-a8;var cO=bQ;var bT={point:boundsPoint$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var a=[[a8,cz],[bQ,cO]];bQ=cO=-(cz=a8=Infinity);return a}};function boundsPoint$1(a,b){if(a<a8){a8=a}if(a>bQ){bQ=a}if(b<cz){cz=b}if(b>cO){cO=b}}var dP=0;var dR=0;var bH=0;var cu=0;var cv=0;var a6=0;var dQ=0;var dS=0;var bI=0;var fW;var fY;var ad;var ae;var Q={point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){Q.lineStart=centroidRingStart$1;Q.lineEnd=centroidRingEnd$1},polygonEnd:function(){Q.point=centroidPoint$1;Q.lineStart=centroidLineStart$1;Q.lineEnd=centroidLineEnd$1},result:function(){var a=bI?[dQ/bI,dS/bI]:a6?[cu/a6,cv/a6]:bH?[dP/bH,dR/bH]:[NaN,NaN];dP=dR=bH=cu=cv=a6=dQ=dS=bI=0;return a}};function centroidPoint$1(a,b){dP+=a;dR+=b;++bH}function centroidLineStart$1(){Q.point=centroidPointFirstLine}function centroidPointFirstLine(a,b){Q.point=centroidPointLine;centroidPoint$1(ad=a,ae=b)}function centroidPointLine(a,b){var d=a-ad,e=b-ae,c=r(d*d+e*e);cu+=c*(ad+a)/2;cv+=c*(ae+b)/2;a6+=c;centroidPoint$1(ad=a,ae=b)}function centroidLineEnd$1(){Q.point=centroidPoint$1}function centroidRingStart$1(){Q.point=centroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(fW,fY)}function centroidPointFirstRing(a,b){Q.point=centroidPointRing;centroidPoint$1(fW=ad=a,fY=ae=b)}function centroidPointRing(b,c){var d=b-ad,e=c-ae,a=r(d*d+e*e);cu+=a*(ad+b)/2;cv+=a*(ae+c)/2;a6+=a;a=ae*b-ad*c;dQ+=a*(ad+b);dS+=a*(ae+c);bI+=a*3;centroidPoint$1(ad=b,ae=c)}function PathContext(a){this._context=a}PathContext.prototype={_radius:4.5,pointRadius:function(a){return this._radius=a,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0){this._context.closePath()}this._point=NaN},point:function(a,b){switch(this._point){case 0:this._context.moveTo(a,b);this._point=1;break;case 1:this._context.lineTo(a,b);break;default:this._context.moveTo(a+this._radius,b);this._context.arc(a,b,this._radius,0,L);break;}},result:noop$1};var c$=az();var c7;var fX;var fZ;var bL;var bM;var bh={point:noop$1,lineStart:function(){bh.point=lengthPointFirst$1},lineEnd:function(){if(c7){lengthPoint$1(fX,fZ)}bh.point=noop$1},polygonStart:function(){c7=!0},polygonEnd:function(){c7=null},result:function(){var a=+c$;c$.reset();return a}};function lengthPointFirst$1(a,b){bh.point=lengthPoint$1;fX=bL=a,fZ=bM=b}function lengthPoint$1(a,b){bL-=a,bM-=b;c$.add(r(bL*bL+bM*bM));bL=a,bM=b}function PathString(){this._string=[]}PathString.prototype={_circle:circle$1(4.5),pointRadius:function(a){return this._circle=circle$1(a),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0){this._string.push('Z')}this._point=NaN},point:function(a,b){switch(this._point){case 0:this._string.push('M',a,',',b);this._point=1;break;case 1:this._string.push('L',a,',',b);break;default:this._string.push('M',a,',',b,this._circle);break;}},result:function(){if(this._string.length){var a=this._string.join('');this._string=[];return a}}};function circle$1(a){return 'm0,'+a+'a'+a+','+a+' 0 1,1 0,'+-2*a+'a'+a+','+a+' 0 1,1 0,'+2*a+'z'}var jg=function(d,e){var c=4.5,a,b;function path(d){if(d){if(typeof c==='function'){b.pointRadius(+c.apply(this,arguments))}X(d,a(b))}return b.result()}path.area=function(b){X(b,a(ah));return ah.result()};path.measure=function(b){X(b,a(bh));return bh.result()};path.bounds=function(b){X(b,a(bT));return bT.result()};path.centroid=function(b){X(b,a(Q));return Q.result()};path.projection=function(b){return arguments.length?(a=b==null?(d=null,aF):(d=b).stream,path):d};path.context=function(a){if(!arguments.length){return e}b=a==null?(e=null,new PathString()):new PathContext(e=a);if(typeof c!=='function'){b.pointRadius(c)}return path};path.pointRadius=function(a){if(!arguments.length){return c}c=typeof a==='function'?a:(b.pointRadius(+a),+a);return path};return path.projection(d).context(e)};var f$=function(d,b,a,c){return function(l,e){var m=b(e),o=l.invert(c[0],c[1]),n=eL(),j=b(n),g=!1,k,h,i;var f={point:C,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){f.point=pointRing;f.lineStart=ringStart;f.lineEnd=ringEnd;h=[];k=[]},polygonEnd:function(){f.point=C;f.lineStart=lineStart;f.lineEnd=lineEnd;h=dI(h);var b=em(k,o);if(h.length){if(!g){e.polygonStart(),g=!0}eD(h,compareIntersection,b,a,e)}else {if(b){if(!g){e.polygonStart(),g=!0}e.lineStart();a(null,null,1,e);e.lineEnd()}}if(g){e.polygonEnd(),g=!1}h=k=null},sphere:function(){e.polygonStart();e.lineStart();a(null,null,1,e);e.lineEnd();e.polygonEnd()}};function C(a,b){var c=l(a,b);if(d(a=c[0],b=c[1])){e.point(a,b)}}function pointLine(b,c){var a=l(b,c);m.point(a[0],a[1])}function lineStart(){f.point=pointLine;m.lineStart()}function lineEnd(){f.point=C;m.lineEnd()}function pointRing(a,c){i.push([a,c]);var b=l(a,c);j.point(b[0],b[1])}function ringStart(){j.lineStart();i=[]}function ringEnd(){pointRing(i[0][0],i[0][1]);j.lineEnd();var d=j.clean(),a=n.result(),b,m=a.length,l,c,f;i.pop();k.push(i);i=null;if(!m){return}if(d&1){c=a[0];if((l=c.length-1)>0){if(!g){e.polygonStart(),g=!0}e.lineStart();for(b=0;b<l;++b){e.point((f=c[b])[0],f[1])}e.lineEnd()}return}if(m>1&&d&2){a.push(a.pop().concat(a.shift()))}h.push(a.filter(validSegment))}return f}};function validSegment(a){return a.length>1}function compareIntersection(a,b){return ((a=a.x)[0]<0?a[1]-p-d:p-a[1])-((b=b.x)[0]<0?b[1]-p-d:p-b[1])}var eh=f$(function(){return !0},clipAntimeridianLine,clipAntimeridianInterpolate,[-g,-p]);function clipAntimeridianLine(a){var c=NaN,b=NaN,e=NaN,f;return {lineStart:function(){a.lineStart();f=1},point:function(i,k){var j=i>0?g:-g,l=h(i-c);if(h(l-g)<d){a.point(c,b=(b+k)/2>0?p:-p);a.point(e,b);a.lineEnd();a.lineStart();a.point(j,b);a.point(i,b);f=0}else {if(e!==j&&l>=g){if(h(c-e)<d){c-=e*d}if(h(i-j)<d){i-=j*d}b=clipAntimeridianIntersect(c,b,i,k);a.point(e,b);a.lineEnd();a.lineStart();a.point(j,b);f=0}}a.point(c=i,b=k);e=j},lineEnd:function(){a.lineEnd();c=b=NaN},clean:function(){return 2-f}}}function clipAntimeridianIntersect(j,a,k,e){var g,i,f=b(j-k);return h(f)>d?a7((b(a)*(i=c(e))*b(k)-b(e)*(g=c(a))*b(j))/(g*i*f)):(a+e)/2}function clipAntimeridianInterpolate(f,c,i,a){var b;if(f==null){b=i*p;a.point(-g,b);a.point(0,b);a.point(g,b);a.point(g,0);a.point(g,-b);a.point(0,-b);a.point(-g,-b);a.point(-g,0);a.point(-g,b)}else {if(h(f[0]-c[0])>d){var e=f[0]<c[0]?g:-g;b=i*e/2;a.point(-e,b);a.point(0,b);a.point(e,b)}else {a.point(c[0],c[1])}}}var h7=function(a,i){var e=c(a),b=e>0,f=h(e)>d;function interpolate(d,e,b,c){circleStream(c,a,i,b,d,e)}function visible(a,b){return c(a)*c(b)>e}function dn(a){var c,j,e,i,h;return {lineStart:function(){i=e=!1;h=1},point:function(o,p){var k=[o,p],l,m=visible(o,p),q=b?m?0:code(o,p):m?code(o+(o<0?g:-g),p):0;if(!c&&(i=e=m)){a.lineStart()}if(m!==e){l=intersect(c,k);if(b0(c,l)||b0(k,l)){k[0]+=d;k[1]+=d;m=visible(k[0],k[1])}}if(m!==e){h=0;if(m){a.lineStart();l=intersect(k,c);a.point(l[0],l[1])}else {l=intersect(c,k);a.point(l[0],l[1]);a.lineEnd()}c=l}else {if(f&&c&&b^m){var n;if(!(q&j)&&(n=intersect(k,c,!0))){h=0;if(b){a.lineStart();a.point(n[0][0],n[0][1]);a.point(n[1][0],n[1][1]);a.lineEnd()}else {a.point(n[1][0],n[1][1]);a.lineEnd();a.lineStart();a.point(n[0][0],n[0][1])}}}}if(m&&(!c||!b0(c,k))){a.point(k[0],k[1])}c=k,e=m,j=q},lineEnd:function(){if(e){a.lineEnd()}c=null},clean:function(){return h|(i&&e)<<1}}}function intersect(m,v,x){var G=cartesian(m),H=cartesian(v);var y=[1,0,0],k=cartesianCross(G,H),w=cartesianDot(k,k),t=k[0],p=w-t*t;if(!p){return !x&&m}var E=e*w/p,F=-e*t/p,D=cartesianCross(y,k),i=cartesianScale(y,E),I=cartesianScale(k,F);cartesianAddInPlace(i,I);var l=D,n=cartesianDot(i,l),u=cartesianDot(l,l),A=n*n-u*(cartesianDot(i,i)-1);if(A<0){return}var B=r(A),a=cartesianScale(l,(-n-B)/u);cartesianAddInPlace(a,i);a=spherical(a);if(!x){return a}var b=m[0],j=v[0],c=m[1],f=v[1],o;if(j<b){o=b,b=j,j=o}var q=j-b,s=h(q-g)<d,C=s||q<d;if(!s&&f<c){o=c,c=f,f=o}if(C?s?c+f>0^a[1]<(h(a[0]-b)<d?c:f):c<=a[1]&&a[1]<=f:q>g^(b<=a[0]&&a[0]<=j)){var z=cartesianScale(l,(-n+B)/u);cartesianAddInPlace(z,i);return [a,spherical(z)]}}function code(e,f){var d=b?a:g-a,c=0;if(e<-d){c|=1}else {if(e>d){c|=2}}if(f<-d){c|=4}else {if(f>d){c|=8}}return c}return f$(visible,dn,interpolate,b?[0,-a]:[-g,a-g])};var iL=function(a){return {stream:transformer(a)}};function transformer(a){return function(d){var b=new TransformStream();for(var c in a){b[c]=a[c]}b.stream=d;return b}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fitExtent(b,c,h){var g=c[1][0]-c[0][0],f=c[1][1]-c[0][1],d=b.clipExtent&&b.clipExtent();b.scale(150).translate([0,0]);if(d!=null){b.clipExtent(null)}X(h,b.stream(bT));var a=bT.result(),e=Math.min(g/(a[1][0]-a[0][0]),f/(a[1][1]-a[0][1])),i=+c[0][0]+(g-e*(a[1][0]+a[0][0]))/2,j=+c[0][1]+(f-e*(a[1][1]+a[0][1]))/2;if(d!=null){b.clipExtent(d)}return b.scale(e*150).translate([i,j])}function fitSize(a,c,b){return fitExtent(a,[[0,0],c],b)}var e7=16;var hb=c(30*e);var fa=function(a,b){return +b?resample$1(a,b):resampleNone(a)};function resampleNone(a){return transformer({point:function(b,c){b=a(b,c);this.stream.point(b[0],b[1])}})}function resample$1(a,b){function resampleLineTo(y,z,l,q,t,v,F,G,m,s,u,w,p,o){var g=F-y,i=G-z,x=g*g+i*i;if(x>4*b&&p--){var e=q+s,f=t+u,c=v+w,A=r(e*e+f*f+c*c),I=asin(c/=A),n=h(h(c)-1)<d||h(l-m)<d?(l+m)/2:B(f,e),H=a(n,I),j=H[0],k=H[1],C=j-y,D=k-z,E=i*C-g*D;if(E*E/x>b||h((g*C+i*D)/x-0.5)>0.3||q*s+t*u+v*w<hb){resampleLineTo(y,z,l,q,t,v,j,k,n,e/=A,f/=A,c,p,o);o.point(j,k);resampleLineTo(j,k,n,e,f,c,F,G,m,s,u,w,p,o)}}}return function(c){var j,n,o,k,l,m,i,d,e,f,g,h;var b={point:C,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){c.polygonStart();b.lineStart=ringStart},polygonEnd:function(){c.polygonEnd();b.lineStart=lineStart}};function C(b,d){b=a(b,d);c.point(b[0],b[1])}function lineStart(){d=NaN;b.point=linePoint;c.lineStart()}function linePoint(b,k){var j=cartesian([b,k]),l=a(b,k);resampleLineTo(d,e,i,f,g,h,d=l[0],e=l[1],i=b,f=j[0],g=j[1],h=j[2],e7,c);c.point(d,e)}function lineEnd(){b.point=C;c.lineEnd()}function ringStart(){lineStart();b.point=ringPoint;b.lineEnd=ringEnd}function ringPoint(a,c){linePoint(j=a,c),n=d,o=e,k=f,l=g,m=h;b.point=linePoint}function ringEnd(){resampleLineTo(d,e,i,f,g,h,n,o,j,k,l,m,e7,c);b.lineEnd=lineEnd;lineEnd()}return b}}var gQ=transformer({point:function(a,b){this.stream.point(a*e,b*e)}});function projection(a){return projectionMutator(function(){return a})()}function projectionMutator(B){var b,a=150,v=480,w=250,d,f,o=0,q=0,j=0,m=0,l=0,A,h,p=null,z=eh,g=null,t,s,u,y=aF,n=0.5,x=fa(projectTransform,n),c,i;function projection(b){b=h(b[0]*e,b[1]*e);return [b[0]*a+d,f-b[1]*a]}function invert(b){b=h.invert((b[0]-d)/a,(f-b[1])/a);return b&&[b[0]*k,b[1]*k]}function projectTransform(c,e){return c=b(c,e),[c[0]*a+d,f-c[1]*a]}projection.stream=function(a){return c&&i===a?c:c=gQ(z(A,x(y(i=a))))};projection.clipAngle=function(a){return arguments.length?(z=+a?h7(p=a*e,6*e):(p=null,eh),reset()):p*k};projection.clipExtent=function(a){return arguments.length?(y=a==null?(g=t=s=u=null,aF):clipExtent(g=+a[0][0],t=+a[0][1],s=+a[1][0],u=+a[1][1]),reset()):g==null?null:[[g,t],[s,u]]};projection.scale=function(b){return arguments.length?(a=+b,recenter()):a};projection.translate=function(a){return arguments.length?(v=+a[0],w=+a[1],recenter()):[v,w]};projection.center=function(a){return arguments.length?(o=a[0]%360*e,q=a[1]%360*e,recenter()):[o*k,q*k]};projection.rotate=function(a){return arguments.length?(j=a[0]%360*e,m=a[1]%360*e,l=a.length>2?a[2]%360*e:0,recenter()):[j*k,m*k,l*k]};projection.precision=function(a){return arguments.length?(x=fa(projectTransform,n=a*a),reset()):r(n)};projection.fitExtent=function(a,b){return fitExtent(projection,a,b)};projection.fitSize=function(b,a){return fitSize(projection,b,a)};function recenter(){h=bB(A=rotateRadians(j,m,l),b);var c=b(o,q);d=v-c[0]*a;f=w+c[1]*a;return reset()}function reset(){c=i=null;return projection}return function(){b=B.apply(this,arguments);projection.invert=b.invert&&invert;return recenter()}}function conicProjection(f){var a=0,b=g/3,c=projectionMutator(f),d=c(a,b);d.parallels=function(d){return arguments.length?c(a=d[0]*e,b=d[1]*e):[a*k,b*k]};return d}function cylindricalEqualAreaRaw(d){var a=c(d);function forward(c,d){return [c*a,b(d)/a]}forward.invert=function(b,c){return [b/a,asin(c*a)]};return forward}function conicEqualAreaRaw(i,j){var e=b(i),a=(e+b(j))/2;if(h(a)<d){return cylindricalEqualAreaRaw(i)}var f=1+e*(2*a-e),g=r(f)/a;function project(e,h){var d=r(f-2*a*b(h))/a;return [d*b(e*=a),g-d*c(e)]}project.invert=function(c,d){var b=g-d;return [B(c,h(b))/a*bK(b),asin((f-(c*c+b*b)*a*a)/(2*a))]};return project}var bU=function(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])};var fC=function(){return bU().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-0.6,38.7])};function multiplex(a){var b=a.length;return {point:function(d,e){var c=-1;while(++c<b){a[c].point(d,e)}},sphere:function(){var c=-1;while(++c<b){a[c].sphere()}},lineStart:function(){var c=-1;while(++c<b){a[c].lineStart()}},lineEnd:function(){var c=-1;while(++c<b){a[c].lineEnd()}},polygonStart:function(){var c=-1;while(++c<b){a[c].polygonStart()}},polygonEnd:function(){var c=-1;while(++c<b){a[c].polygonEnd()}}}}var J=function(){var f,g,a=fC(),i,b=bU().rotate([154,0]).center([-2,58.5]).parallels([55,65]),j,c=bU().rotate([157,0]).center([-3,19.9]).parallels([8,18]),k,e,h={point:function(a,b){e=[a,b]}};function J(c){var a=c[0],b=c[1];return e=null,(i.point(a,b),e)||(j.point(a,b),e)||(k.point(a,b),e)}J.invert=function(f){var g=a.scale(),h=a.translate(),d=(f[0]-h[0])/g,e=(f[1]-h[1])/g;return (e>=0.12&&e<0.234&&d>=-0.425&&d<-0.214?b:e>=0.166&&e<0.234&&d>=-0.214&&d<-0.115?c:a).invert(f)};J.stream=function(d){return f&&g===d?f:f=multiplex([a.stream(g=d),b.stream(d),c.stream(d)])};J.precision=function(d){if(!arguments.length){return a.precision()}a.precision(d),b.precision(d),c.precision(d);return reset()};J.scale=function(d){if(!arguments.length){return a.scale()}a.scale(d),b.scale(d*0.35),c.scale(d);return J.translate(a.translate())};J.translate=function(l){if(!arguments.length){return a.translate()}var e=a.scale(),f=+l[0],g=+l[1];i=a.translate(l).clipExtent([[f-0.455*e,g-0.238*e],[f+0.455*e,g+0.238*e]]).stream(h);j=b.translate([f-0.307*e,g+0.201*e]).clipExtent([[f-0.425*e+d,g+0.12*e+d],[f-0.214*e-d,g+0.234*e-d]]).stream(h);k=c.translate([f-0.205*e,g+0.212*e]).clipExtent([[f-0.214*e+d,g+0.166*e+d],[f-0.115*e-d,g+0.234*e-d]]).stream(h);return reset()};J.fitExtent=function(a,b){return fitExtent(J,a,b)};J.fitSize=function(b,a){return fitSize(J,b,a)};function reset(){f=g=null;return J}return J.scale(1070)};function azimuthalRaw(a){return function(f,g){var h=c(f),d=c(g),e=a(h*d);return [e*d*b(f),e*b(g)]}}function azimuthalInvert(a){return function(e,f){var d=r(e*e+f*f),h=a(d),g=b(h),i=c(h);return [B(e*g,d*i),asin(d&&f*g/d)]}}var cT=azimuthalRaw(function(a){return r(2/(1+a))});cT.invert=azimuthalInvert(function(a){return 2*asin(a/2)});var gy=function(){return projection(cT).scale(124.75).clipAngle(180-0.001)};var cS=azimuthalRaw(function(a){return (a=acos(a))&&a/b(a)});cS.invert=azimuthalInvert(function(a){return a});var gq=function(){return projection(cS).scale(79.4188).clipAngle(180-0.001)};function mercatorRaw(a,b){return [a,cC(d3((p+b)/2))]}mercatorRaw.invert=function(a,b){return [a,2*a7(f7(b))-p]};var i$=function(){return mercatorProjection(mercatorRaw).scale(961/L)};function mercatorProjection(i){var a=projection(i),j=a.center,f=a.scale,h=a.translate,k=a.clipExtent,b=null,d,c,e;a.scale=function(a){return arguments.length?(f(a),reclip()):f()};a.translate=function(a){return arguments.length?(h(a),reclip()):h()};a.center=function(a){return arguments.length?(j(a),reclip()):j()};a.clipExtent=function(a){return arguments.length?(a==null?b=d=c=e=null:(b=+a[0][0],d=+a[0][1],c=+a[1][0],e=+a[1][1]),reclip()):b==null?null:[[b,d],[c,e]]};function reclip(){var h=g*f(),j=a(bw(a.rotate()).invert([0,0]));return k(b==null?[[j[0]-h,j[1]-h],[j[0]+h,j[1]+h]]:i===mercatorRaw?[[Math.max(j[0]-h,b),d],[Math.min(j[0]+h,c),e]]:[[b,Math.max(j[1]-h,d)],[c,Math.min(j[1]+h,e)]])}return reclip()}function tany(a){return d3((p+a)/2)}function conicConformalRaw(e,g){var i=c(e),a=e===g?b(e):cC(i/c(g))/cC(tany(g)/tany(e)),f=i*d0(tany(e),a)/a;if(!a){return mercatorRaw}function project(h,e){if(f>0){if(e<-p+d){e=-p+d}}else {if(e>p-d){e=p-d}}var g=f/d0(tany(e),a);return [g*b(a*h),f-g*c(a*h)]}project.invert=function(c,e){var b=f-e,d=bK(a)*r(c*c+b*b);return [B(c,h(b))/a*bK(b),2*a7(d0(f/d,1/a))-p]};return project}var ha=function(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])};function equirectangularRaw(a,b){return [a,b]}equirectangularRaw.invert=equirectangularRaw;var gV=function(){return projection(equirectangularRaw).scale(152.63)};function conicEquidistantRaw(a,g){var i=c(a),e=a===g?b(a):(i-c(g))/(g-a),f=i/e+a;if(h(e)<d){return equirectangularRaw}function project(g,h){var a=f-h,d=e*g;return [a*b(d),f-a*c(d)]}project.invert=function(b,c){var a=f-c;return [B(b,h(a))/e*bK(a),f-bK(e)*r(b*b+a*a)]};return project}var gH=function(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])};function gnomonicRaw(e,f){var a=c(f),d=c(e)*a;return [a*b(e)/d,b(f)/d]}gnomonicRaw.invert=azimuthalInvert(a7);var iW=function(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)};function scaleTranslate(a,b,c,d){return a===1&&b===1&&c===0&&d===0?aF:transformer({point:function(e,f){this.stream.point(e*a+c,f*b+d)}})}var id=function(){var a=1,e=0,f=0,c=1,d=1,b=aF,i=null,l,k,m,n=aF,h,j,g;function reset(){h=j=null;return g}return g={stream:function(a){return h&&j===a?h:h=b(n(j=a))},clipExtent:function(a){return arguments.length?(n=a==null?(i=l=k=m=null,aF):clipExtent(i=+a[0][0],l=+a[0][1],k=+a[1][0],m=+a[1][1]),reset()):i==null?null:[[i,l],[k,m]]},scale:function(g){return arguments.length?(b=scaleTranslate((a=+g)*c,a*d,e,f),reset()):a},translate:function(g){return arguments.length?(b=scaleTranslate(a*c,a*d,e=+g[0],f=+g[1]),reset()):[e,f]},reflectX:function(g){return arguments.length?(b=scaleTranslate(a*(c=g?-1:1),a*d,e,f),reset()):c<0},reflectY:function(g){return arguments.length?(b=scaleTranslate(a*c,a*(d=g?-1:1),e,f),reset()):d<0},fitExtent:function(a,b){return fitExtent(g,a,b)},fitSize:function(b,a){return fitSize(g,b,a)}}};function orthographicRaw(d,a){return [c(a)*b(d),b(a)]}orthographicRaw.invert=azimuthalInvert(asin);var hL=function(){return projection(orthographicRaw).scale(249.5).clipAngle(90+d)};function stereographicRaw(e,f){var a=c(f),d=1+c(e)*a;return [a*b(e)/d,b(f)/d]}stereographicRaw.invert=azimuthalInvert(function(a){return 2*a7(a)});var hz=function(){return projection(stereographicRaw).scale(250).clipAngle(142)};function transverseMercatorRaw(a,b){return [cC(d3((p+b)/2)),-a]}transverseMercatorRaw.invert=function(a,b){return [-b,2*a7(f7(a))-p]};var gB=function(){var a=mercatorProjection(transverseMercatorRaw),c=a.center,b=a.rotate;a.center=function(a){return arguments.length?c([-a[1],a[0]]):(a=c(),[a[1],-a[0]])};a.rotate=function(a){return arguments.length?b([a[0],a[1],a.length>2?a[2]+90:90]):(a=b(),[a[0],a[1],a[2]-90])};return b([0,0,90]).scale(159.155)};function defaultSeparation(a,b){return a.parent===b.parent?1:2}function meanX(a){return a.reduce(meanXReduce,0)/a.length}function meanXReduce(b,a){return b+a.x}function maxY(a){return 1+a.reduce(maxYReduce,0)}function maxYReduce(b,a){return Math.max(b,a.y)}function leafLeft(a){var b;while(b=a.children){a=b[0]}return a}function leafRight(b){var a;while(a=b.children){b=a[a.length-1]}return b}var al=function(){var c=defaultSeparation,a=1,b=1,d=!1;function al(e){var f,k=0;e.eachAfter(function(a){var b=a.children;if(b){a.x=meanX(b);a.y=maxY(b)}else {a.x=f?k+=c(a,f):0;a.y=0;f=a}});var h=leafLeft(e),g=leafRight(e),i=h.x-c(h,g)/2,j=g.x+c(g,h)/2;return e.eachAfter(d?function(c){c.x=(c.x-e.x)*a;c.y=(e.y-c.y)*b}:function(c){c.x=(c.x-i)/(j-i)*a;c.y=(1-(e.y?c.y/e.y:1))*b})}al.separation=function(a){return arguments.length?(c=a,al):c};al.size=function(c){return arguments.length?(d=!1,a=+c[0],b=+c[1],al):d?null:[a,b]};al.nodeSize=function(c){return arguments.length?(d=!0,a=+c[0],b=+c[1],al):d?[a,b]:null};return al};function count(d){var b=0,a=d.children,c=a&&a.length;if(!c){b=1}else {while(--c>=0){b+=a[c].value}}d.value=b}var ih=function(){return this.eachAfter(count)};var iA=function(g){var c=this,e,b=[c],a,d,f;do{e=b.reverse(),b=[];while(c=e.pop()){g(c),a=c.children;if(a){for(d=0,f=a.length;d<f;++d){b.push(a[d])}}}}while(b.length);return this};var gW=function(e){var b=this,d=[b],a,c;while(b=d.pop()){e(b),a=b.children;if(a){for(c=a.length-1;c>=0;--c){d.push(a[c])}}}return this};var he=function(g){var a=this,d=[a],e=[],b,c,f;while(a=d.pop()){e.push(a),b=a.children;if(b){for(c=0,f=b.length;c<f;++c){d.push(b[c])}}}while(a=e.pop()){g(a)}return this};var i_=function(a){return this.eachAfter(function(c){var d=+a(c.data)||0,b=c.children,e=b&&b.length;while(--e>=0){d+=b[e].value}c.value=d})};var iC=function(a){return this.eachBefore(function(b){if(b.children){b.children.sort(a)}})};var iB=function(b){var a=this,d=leastCommonAncestor(a,b),c=[a];while(a!==d){a=a.parent;c.push(a)}var e=c.length;while(b!==d){c.splice(e,0,b);b=b.parent}return c};function leastCommonAncestor(a,b){if(a===b){return a}var c=a.ancestors(),d=b.ancestors(),e=null;a=c.pop();b=d.pop();while(a===b){e=a;a=c.pop();b=d.pop()}return e}var hd=function(){var a=this,b=[a];while(a=a.parent){b.push(a)}return b};var gK=function(){var a=[];this.each(function(b){a.push(b)});return a};var h$=function(){var a=[];this.eachBefore(function(b){if(!b.children){a.push(b)}});return a};var ii=function(){var b=this,a=[];b.each(function(c){if(c!==b){a.push({source:c.parent,target:c})}});return a};function hierarchy(f,c){var g=new Node(f),j=+f.value&&(g.value=f.value),a,i=[g],e,d,b,h;if(c==null){c=defaultChildren}while(a=i.pop()){if(j){a.value=+a.data.value}if((d=c(a.data))&&(h=d.length)){a.children=new Array(h);for(b=h-1;b>=0;--b){i.push(e=a.children[b]=new Node(d[b]));e.parent=a;e.depth=a.depth+1}}}return g.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function defaultChildren(a){return a.children}function copyData(a){a.data=a.data.data}function computeHeight(a){var b=0;do{a.height=b}while((a=a.parent)&&a.height<++b)}function Node(a){this.data=a;this.depth=this.height=0;this.parent=null}Node.prototype=hierarchy.prototype={constructor:Node,count:ih,each:iA,eachAfter:he,eachBefore:gW,sum:i_,sort:iC,path:iB,ancestors:hd,descendants:gK,leaves:h$,links:ii,copy:node_copy};function Node$2(a){this._=a;this.next=null}var iI=function(a){var f,d=(a=a.slice()).length,c=null,b=c;while(d){var e=new Node$2(a[d-1]);if(b){b=b.next=e}else {b=c=e}a[f]=a[--d]}return {head:c,tail:b}};var fr=function(a){return encloseN(iI(a),[])};function encloses(a,b){var d=b.x-a.x,e=b.y-a.y,c=a.r-b.r;return c*c+1.0E-6>d*d+e*e}function encloseN(a,b){var d,e=null,c=a.head,f,g;switch(b.length){case 1:d=enclose1(b[0]);break;case 2:d=enclose2(b[0],b[1]);break;case 3:d=enclose3(b[0],b[1],b[2]);break;}while(c){g=c._,f=c.next;if(!d||!encloses(d,g)){if(e){a.tail=e,e.next=null}else {a.head=a.tail=null}b.push(g);d=encloseN(a,b);b.pop();if(a.head){c.next=a.head,a.head=c}else {c.next=null,a.head=a.tail=c}e=a.tail,e.next=f}else {e=c}c=f}a.tail=e;return d}function enclose1(a){return {x:a.x,y:a.y,r:a.r}}function enclose2(c,d){var i=c.x,k=c.y,g=c.r,j=d.x,l=d.y,h=d.r,a=j-i,b=l-k,f=h-g,e=Math.sqrt(a*a+b*b);return {x:(i+j+a/e*f)/2,y:(k+l+b/e*f)/2,r:(e+g+h)/2}}function enclose3(t,u,v){var b=t.x,c=t.y,a=t.r,o=u.x,q=u.y,m=u.r,p=v.x,r=v.y,n=v.r,i=2*(b-o),k=2*(c-q),x=2*(m-a),z=b*b+c*c-a*a-o*o-q*q+m*m,j=2*(b-p),l=2*(c-r),y=2*(n-a),A=b*b+c*c-a*a-p*p-r*r+n*n,d=j*k-i*l,e=(k*A-l*z)/d-b,f=(l*x-k*y)/d,g=(j*z-i*A)/d-c,h=(i*y-j*x)/d,B=f*f+h*h-1,s=2*(e*f+g*h+a),C=e*e+g*g-a*a,w=(-s-Math.sqrt(s*s-4*B*C))/(2*B);return {x:e+f*w+b,y:g+h*w+c,r:w}}function place(i,j,b){var g=i.x,h=i.y,c=j.r+b.r,a=i.r+b.r,e=j.x-g,f=j.y-h,d=e*e+f*f;if(d){var k=0.5+((a*=a)-(c*=c))/(2*d),l=Math.sqrt(Math.max(0,2*c*(a+d)-(a-=d)*a-c*c))/(2*d);b.x=g+k*e+l*f;b.y=h+k*f-l*e}else {b.x=g+a;b.y=h}}function intersects(a,b){var d=b.x-a.x,e=b.y-a.y,c=a.r+b.r;return c*c-1.0E-6>d*d+e*e}function distance2(c,g,h){var a=c._,b=c.next._,d=a.r+b.r,e=(a.x*b.r+b.x*a.r)/d-g,f=(a.y*b.r+b.y*a.r)/d-h;return e*e+f*f}function Node$1(a){this._=a;this.next=null;this.previous=null}function packEnclose(h){if(!(j=h.length)){return 0}var a,c,b,j;a=h[0],a.x=0,a.y=0;if(!(j>1)){return a.r}c=h[1],a.x=-c.r,c.x=a.r,c.y=0;if(!(j>2)){return a.r+c.r}place(c,a,b=h[2]);var i=a.r*a.r,k=c.r*c.r,e=b.r*b.r,l=i+k+e,q=i*a.x+k*c.x+e*b.x,r=i*a.y+k*c.y+e*b.y,o,p,d,f,g,m,n;a=new Node$1(a),c=new Node$1(c),b=new Node$1(b);a.next=b.previous=c;c.next=a.previous=b;b.next=c.previous=a;pack: for(d=3;d<j;++d){place(a._,c._,b=h[d]),b=new Node$1(b);f=c.next,g=a.previous,m=c._.r,n=a._.r;do{if(m<=n){if(intersects(f._,b._)){c=f,a.next=c,c.previous=a,--d;continue pack}m+=f._.r,f=f.next}else {if(intersects(g._,b._)){a=g,a.next=c,c.previous=a,--d;continue pack}n+=g._.r,g=g.previous}}while(f!==g.next);b.previous=a,b.next=c,a.next=c.previous=c=b;l+=e=b._.r*b._.r;q+=e*b._.x;r+=e*b._.y;i=distance2(a,o=q/l,p=r/l);while((b=b.next)!==c){if((e=distance2(b,o,p))<i){a=b,i=e}}c=a.next}a=[c._],b=c;while((b=b.next)!==c){a.push(b._)}b=fr(a);for(d=0;d<j;++d){a=h[d],a.x-=b.x,a.y-=b.y}return b.r}var i4=function(a){packEnclose(a);return a};function optional(a){return a==null?null:required(a)}function required(a){if(typeof a!=='function'){throw new Error()}return a}function constantZero(){return 0}var aV=function(a){return function(){return a}};function defaultRadius$1(a){return Math.sqrt(a.value)}var jh=function(){var d=null,a=1,b=1,c=constantZero;function pack(e){e.x=a/2,e.y=b/2;if(d){e.eachBefore(radiusLeaf(d)).eachAfter(packChildren(c,0.5)).eachBefore(translateChild(1))}else {e.eachBefore(radiusLeaf(defaultRadius$1)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(c,e.r/Math.min(a,b))).eachBefore(translateChild(Math.min(a,b)/(2*e.r)))}return e}pack.radius=function(a){return arguments.length?(d=optional(a),pack):d};pack.size=function(c){return arguments.length?(a=+c[0],b=+c[1],pack):[a,b]};pack.padding=function(a){return arguments.length?(c=typeof a==='function'?a:aV(+a),pack):c};return pack};function radiusLeaf(a){return function(b){if(!b.children){b.r=Math.max(0,+a(b)||0)}}}function packChildren(a,b){return function(f){if(d=f.children){var d,c,h=d.length,e=a(f)*b||0,g;if(e){for(c=0;c<h;++c){d[c].r+=e}}g=packEnclose(d);if(e){for(c=0;c<h;++c){d[c].r-=e}}f.r=g+e}}}function translateChild(a){return function(b){var c=b.parent;b.r*=a;if(c){b.x=c.x+a*b.x;b.y=c.y+a*b.y}}}var e0=function(a){a.x0=Math.round(a.x0);a.y0=Math.round(a.y0);a.x1=Math.round(a.x1);a.y1=Math.round(a.y1)};var bl=function(b,c,g,f,h){var d=b.children,a,e=-1,j=d.length,i=b.value&&(f-c)/b.value;while(++e<j){a=d[e],a.y0=g,a.y1=h;a.x0=c,a.x1=c+=a.value*i}};var y=function(){var d=1,b=1,a=0,c=!1;function y(e){var f=e.height+1;e.x0=e.y0=a;e.x1=d;e.y1=b/f;e.eachBefore(positionNode(b,f));if(c){e.eachBefore(e0)}return e}function positionNode(b,c){return function(d){if(d.children){bl(d,d.x0,b*(d.depth+1)/c,d.x1,b*(d.depth+2)/c)}var e=d.x0,g=d.y0,f=d.x1-a,h=d.y1-a;if(f<e){e=f=(e+f)/2}if(h<g){g=h=(g+h)/2}d.x0=e;d.y0=g;d.x1=f;d.y1=h}}y.round=function(a){return arguments.length?(c=!!a,y):c};y.size=function(a){return arguments.length?(d=+a[0],b=+a[1],y):[d,b]};y.padding=function(b){return arguments.length?(a=+b,y):a};return y};var eH='$';var jp={depth:-1};var eV={};function defaultId(a){return a.id}function defaultParentId(a){return a.parentId}var aJ=function(){var b=defaultId,a=defaultParentId;function aJ(h){var l,c,i=h.length,g,f,e,m=new Array(i),d,k,j={};for(c=0;c<i;++c){l=h[c],e=m[c]=new Node(l);if((d=b(l,c,h))!=null&&(d+='')){k=eH+(e.id=d);j[k]=k in j?eV:e}}for(c=0;c<i;++c){e=m[c],d=a(h[c],c,h);if(d==null||!(d+='')){if(g){throw new Error('multiple roots')}g=e}else {f=j[eH+d];if(!f){throw new Error('missing: '+d)}if(f===eV){throw new Error('ambiguous: '+d)}if(f.children){f.children.push(e)}else {f.children=[e]}e.parent=f}}if(!g){throw new Error('no root')}g.parent=jp;g.eachBefore(function(a){a.depth=a.parent.depth+1;--i}).eachBefore(computeHeight);g.parent=null;if(i>0){throw new Error('cycle')}return g}aJ.id=function(a){return arguments.length?(b=required(a),aJ):b};aJ.parentId=function(b){return arguments.length?(a=required(b),aJ):a};return aJ};function defaultSeparation$1(a,b){return a.parent===b.parent?1:2}function nextLeft(b){var a=b.children;return a?a[0]:b.t}function nextRight(b){var a=b.children;return a?a[a.length-1]:b.t}function moveSubtree(d,a,b){var c=b/(a.i-d.i);a.c-=c;a.s+=b;d.c+=c;a.z+=b;a.m+=b}function executeShifts(f){var b=0,e=0,c=f.children,d=c.length,a;while(--d>=0){a=c[d];a.z+=b;a.m+=b;b+=a.s+(e+=a.c)}}function nextAncestor(a,c,b){return a.a.parent===c.parent?a.a:b}function TreeNode(a,b){this._=a;this.parent=null;this.children=null;this.A=null;this.a=this;this.z=0;this.m=0;this.c=0;this.s=0;this.t=null;this.i=b}TreeNode.prototype=Object.create(Node.prototype);function treeRoot(h){var c=new TreeNode(h,0),b,f=[c],e,d,a,g;while(b=f.pop()){if(d=b._.children){b.children=new Array(g=d.length);for(a=g-1;a>=0;--a){f.push(e=b.children[a]=new TreeNode(d[a],a));e.parent=b}}}(c.parent=new TreeNode(null,0)).children=[c];return c}var aq=function(){var a=defaultSeparation$1,b=1,c=1,d=null;function aq(e){var h=treeRoot(e);h.eachAfter(firstWalk),h.parent.m=-h.z;h.eachBefore(secondWalk);if(d){e.eachBefore(sizeNode)}else {var g=e,f=e,i=e;e.eachBefore(function(a){if(a.x<g.x){g=a}if(a.x>f.x){f=a}if(a.depth>i.depth){i=a}});var k=g===f?1:a(g,f)/2,j=k-g.x,l=b/(f.x+k+j),m=c/(i.depth||1);e.eachBefore(function(a){a.x=(a.x+j)*l;a.y=a.depth*m})}return e}function firstWalk(b){var d=b.children,f=b.parent.children,c=b.i?f[b.i-1]:null;if(d){executeShifts(b);var e=(d[0].z+d[d.length-1].z)/2;if(c){b.z=c.z+a(b._,c._);b.m=b.z-e}else {b.z=e}}else {if(c){b.z=c.z+a(b._,c._)}}b.parent.A=apportion(b,c,b.parent.A||f[0])}function secondWalk(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function apportion(f,m,i){if(m){var c=f,d=f,b=m,e=c.parent.children[0],h=c.m,k=d.m,j=b.m,l=e.m,g;while(b=nextRight(b),c=nextLeft(c),b&&c){e=nextLeft(e);d=nextRight(d);d.a=f;g=b.z+j-c.z-h+a(b._,c._);if(g>0){moveSubtree(nextAncestor(b,f,i),f,g);h+=g;k+=g}j+=b.m;h+=c.m;l+=e.m;k+=d.m}if(b&&!nextRight(d)){d.t=b;d.m+=j-k}if(c&&!nextLeft(e)){e.t=c;e.m+=h-l;i=f}}return i}function sizeNode(a){a.x*=b;a.y=a.depth*c}aq.separation=function(b){return arguments.length?(a=b,aq):a};aq.size=function(a){return arguments.length?(d=!1,b=+a[0],c=+a[1],aq):d?null:[b,c]};aq.nodeSize=function(a){return arguments.length?(d=!0,b=+a[0],c=+a[1],aq):d?[b,c]:null};return aq};var bX=function(b,f,c,g,h){var d=b.children,a,e=-1,j=d.length,i=b.value&&(h-c)/b.value;while(++e<j){a=d[e],a.x0=f,a.x1=g;a.y0=c,a.y1=c+=a.value*i}};var f9=(1+Math.sqrt(5))/2;function squarifyRatio(w,u,l,m,r,s){var v=[],j=u.children,k,c,q=0,b=0,t=j.length,h,i,d=u.value,a,g,f,o,n,p,e;while(q<t){h=r-l,i=s-m;do{a=j[b++].value}while(!a&&b<t);g=f=a;p=Math.max(i/h,h/i)/(d*w);e=a*a*p;n=Math.max(f/e,e/g);for(;b<t;++b){a+=c=j[b].value;if(c<g){g=c}if(c>f){f=c}e=a*a*p;o=Math.max(f/e,e/g);if(o>n){a-=c;break}n=o}v.push(k={value:a,dice:h<i,children:j.slice(q,b)});if(k.dice){bl(k,l,m,r,d?m+=i*a/d:s)}else {bX(k,l,m,d?l+=h*a/d:r,s)}d-=a,q=b}return v}var bx=function custom(a){function bx(b,c,e,d,f){squarifyRatio(a,b,c,e,d,f)}bx.ratio=function(a){return custom((a=+a)>1?a:1)};return bx}(f9);var ji=function(){var h=bx,g=!1,i=1,j=1,d=[0],b=constantZero,f=constantZero,c=constantZero,a=constantZero,e=constantZero;function treemap(a){a.x0=a.y0=0;a.x1=i;a.y1=j;a.eachBefore(positionNode);d=[0];if(g){a.eachBefore(e0)}return a}function positionNode(g){var m=d[g.depth],i=g.x0+m,k=g.y0+m,j=g.x1-m,l=g.y1-m;if(j<i){i=j=(i+j)/2}if(l<k){k=l=(k+l)/2}g.x0=i;g.y0=k;g.x1=j;g.y1=l;if(g.children){m=d[g.depth+1]=b(g)/2;i+=e(g)-m;k+=f(g)-m;j-=c(g)-m;l-=a(g)-m;if(j<i){i=j=(i+j)/2}if(l<k){k=l=(k+l)/2}h(g,i,k,j,l)}}treemap.round=function(a){return arguments.length?(g=!!a,treemap):g};treemap.size=function(a){return arguments.length?(i=+a[0],j=+a[1],treemap):[i,j]};treemap.tile=function(a){return arguments.length?(h=required(a),treemap):h};treemap.padding=function(a){return arguments.length?treemap.paddingInner(a).paddingOuter(a):treemap.paddingInner()};treemap.paddingInner=function(a){return arguments.length?(b=typeof a==='function'?a:aV(+a),treemap):b};treemap.paddingOuter=function(a){return arguments.length?treemap.paddingTop(a).paddingRight(a).paddingBottom(a).paddingLeft(a):treemap.paddingTop()};treemap.paddingTop=function(a){return arguments.length?(f=typeof a==='function'?a:aV(+a),treemap):f};treemap.paddingRight=function(a){return arguments.length?(c=typeof a==='function'?a:aV(+a),treemap):c};treemap.paddingBottom=function(b){return arguments.length?(a=typeof b==='function'?b:aV(+b),treemap):a};treemap.paddingLeft=function(a){return arguments.length?(e=typeof a==='function'?a:aV(+a),treemap):e};return treemap};var jE=function(e,g,i,h,j){var c=e.children,b,d=c.length,f,a=new Array(d+1);for(a[0]=f=b=0;b<d;++b){a[b+1]=f+=c[b].value}y(0,d,e.value,g,i,h,j);function y(d,m,k,e,g,f,h){if(d>=m-1){var l=c[d];l.x0=e,l.y0=g;l.x1=f,l.y1=h;return}var q=a[d],n=k/2+q,b=d+1,p=m-1;while(b<p){var o=b+p>>>1;if(a[o]<n){b=o+1}else {p=o}}if(n-a[b-1]<a[b]-n&&d+1<b){--b}var i=a[b]-q,j=k-i;if(f-e>h-g){var r=(e*j+f*i)/k;y(d,b,i,e,g,r,h);y(b,m,j,r,g,f,h)}else {var s=(g*j+h*i)/k;y(d,b,i,e,g,f,s);y(b,m,j,e,s,f,h)}}};var iJ=function(a,b,d,c,e){(a.depth&1?bX:bl)(a,b,d,c,e)};var b1=function custom(a){function b1(f,d,e,j,k){if((c=f._squarify)&&c.ratio===a){var c,b,h,g,l=-1,m,n=c.length,i=f.value;while(++l<n){b=c[l],h=b.children;for(g=b.value=0,m=h.length;g<m;++g){b.value+=h[g].value}if(b.dice){bl(b,d,e,j,e+=(k-e)*b.value/i)}else {bX(b,d,e,d+=(j-d)*b.value/i,k)}i-=b.value}}else {f._squarify=c=squarifyRatio(a,f,d,e,j,k);c.ratio=a}}b1.ratio=function(a){return custom((a=+a)>1?a:1)};return b1}(f9);var jD=function(b){var e=-1,f=b.length,c,a=b[f-1],d=0;while(++e<f){c=a;a=b[e];d+=c[1]*a[0]-c[0]*a[1]}return d/2};var h6=function(d){var f=-1,g=d.length,h=0,i=0,b,a=d[g-1],e,c=0;while(++f<g){b=a;a=d[f];c+=e=b[0]*a[1]-a[0]*b[1];h+=(b[0]+a[0])*e;i+=(b[1]+a[1])*e}return c*=3,[h/c,i/c]};var jb=function(a,b,c){return (b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])};function lexicographicOrder(a,b){return a[0]-b[0]||a[1]-b[1]}function computeUpperHullIndexes(c){var e=c.length,b=[0,1],a=2;for(var d=2;d<e;++d){while(a>1&&jb(c[b[a-2]],c[b[a-1]],c[d])<=0){--a}b[a++]=d}return b.slice(0,a)}var j8=function(e){if((f=e.length)<3){return null}var a,f,b=new Array(f),h=new Array(f);for(a=0;a<f;++a){b[a]=[+e[a][0],+e[a][1],a]}b.sort(lexicographicOrder);for(a=0;a<f;++a){h[a]=[b[a][0],-b[a][1]]}var d=computeUpperHullIndexes(b),c=computeUpperHullIndexes(h);var j=c[0]===d[0],i=c[c.length-1]===d[d.length-1],g=[];for(a=d.length-1;a>=0;--a){g.push(e[b[d[a]][2]])}for(a=+j;a<c.length-i;++a){g.push(e[b[c[a]][2]])}return g};var h9=function(d,i){var k=d.length,b=d[k-1],l=i[0],h=i[1],j=b[0],f=b[1],c,a,e=!1;for(var g=0;g<k;++g){b=d[g],c=b[0],a=b[1];if(a>h!==f>h&&l<(j-c)*(h-a)/(f-a)+c){e=!e}j=c,f=a}return e};var iY=function(d){var h=-1,i=d.length,a=d[i-1],b,c,e=a[0],f=a[1],g=0;while(++h<i){b=e;c=f;a=d[h];e=a[0];f=a[1];b-=e;c-=f;g+=Math.sqrt(b*b+c*c)}return g};var jt=[].slice;var jn={};function Queue(a){if(!(a>=1)){throw new Error()}this._size=a;this._call=this._error=null;this._tasks=[];this._data=[];this._waiting=this._active=this._ended=this._start=0}Queue.prototype=queue.prototype={constructor:Queue,defer:function(a){if(typeof a!=='function'||this._call){throw new Error()}if(this._error!=null){return this}var b=jt.call(arguments,1);b.push(a);++this._waiting,this._tasks.push(b);poke$1(this);return this},abort:function(){if(this._error==null){abort(this,new Error('abort'))}return this},await:function(a){if(typeof a!=='function'||this._call){throw new Error()}this._call=function(c,b){a.apply(null,[c].concat(b))};maybeNotify(this);return this},awaitAll:function(a){if(typeof a!=='function'||this._call){throw new Error()}this._call=a;maybeNotify(this);return this}};function poke$1(a){if(!a._start){try{start$1(a)}catch(kJ){if(a._tasks[a._ended+a._active-1]){abort(a,kJ)}else {if(!a._data){throw kJ}}}}}function start$1(a){while(a._start=a._waiting&&a._active<a._size){var c=a._ended+a._active,b=a._tasks[c],d=b.length-1,e=b[d];b[d]=end(a,c);--a._waiting,++a._active;b=e.apply(null,b);if(!a._tasks[c]){continue}a._tasks[c]=b||jn}}function end(a,b){return function(c,d){if(!a._tasks[b]){return}--a._active,++a._ended;a._tasks[b]=null;if(a._error!=null){return}if(c!=null){abort(a,c)}else {a._data[b]=d;if(a._waiting){poke$1(a)}else {maybeNotify(a)}}}}function abort(a,d){var b=a._tasks.length,c;a._error=d;a._data=undefined;a._waiting=NaN;while(--b>=0){if(c=a._tasks[b]){a._tasks[b]=null;if(c.abort){try{c.abort()}catch(kJ){}}}}a._active=NaN;maybeNotify(a)}function maybeNotify(a){if(!a._active&&a._call){var b=a._data;a._data=undefined;a._call(a._error,b)}}function queue(a){return new Queue(arguments.length?+a:Infinity)}var jx=function(a,b){a=a==null?0:+a;b=b==null?1:+b;if(arguments.length===1){b=a,a=0}else {b-=a}return function(){return Math.random()*b+a}};var fH=function(d,c){var a,b;d=d==null?0:+d;c=c==null?1:+c;return function(){var e;if(a!=null){e=a,a=null}else {do{a=Math.random()*2-1;e=Math.random()*2-1;b=a*a+e*e}while(!b||b>1)}return d+c*e*Math.sqrt(-2*Math.log(b)/b)}};var iz=function(){var a=fH.apply(this,arguments);return function(){return Math.exp(a())}};var eZ=function(a){return function(){for(var b=0,c=0;c<a;++c){b+=Math.random()}return b}};var jU=function(a){var b=eZ(a);return function(){return b()/a}};var hs=function(a){return function(){return -Math.log(1-Math.random())/a}};var dx=function(l,g){var b,c=dispatch('beforesend','progress','load','error'),d,e=map$1(),a=new XMLHttpRequest(),k=null,i=null,j,f,h=0;if(typeof XDomainRequest!=='undefined'&&!('withCredentials' in a)&&/^(http(s)?:)?\/\//.test(l)){a=new XDomainRequest()}'onload' in a?a.onload=a.onerror=a.ontimeout=respond:a.onreadystatechange=function(b){a.readyState>3&&respond(b)};function respond(f){var d=a.status,e;if(!d&&hasResponse(a)||d>=200&&d<300||d===304){if(j){try{e=j.call(b,a)}catch(kJ){c.call('error',b,kJ);return}}else {e=a}c.call('load',b,e)}else {c.call('error',b,f)}}a.onprogress=function(a){c.call('progress',b,a)};b={header:function(a,c){a=(a+'').toLowerCase();if(arguments.length<2){return e.get(a)}if(c==null){e.remove(a)}else {e.set(a,c+'')}return b},mimeType:function(a){if(!arguments.length){return d}d=a==null?null:a+'';return b},responseType:function(a){if(!arguments.length){return f}f=a;return b},timeout:function(a){if(!arguments.length){return h}h=+a;return b},user:function(a){return arguments.length<1?k:(k=a==null?null:a+'',b)},password:function(a){return arguments.length<1?i:(i=a==null?null:a+'',b)},response:function(a){j=a;return b},get:function(c,a){return b.send('GET',c,a)},post:function(c,a){return b.send('POST',c,a)},send:function(m,j,g){a.open(m,l,!0,k,i);if(d!=null&&!e.has('accept')){e.set('accept',d+',*/*')}if(a.setRequestHeader){e.each(function(b,c){a.setRequestHeader(c,b)})}if(d!=null&&a.overrideMimeType){a.overrideMimeType(d)}if(f!=null){a.responseType=f}if(h>0){a.timeout=h}if(g==null&&typeof j==='function'){g=j,j=null}if(g!=null&&g.length===1){g=fixCallback(g)}if(g!=null){b.on('error',g).on('load',function(a){g(null,a)})}c.call('beforesend',b,a);a.send(j==null?null:j);return b},abort:function(){a.abort();return b},on:function(){var a=c.on.apply(c,arguments);return a===c?b:a}};if(g!=null){if(typeof g!=='function'){throw new Error('invalid callback: '+g)}return b.get(g)}return b};function fixCallback(a){return function(b,c){a(b==null?c:null)}}function hasResponse(a){var b=a.responseType;return b&&b!=='text'?a.response:a.responseText}var co=function(a,b){return function(e,c){var d=dx(e).mimeType(a).response(b);if(c!=null){if(typeof c!=='function'){throw new Error('invalid callback: '+c)}return d.get(c)}return d}};var j7=co('text/html',function(a){return document.createRange().createContextualFragment(a.responseText)});var j9=co('application/json',function(a){return JSON.parse(a.responseText)});var kg=co('text/plain',function(a){return a.responseText});var ko=co('application/xml',function(b){var a=b.responseXML;if(!a){throw new Error('parse error')}return a});var fO=function(a,b){return function(f,c,e){if(arguments.length<3){e=c,c=null}var d=dx(f).mimeType(a);d.row=function(a){return arguments.length?d.response(responseOf(b,c=a)):c};d.row(c);return e?d.get(e):d}};function responseOf(a,b){return function(c){return a(c.responseText,b)}}var jW=fO('text/csv',e4);var j3=fO('text/tab-separated-values',ff);var fk=Array.prototype;var dH=fk.map;var at=fk.slice;var dq={name:'implicit'};function ordinal(a){var d=map$1(),c=[],b=dq;a=a==null?[]:at.call(a);function scale(g){var f=g+'',e=d.get(f);if(!e){if(b!==dq){return b}d.set(f,e=c.push(g))}return a[(e-1)%a.length]}scale.domain=function(b){if(!arguments.length){return c.slice()}c=[],d=map$1();var f=-1,g=b.length,e,a;while(++f<g){if(!d.has(a=(e=b[f])+'')){d.set(a,c.push(e))}}return scale};scale.range=function(b){return arguments.length?(a=at.call(b),scale):a.slice()};scale.unknown=function(a){return arguments.length?(b=a,scale):b};scale.copy=function(){return ordinal().domain(c).range(a).unknown(b)};return scale}function band(){var a=ordinal().unknown(undefined),h=a.domain,j=a.range,c=[0,1],d,g,e=!1,b=0,f=0,i=0.5;delete a.unknown;function rescale(){var l=h().length,k=c[1]<c[0],a=c[k-0],n=c[1-k];d=(n-a)/Math.max(1,l-b+f*2);if(e){d=Math.floor(d)}a+=(n-a-d*(l-b))*i;g=d*(1-b);if(e){a=Math.round(a),g=Math.round(g)}var m=Y(l).map(function(b){return a+d*b});return j(k?m.reverse():m)}a.domain=function(a){return arguments.length?(h(a),rescale()):h()};a.range=function(a){return arguments.length?(c=[+a[0],+a[1]],rescale()):c.slice()};a.rangeRound=function(a){return c=[+a[0],+a[1]],e=!0,rescale()};a.bandwidth=function(){return g};a.step=function(){return d};a.round=function(a){return arguments.length?(e=!!a,rescale()):e};a.padding=function(a){return arguments.length?(b=f=Math.max(0,Math.min(1,a)),rescale()):b};a.paddingInner=function(a){return arguments.length?(b=Math.max(0,Math.min(1,a)),rescale()):b};a.paddingOuter=function(a){return arguments.length?(f=Math.max(0,Math.min(1,a)),rescale()):f};a.align=function(a){return arguments.length?(i=Math.max(0,Math.min(1,a)),rescale()):i};a.copy=function(){return band().domain(h()).range(c).round(e).paddingInner(b).paddingOuter(f).align(i)};return rescale()}function pointish(a){var b=a.copy;a.padding=a.paddingOuter;delete a.paddingInner;delete a.paddingOuter;a.copy=function(){return pointish(b())};return a}function point$1(){return pointish(band().paddingInner(1))}var c4=function(a){return function(){return a}};var e8=function(a){return +a};var f5=[0,1];function deinterpolateLinear(a,b){return (b-=a=+a)?function(c){return (c-a)/b}:c4(b)}function deinterpolateClamp(a){return function(b,c){var d=a(b=+b,c=+c);return function(a){return a<=b?0:a>=c?1:d(a)}}}function reinterpolateClamp(a){return function(b,c){var d=a(b=+b,c=+c);return function(a){return a<=0?b:a>=1?c:d(a)}}}function bimap(g,f,d,e){var a=g[0],c=g[1],b=f[0],h=f[1];if(c<a){a=d(c,a),b=e(h,b)}else {a=d(a,c),b=e(b,h)}return function(c){return b(a(c))}}function polymap(a,c,g,h){var d=Math.min(a.length,c.length)-1,e=new Array(d),f=new Array(d),b=-1;if(a[d]<a[0]){a=a.slice().reverse();c=c.slice().reverse()}while(++b<d){e[b]=g(a[b],a[b+1]);f[b]=h(c[b],c[b+1])}return function(c){var b=aD(a,c,1,d)-1;return f[b](e[b](c))}}function copy(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp())}function continuous(h,i){var b=f5,a=f5,c=bd,d=!1,e,f,g;function rescale(){e=Math.min(b.length,a.length)>2?polymap:bimap;f=g=null;return scale}function scale(g){return (f||(f=e(b,a,d?deinterpolateClamp(h):h,c)))(+g)}scale.invert=function(c){return (g||(g=e(a,b,deinterpolateLinear,d?reinterpolateClamp(i):i)))(+c)};scale.domain=function(a){return arguments.length?(b=dH.call(a,e8),rescale()):b.slice()};scale.range=function(b){return arguments.length?(a=at.call(b),rescale()):a.slice()};scale.rangeRound=function(b){return a=at.call(b),c=ei,rescale()};scale.clamp=function(a){return arguments.length?(d=!!a,rescale()):d};scale.interpolate=function(a){return arguments.length?(c=a,rescale()):c};return rescale()}var c9=function(d,h,b){var e=d[0],g=d[d.length-1],f=tickStep(e,g,h==null?10:h),c;b=formatSpecifier(b==null?',f':b);switch(b.type){case 's':var i=Math.max(Math.abs(e),Math.abs(g));if(b.precision==null&&!isNaN(c=en(f,i))){b.precision=c};return a.formatPrefix(b,i);case '':case 'e':case 'g':case 'p':case 'r':if(b.precision==null&&!isNaN(c=er(f,Math.max(Math.abs(e),Math.abs(g))))){b.precision=c-(b.type==='e')};break;case 'f':case '%':if(b.precision==null&&!isNaN(c=eq(f))){b.precision=c-(b.type==='%')*2};break;}return a.format(b)};function linearish(a){var b=a.domain;a.ticks=function(c){var a=b();return cs(a[0],a[a.length-1],c==null?10:c)};a.tickFormat=function(c,a){return c9(b(),c,a)};a.nice=function(g){var d=b(),h=d.length-1,i=g==null?10:g,e=d[0],f=d[h],c=tickStep(e,f,i);if(c){c=tickStep(Math.floor(e/c)*c,Math.ceil(f/c)*c,i);d[0]=Math.floor(e/c)*c;d[h]=Math.ceil(f/c)*c;b(d)}return a};return a}function linear$2(){var a=continuous(deinterpolateLinear,w);a.copy=function(){return copy(a,linear$2())};return linearish(a)}function identity$6(){var a=[0,1];function scale(a){return +a}scale.invert=scale;scale.domain=scale.range=function(b){return arguments.length?(a=dH.call(b,e8),scale):a.slice()};scale.copy=function(){return identity$6().domain(a)};return linearish(scale)}var f0=function(a,g){a=a.slice();var b=0,c=a.length-1,d=a[b],e=a[c],f;if(e<d){f=b,b=c,c=f;f=d,d=e,e=f}a[b]=g.floor(d);a[c]=g.ceil(e);return a};function deinterpolate(b,a){return (a=Math.log(a/b))?function(c){return Math.log(c/b)/a}:c4(a)}function reinterpolate$1(a,b){return a<0?function(c){return -Math.pow(-b,c)*Math.pow(-a,1-c)}:function(c){return Math.pow(b,c)*Math.pow(a,1-c)}}function pow10(a){return isFinite(a)?+('1e'+a):a<0?0:a}function powp(a){return a===10?pow10:a===Math.E?Math.exp:function(b){return Math.pow(a,b)}}function logp(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(b){return Math.log(b)/a})}function reflect(a){return function(b){return -a(-b)}}function log$1(){var c=continuous(deinterpolate,reinterpolate$1).domain([1,10]),f=c.domain,b=10,e=logp(10),d=powp(10);function rescale(){e=logp(b),d=powp(b);if(f()[0]<0){e=reflect(e),d=reflect(d)}return c}c.base=function(a){return arguments.length?(b=+a,rescale()):b};c.domain=function(a){return arguments.length?(f(a),rescale()):f()};c.ticks=function(n){var m=f(),i=m[0],j=m[m.length-1],p;if(p=j<i){a=i,i=j,j=a}var a=e(i),h=e(j),l,c,g,o=n==null?10:+n,k=[];if(!(b%1)&&h-a<o){a=Math.round(a)-1,h=Math.round(h)+1;if(i>0){for(;a<h;++a){for(c=1,l=d(a);c<b;++c){g=l*c;if(g<i){continue}if(g>j){break}k.push(g)}}}else {for(;a<h;++a){for(c=b-1,l=d(a);c>=1;--c){g=l*c;if(g<i){continue}if(g>j){break}k.push(g)}}}}else {k=cs(a,h,Math.min(h-a,o)).map(d)}return p?k.reverse():k};c.tickFormat=function(g,f){if(f==null){f=b===10?'.0e':','}if(typeof f!=='function'){f=a.format(f)}if(g===Infinity){return f}if(g==null){g=10}var h=Math.max(1,b*g/c.ticks().length);return function(a){var c=a/d(Math.round(e(a)));if(c*b<b-0.5){c*=b}return c<=h?f(a):''}};c.nice=function(){return f(f0(f(),{floor:function(a){return d(Math.floor(e(a)))},ceil:function(a){return d(Math.ceil(e(a)))}}))};c.copy=function(){return copy(c,log$1().base(b))};return c}function raise$1(a,b){return a<0?-Math.pow(-a,b):Math.pow(a,b)}function pow$1(){var a=1,b=continuous(deinterpolate,w),c=b.domain;function deinterpolate(c,b){return (b=raise$1(b,a)-(c=raise$1(c,a)))?function(d){return (raise$1(d,a)-c)/b}:c4(b)}function w(b,c){c=raise$1(c,a)-(b=raise$1(b,a));return function(d){return raise$1(b+c*d,1/a)}}b.exponent=function(b){return arguments.length?(a=+b,c(c())):a};b.copy=function(){return copy(b,pow$1().exponent(a))};return linearish(b)}function sqrt$1(){return pow$1().exponent(0.5)}function quantile$$1(){var a=[],c=[],b=[];function rescale(){var d=0,e=Math.max(1,c.length);b=new Array(e-1);while(++d<e){b[d-1]=br(a,d/e)}return scale}function scale(a){if(!isNaN(a=+a)){return c[aD(b,a)]}}scale.invertExtent=function(e){var d=c.indexOf(e);return d<0?[NaN,NaN]:[d>0?b[d-1]:a[0],d<b.length?b[d]:a[a.length-1]]};scale.domain=function(d){if(!arguments.length){return a.slice()}a=[];for(var c=0,e=d.length,b;c<e;++c){if(b=d[c],b!=null&&!isNaN(b=+b)){a.push(b)}}a.sort(aG);return rescale()};scale.range=function(a){return arguments.length?(c=at.call(a),rescale()):c.slice()};scale.quantiles=function(){return b.slice()};scale.copy=function(){return quantile$$1().domain(a).range(c)};return scale}function quantize$1(){var d=0,e=1,a=1,b=[0.5],c=[0,1];function scale(d){if(d<=d){return c[aD(b,d,0,a)]}}function rescale(){var c=-1;b=new Array(a);while(++c<a){b[c]=((c+1)*e-(c-a)*d)/(a+1)}return scale}scale.domain=function(a){return arguments.length?(d=+a[0],e=+a[1],rescale()):[d,e]};scale.range=function(b){return arguments.length?(a=(c=at.call(b)).length-1,rescale()):c.slice()};scale.invertExtent=function(g){var f=c.indexOf(g);return f<0?[NaN,NaN]:f<1?[d,b[0]]:f>=a?[b[a-1],e]:[b[f-1],b[f]]};scale.copy=function(){return quantize$1().domain([d,e]).range(c)};return linearish(scale)}function threshold$1(){var a=[0.5],b=[0,1],c=1;function scale(d){if(d<=d){return b[aD(a,d,0,c)]}}scale.domain=function(d){return arguments.length?(a=at.call(d),c=Math.min(a.length,b.length-1),scale):a.slice()};scale.range=function(d){return arguments.length?(b=at.call(d),c=Math.min(a.length,b.length-1),scale):b.slice()};scale.invertExtent=function(d){var c=b.indexOf(d);return [a[c-1],a[c]]};scale.copy=function(){return threshold$1().domain(a).range(b)};return scale}var dX=new Date();var dY=new Date();function newInterval(a,b,c,d){function n(b){return a(b=new Date(+b)),b}n.floor=n;n.ceil=function(c){return a(c=new Date(c-1)),b(c,1),a(c),c};n.round=function(a){var b=n(a),c=n.ceil(a);return a-b<c-a?b:c};n.offset=function(a,c){return b(a=new Date(+a),c==null?1:Math.floor(c)),a};n.range=function(c,f,d){var e=[];c=n.ceil(c);d=d==null?1:Math.floor(d);if(!(c<f)||!(d>0)){return e}do{e.push(new Date(+c))}while(b(c,d),a(c),c<f);return e};n.filter=function(c){return newInterval(function(b){if(b>=b){while(a(b),!c(b)){b.setTime(b-1)}}},function(a,d){if(a>=a){while(--d>=0){while(b(a,1),!c(a)){}}}})};if(c){n.count=function(b,d){dX.setTime(+b),dY.setTime(+d);a(dX),a(dY);return Math.floor(c(dX,dY))};n.every=function(a){a=Math.floor(a);return !isFinite(a)||!(a>0)?null:!(a>1)?n:n.filter(d?function(b){return d(b)%a===0}:function(b){return n.count(0,b)%a===0})}}return n}var aE=newInterval(function(){},function(a,b){a.setTime(+a+b)},function(a,b){return b-a});aE.every=function(a){a=Math.floor(a);if(!isFinite(a)||!(a>0)){return null}if(!(a>1)){return aE}return newInterval(function(b){b.setTime(Math.floor(b/a)*a)},function(b,c){b.setTime(+b+c*a)},function(b,c){return (c-b)/a})};var ez=aE.range;var bS=1000;var ag=60000;var ar=3600000;var et=86400000;var eo=604800000;var bF=newInterval(function(a){a.setTime(Math.floor(a/bS)*bS)},function(a,b){a.setTime(+a+b*bS)},function(a,b){return (b-a)/bS},function(a){return a.getUTCSeconds()});var fx=bF.range;var dD=newInterval(function(a){a.setTime(Math.floor(a/ag)*ag)},function(a,b){a.setTime(+a+b*ag)},function(a,b){return (b-a)/ag},function(a){return a.getMinutes()});var jk=dD.range;var dT=newInterval(function(b){var a=b.getTimezoneOffset()*ag%ar;if(a<0){a+=ar}b.setTime(Math.floor((+b-a)/ar)*ar+a)},function(a,b){a.setTime(+a+b*ar)},function(a,b){return (b-a)/ar},function(a){return a.getHours()});var jY=dT.range;var cB=newInterval(function(a){a.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+b)},function(a,b){return (b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*ag)/et},function(a){return a.getDate()-1});var j6=cB.range;function weekday(a){return newInterval(function(b){b.setDate(b.getDate()-(b.getDay()+7-a)%7);b.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+b*7)},function(a,b){return (b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*ag)/eo})}var bG=weekday(0);var dE=weekday(1);var fB=weekday(2);var e3=weekday(3);var fd=weekday(4);var fF=weekday(5);var fb=weekday(6);var fA=bG.range;var jl=dE.range;var i6=fB.range;var it=e3.range;var iK=fd.range;var jd=fF.range;var iG=fb.range;var dK=newInterval(function(a){a.setDate(1);a.setHours(0,0,0,0)},function(a,b){a.setMonth(a.getMonth()+b)},function(a,b){return b.getMonth()-a.getMonth()+(b.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()});var jI=dK.range;var aP=newInterval(function(a){a.setMonth(0,1);a.setHours(0,0,0,0)},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a,b){return b.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});aP.every=function(a){return !isFinite(a=Math.floor(a))||!(a>0)?null:newInterval(function(b){b.setFullYear(Math.floor(b.getFullYear()/a)*a);b.setMonth(0,1);b.setHours(0,0,0,0)},function(b,c){b.setFullYear(b.getFullYear()+c*a)})};var j4=aP.range;var dj=newInterval(function(a){a.setUTCSeconds(0,0)},function(a,b){a.setTime(+a+b*ag)},function(a,b){return (b-a)/ag},function(a){return a.getUTCMinutes()});var ir=dj.range;var dA=newInterval(function(a){a.setUTCMinutes(0,0,0)},function(a,b){a.setTime(+a+b*ar)},function(a,b){return (b-a)/ar},function(a){return a.getUTCHours()});var i7=dA.range;var cp=newInterval(function(a){a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+b)},function(a,b){return (b-a)/et},function(a){return a.getUTCDate()-1});var jy=cp.range;function utcWeekday(a){return newInterval(function(b){b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7);b.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+b*7)},function(a,b){return (b-a)/eo})}var bs=utcWeekday(0);var dk=utcWeekday(1);var eT=utcWeekday(2);var eA=utcWeekday(3);var eJ=utcWeekday(4);var e2=utcWeekday(5);var eI=utcWeekday(6);var eS=bs.range;var is=dk.range;var h1=eT.range;var hC=eA.range;var hT=eJ.range;var iq=e2.range;var hS=eI.range;var dr=newInterval(function(a){a.setUTCDate(1);a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCMonth(a.getUTCMonth()+b)},function(a,b){return b.getUTCMonth()-a.getUTCMonth()+(b.getUTCFullYear()-a.getUTCFullYear())*12},function(a){return a.getUTCMonth()});var iR=dr.range;var aL=newInterval(function(a){a.setUTCMonth(0,1);a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCFullYear(a.getUTCFullYear()+b)},function(a,b){return b.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});aL.every=function(a){return !isFinite(a=Math.floor(a))||!(a>0)?null:newInterval(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/a)*a);b.setUTCMonth(0,1);b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCFullYear(b.getUTCFullYear()+c*a)})};var i8=aL.range;function localDate(a){if(0<=a.y&&a.y<100){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);b.setFullYear(a.y);return b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function utcDate(a){if(0<=a.y&&a.y<100){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));b.setUTCFullYear(a.y);return b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function newYear(a){return {y:a,m:0,d:1,H:0,M:0,S:0,L:0}}function formatLocale$1(a){var i=a.dateTime,j=a.date,k=a.time,g=a.periods,f=a.days,d=a.shortDays,h=a.months,e=a.shortMonths;var t=formatRe(g),p=formatLookup(g),s=formatRe(f),o=formatLookup(f),n=formatRe(d),l=formatLookup(d),u=formatRe(h),r=formatLookup(h),q=formatRe(e),m=formatLookup(e);var c={'a':formatShortWeekday,'A':formatWeekday,'b':formatShortMonth,'B':formatMonth,'c':null,'d':formatDayOfMonth,'e':formatDayOfMonth,'H':formatHour24,'I':formatHour12,'j':formatDayOfYear,'L':formatMilliseconds,'m':formatMonthNumber,'M':formatMinutes,'p':formatPeriod,'S':formatSeconds,'U':formatWeekNumberSunday,'w':formatWeekdayNumber,'W':formatWeekNumberMonday,'x':null,'X':null,'y':formatYear,'Y':formatFullYear,'Z':formatZone,'%':formatLiteralPercent};var b={'a':formatUTCShortWeekday,'A':formatUTCWeekday,'b':formatUTCShortMonth,'B':formatUTCMonth,'c':null,'d':formatUTCDayOfMonth,'e':formatUTCDayOfMonth,'H':formatUTCHour24,'I':formatUTCHour12,'j':formatUTCDayOfYear,'L':formatUTCMilliseconds,'m':formatUTCMonthNumber,'M':formatUTCMinutes,'p':formatUTCPeriod,'S':formatUTCSeconds,'U':formatUTCWeekNumberSunday,'w':formatUTCWeekdayNumber,'W':formatUTCWeekNumberMonday,'x':null,'X':null,'y':formatUTCYear,'Y':formatUTCFullYear,'Z':formatUTCZone,'%':formatLiteralPercent};var v={'a':parseShortWeekday,'A':parseWeekday,'b':parseShortMonth,'B':parseMonth,'c':parseLocaleDateTime,'d':parseDayOfMonth,'e':parseDayOfMonth,'H':parseHour24,'I':parseHour24,'j':parseDayOfYear,'L':parseMilliseconds,'m':parseMonthNumber,'M':parseMinutes,'p':parsePeriod,'S':parseSeconds,'U':parseWeekNumberSunday,'w':parseWeekdayNumber,'W':parseWeekNumberMonday,'x':parseLocaleDate,'X':parseLocaleTime,'y':parseYear,'Y':parseFullYear,'Z':parseZone,'%':parseLiteralPercent};c.x=newFormat(j,c);c.X=newFormat(k,c);c.c=newFormat(i,c);b.x=newFormat(j,b);b.X=newFormat(k,b);b.c=newFormat(i,b);function newFormat(a,b){return function(f){var e=[],c=-1,h=0,j=a.length,d,g,i;if(!(f instanceof Date)){f=new Date(+f)}while(++c<j){if(a.charCodeAt(c)===37){e.push(a.slice(h,c));if((g=f1[d=a.charAt(++c)])!=null){d=a.charAt(++c)}else {g=d==='e'?' ':'0'}if(i=b[d]){d=i(f,g)}e.push(d);h=c+1}}e.push(a.slice(h,c));return e.join('')}}function newParse(b,a){return function(e){var c=newYear(1900),f=parseSpecifier(c,b,e+='',0);if(f!=e.length){return null}if('p' in c){c.H=c.H%12+c.p*12}if('W' in c||'U' in c){if(!('w' in c)){c.w='W' in c?1:0}var d='Z' in c?utcDate(newYear(c.y)).getUTCDay():a(newYear(c.y)).getDay();c.m=0;c.d='W' in c?(c.w+6)%7+c.W*7-(d+5)%7:c.w+c.U*7-(d+6)%7}if('Z' in c){c.H+=c.Z/100|0;c.M+=c.Z%100;return utcDate(c)}return a(c)}}function parseSpecifier(g,c,e,b){var d=0,i=c.length,h=e.length,a,f;while(d<i){if(b>=h){return -1}a=c.charCodeAt(d++);if(a===37){a=c.charAt(d++);f=v[a in f1?c.charAt(d++):a];if(!f||(b=f(g,e,b))<0){return -1}}else {if(a!=e.charCodeAt(b++)){return -1}}}return b}function parsePeriod(d,c,b){var a=t.exec(c.slice(b));return a?(d.p=p[a[0].toLowerCase()],b+a[0].length):-1}function parseShortWeekday(d,c,b){var a=n.exec(c.slice(b));return a?(d.w=l[a[0].toLowerCase()],b+a[0].length):-1}function parseWeekday(d,c,b){var a=s.exec(c.slice(b));return a?(d.w=o[a[0].toLowerCase()],b+a[0].length):-1}function parseShortMonth(d,c,b){var a=q.exec(c.slice(b));return a?(d.m=m[a[0].toLowerCase()],b+a[0].length):-1}function parseMonth(d,c,b){var a=u.exec(c.slice(b));return a?(d.m=r[a[0].toLowerCase()],b+a[0].length):-1}function parseLocaleDateTime(b,a,c){return parseSpecifier(b,i,a,c)}function parseLocaleDate(b,a,c){return parseSpecifier(b,j,a,c)}function parseLocaleTime(b,a,c){return parseSpecifier(b,k,a,c)}function formatShortWeekday(a){return d[a.getDay()]}function formatWeekday(a){return f[a.getDay()]}function formatShortMonth(a){return e[a.getMonth()]}function formatMonth(a){return h[a.getMonth()]}function formatPeriod(a){return g[+(a.getHours()>=12)]}function formatUTCShortWeekday(a){return d[a.getUTCDay()]}function formatUTCWeekday(a){return f[a.getUTCDay()]}function formatUTCShortMonth(a){return e[a.getUTCMonth()]}function formatUTCMonth(a){return h[a.getUTCMonth()]}function formatUTCPeriod(a){return g[+(a.getUTCHours()>=12)]}return {format:function(a){var b=newFormat(a+='',c);b.toString=function(){return a};return b},parse:function(a){var b=newParse(a+='',localDate);b.toString=function(){return a};return b},utcFormat:function(a){var c=newFormat(a+='',b);c.toString=function(){return a};return c},utcParse:function(a){var b=newParse(a,utcDate);b.toString=function(){return a};return b}}}var f1={'-':'','_':' ',0:'0'};var R=/^\s*\d+/;var iD=/^%/;var iF=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function pad(b,f,d){var e=b<0?'-':'',a=(e?-b:b)+'',c=a.length;return e+(c<d?(new Array(d-c+1)).join(f)+a:a)}function requote(a){return a.replace(iF,'\\$&')}function formatRe(a){return new RegExp('^(?:'+a.map(requote).join('|')+')','i')}function formatLookup(b){var c={},a=-1,d=b.length;while(++a<d){c[b[a].toLowerCase()]=a}return c}function parseWeekdayNumber(d,c,a){var b=R.exec(c.slice(a,a+1));return b?(d.w=+b[0],a+b[0].length):-1}function parseWeekNumberSunday(d,c,b){var a=R.exec(c.slice(b));return a?(d.U=+a[0],b+a[0].length):-1}function parseWeekNumberMonday(d,c,b){var a=R.exec(c.slice(b));return a?(d.W=+a[0],b+a[0].length):-1}function parseFullYear(d,c,a){var b=R.exec(c.slice(a,a+4));return b?(d.y=+b[0],a+b[0].length):-1}function parseYear(d,c,b){var a=R.exec(c.slice(b,b+2));return a?(d.y=+a[0]+(+a[0]>68?1900:2000),b+a[0].length):-1}function parseZone(d,c,b){var a=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(c.slice(b,b+6));return a?(d.Z=a[1]?0:-(a[2]+(a[3]||'00')),b+a[0].length):-1}function parseMonthNumber(d,c,a){var b=R.exec(c.slice(a,a+2));return b?(d.m=b[0]-1,a+b[0].length):-1}function parseDayOfMonth(d,c,a){var b=R.exec(c.slice(a,a+2));return b?(d.d=+b[0],a+b[0].length):-1}function parseDayOfYear(c,d,a){var b=R.exec(d.slice(a,a+3));return b?(c.m=0,c.d=+b[0],a+b[0].length):-1}function parseHour24(d,c,a){var b=R.exec(c.slice(a,a+2));return b?(d.H=+b[0],a+b[0].length):-1}function parseMinutes(d,c,a){var b=R.exec(c.slice(a,a+2));return b?(d.M=+b[0],a+b[0].length):-1}function parseSeconds(d,c,a){var b=R.exec(c.slice(a,a+2));return b?(d.S=+b[0],a+b[0].length):-1}function parseMilliseconds(d,c,a){var b=R.exec(c.slice(a,a+3));return b?(d.L=+b[0],a+b[0].length):-1}function parseLiteralPercent(d,c,a){var b=iD.exec(c.slice(a,a+1));return b?a+b[0].length:-1}function formatDayOfMonth(a,b){return pad(a.getDate(),b,2)}function formatHour24(a,b){return pad(a.getHours(),b,2)}function formatHour12(a,b){return pad(a.getHours()%12||12,b,2)}function formatDayOfYear(a,b){return pad(1+cB.count(aP(a),a),b,3)}function formatMilliseconds(a,b){return pad(a.getMilliseconds(),b,3)}function formatMonthNumber(a,b){return pad(a.getMonth()+1,b,2)}function formatMinutes(a,b){return pad(a.getMinutes(),b,2)}function formatSeconds(a,b){return pad(a.getSeconds(),b,2)}function formatWeekNumberSunday(a,b){return pad(bG.count(aP(a),a),b,2)}function formatWeekdayNumber(a){return a.getDay()}function formatWeekNumberMonday(a,b){return pad(dE.count(aP(a),a),b,2)}function formatYear(a,b){return pad(a.getFullYear()%100,b,2)}function formatFullYear(a,b){return pad(a.getFullYear()%10000,b,4)}function formatZone(b){var a=b.getTimezoneOffset();return (a>0?'-':(a*=-1,'+'))+pad(a/60|0,'0',2)+pad(a%60,'0',2)}function formatUTCDayOfMonth(a,b){return pad(a.getUTCDate(),b,2)}function formatUTCHour24(a,b){return pad(a.getUTCHours(),b,2)}function formatUTCHour12(a,b){return pad(a.getUTCHours()%12||12,b,2)}function formatUTCDayOfYear(a,b){return pad(1+cp.count(aL(a),a),b,3)}function formatUTCMilliseconds(a,b){return pad(a.getUTCMilliseconds(),b,3)}function formatUTCMonthNumber(a,b){return pad(a.getUTCMonth()+1,b,2)}function formatUTCMinutes(a,b){return pad(a.getUTCMinutes(),b,2)}function formatUTCSeconds(a,b){return pad(a.getUTCSeconds(),b,2)}function formatUTCWeekNumberSunday(a,b){return pad(bs.count(aL(a),a),b,2)}function formatUTCWeekdayNumber(a){return a.getUTCDay()}function formatUTCWeekNumberMonday(a,b){return pad(dk.count(aL(a),a),b,2)}function formatUTCYear(a,b){return pad(a.getUTCFullYear()%100,b,2)}function formatUTCFullYear(a,b){return pad(a.getUTCFullYear()%10000,b,4)}function formatUTCZone(){return '+0000'}function formatLiteralPercent(){return '%'}var aZ;defaultLocale$1({dateTime:'%x, %X',date:'%-m/%-d/%Y',time:'%-I:%M:%S %p',periods:['AM','PM'],days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']});function defaultLocale$1(b){aZ=formatLocale$1(b);a.timeFormat=aZ.format;a.timeParse=aZ.parse;a.utcFormat=aZ.utcFormat;a.utcParse=aZ.utcParse;return aZ}var ey='%Y-%m-%dT%H:%M:%S.%LZ';function formatIsoNative(a){return a.toISOString()}var ix=Date.prototype.toISOString?formatIsoNative:a.utcFormat(ey);function parseIsoNative(b){var a=new Date(b);return isNaN(a)?null:a}var i1=+new Date('2000-01-01T00:00:00.000Z')?parseIsoNative:a.utcParse(ey);var bf=1000;var be=bf*60;var bi=be*60;var bk=bi*24;var hI=bk*7;var eu=bk*30;var cX=bk*365;function date$1(a){return new Date(a)}function number$2(a){return a instanceof Date?+a:+new Date(+a)}function calendar(i,h,k,j,e,c,d,l,b){var a=continuous(deinterpolateLinear,w),u=a.invert,g=a.domain;var m=b('.%L'),o=b(':%S'),n=b('%I:%M'),q=b('%I %p'),t=b('%a %d'),r=b('%b %d'),p=b('%B'),s=b('%Y');var f=[[d,1,bf],[d,5,5*bf],[d,15,15*bf],[d,30,30*bf],[c,1,be],[c,5,5*be],[c,15,15*be],[c,30,30*be],[e,1,bi],[e,3,3*bi],[e,6,6*bi],[e,12,12*bi],[j,1,bk],[j,2,2*bk],[k,1,hI],[h,1,eu],[h,3,3*eu],[i,1,cX]];function c9(a){return (d(a)<a?m:c(a)<a?o:e(a)<a?n:j(a)<a?q:h(a)<a?k(a)<a?t:r:i(a)<a?p:s)(a)}function tickInterval(a,e,g,c){if(a==null){a=10}if(typeof a==='number'){var d=Math.abs(g-e)/a,b=dl(function(a){return a[2]}).right(f,d);if(b===f.length){c=tickStep(e/cX,g/cX,a);a=i}else {if(b){b=f[d/f[b-1][2]<f[b][2]/d?b-1:b];c=b[1];a=b[0]}else {c=tickStep(e,g,a);a=l}}}return c==null?a:a.every(c)}a.invert=function(a){return new Date(u(a))};a.domain=function(a){return arguments.length?g(dH.call(a,number$2)):g().map(date$1)};a.ticks=function(f,h){var d=g(),b=d[0],c=d[d.length-1],e=c<b,a;if(e){a=b,b=c,c=a}a=tickInterval(f,b,c,h);a=a?a.range(b,c+1):[];return e?a.reverse():a};a.tickFormat=function(c,a){return a==null?c9:b(a)};a.nice=function(c,d){var b=g();return (c=tickInterval(c,b[0],b[b.length-1],d))?g(f0(b,c)):a};a.copy=function(){return copy(a,calendar(i,h,k,j,e,c,d,l,b))};return a}var kh=function(){return calendar(aP,dK,bG,cB,dT,dD,bF,aE,a.timeFormat).domain([new Date(2000,0,1),new Date(2000,0,2)])};var jz=function(){return calendar(aL,dr,bs,cp,dA,dj,bF,aE,a.utcFormat).domain([Date.UTC(2000,0,1),Date.UTC(2000,0,2)])};var au=function(a){return a.match(/.{6}/g).map(function(a){return '#'+a})};var h4=au('1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf');var hV=au('393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6');var hW=au('3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9');var h5=au('1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5');var hY=bV(cubehelix(300,0.5,0),cubehelix(-240,0.5,1));var ki=bV(cubehelix(-100,0.75,0.35),cubehelix(80,1.5,0.8));var j5=bV(cubehelix(260,0.75,0.35),cubehelix(80,1.5,0.8));var cj=cubehelix();var iE=function(a){if(a<0||a>1){a-=Math.floor(a)}var b=Math.abs(a-0.5);cj.h=360*a-100;cj.s=1.5-1.5*b;cj.l=0.8-0.9*b;return cj+''};function ramp(a){var b=a.length;return function(c){return a[Math.max(0,Math.min(b-1,Math.floor(c*b)))]}}var jB=ramp(au('44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725'));var j$=ramp(au('00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf'));var jj=ramp(au('00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4'));var jK=ramp(au('0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921'));function sequential(b){var a=0,d=1,c=!1;function scale(f){var e=(f-a)/(d-a);return b(c?Math.max(0,Math.min(1,e)):e)}scale.domain=function(b){return arguments.length?(a=+b[0],d=+b[1],scale):[a,d]};scale.clamp=function(a){return arguments.length?(c=!!a,scale):c};scale.interpolator=function(a){return arguments.length?(b=a,scale):b};scale.copy=function(){return sequential(b).domain([a,d]).clamp(c)};return linearish(scale)}var f=function(a){return function bt(){return a}};var fM=Math.abs;var u=Math.atan2;var aN=Math.cos;var j_=Math.max;var dJ=Math.min;var ac=Math.sin;var a3=Math.sqrt;var t=1.0E-12;var aC=Math.PI;var ca=aC/2;var aB=2*aC;function acos$1(a){return a>1?0:a<-1?aC:Math.acos(a)}function asin$1(a){return a>=1?ca:a<=-1?-ca:Math.asin(a)}function arcInnerRadius(a){return a.innerRadius}function arcOuterRadius(a){return a.outerRadius}function arcStartAngle(a){return a.startAngle}function arcEndAngle(a){return a.endAngle}function arcPadAngle(a){return a&&a.padAngle}function intersect(a,b,j,l,g,h,k,m){var c=j-a,e=l-b,d=k-g,f=m-h,i=(d*(b-h)-f*(a-g))/(f*c-d*e);return [a+i*c,b+i*e]}function cornerTangents(B,D,C,E,q,r,F){var i=B-C,l=D-E,A=(F?r:-r)/a3(i*i+l*l),o=A*l,p=-A*i,k=B+o,n=D+p,j=C+o,m=E+p,y=(k+j)/2,z=(n+m)/2,b=j-k,a=m-n,d=b*b+a*a,h=q-r,c=k*m-j*n,g=(a<0?-1:1)*a3(j_(0,h*h*d-c*c)),e=(c*a-b*g)/d,f=(-c*b-a*g)/d,s=(c*a+b*g)/d,t=(-c*b+a*g)/d,u=e-y,w=f-z,v=s-y,x=t-z;if(u*u+w*w>v*v+x*x){e=s,f=t}return {cx:e,cy:f,x01:-o,y01:-p,x11:e*(q/h-1),y11:f*(q/h-1)}}var q=function(){var b=arcInnerRadius,c=arcOuterRadius,h=f(0),e=null,d=arcStartAngle,g=arcEndAngle,i=arcPadAngle,a=null;function q(){var J,V,k=+b.apply(this,arguments),l=+c.apply(this,arguments),n=d.apply(this,arguments)-ca,o=g.apply(this,arguments)-ca,G=fM(o-n),m=o>n;if(!a){a=J=path()}if(l<k){V=l,l=k,k=V}if(!(l>t)){a.moveTo(0,0)}else {if(G>aB-t){a.moveTo(l*aN(n),l*ac(n));a.arc(0,0,l,n,o,!m);if(k>t){a.moveTo(k*aN(o),k*ac(o));a.arc(0,0,k,o,n,m)}}else {var y=n,A=o,x=n,z=o,D=G,K=G,N=i.apply(this,arguments)/2,S=N>t&&(e?+e.apply(this,arguments):a3(k*k+l*l)),s=dJ(fM(l-k)/2,+h.apply(this,arguments)),p=s,q=s,f,j;if(S>t){var H=asin$1(S/k*ac(N)),I=asin$1(S/l*ac(N));if((D-=H*2)>t){H*=m?1:-1,x+=H,z-=H}else {D=0,x=z=(n+o)/2}if((K-=I*2)>t){I*=m?1:-1,y+=I,A-=I}else {K=0,y=A=(n+o)/2}}var v=l*aN(y),w=l*ac(y),B=k*aN(z),C=k*ac(z);if(s>t){var E=l*aN(A),F=l*ac(A),L=k*aN(x),M=k*ac(x);if(G<aC){var r=D>t?intersect(v,w,L,M,E,F,B,C):[B,C],O=v-r[0],P=w-r[1],Q=E-r[0],R=F-r[1],T=1/ac(acos$1((O*Q+P*R)/(a3(O*O+P*P)*a3(Q*Q+R*R)))/2),U=a3(r[0]*r[0]+r[1]*r[1]);p=dJ(s,(k-U)/(T-1));q=dJ(s,(l-U)/(T+1))}}if(!(K>t)){a.moveTo(v,w)}else {if(q>t){f=cornerTangents(L,M,v,w,l,q,m);j=cornerTangents(E,F,B,C,l,q,m);a.moveTo(f.cx+f.x01,f.cy+f.y01);if(q<s){a.arc(f.cx,f.cy,q,u(f.y01,f.x01),u(j.y01,j.x01),!m)}else {a.arc(f.cx,f.cy,q,u(f.y01,f.x01),u(f.y11,f.x11),!m);a.arc(0,0,l,u(f.cy+f.y11,f.cx+f.x11),u(j.cy+j.y11,j.cx+j.x11),!m);a.arc(j.cx,j.cy,q,u(j.y11,j.x11),u(j.y01,j.x01),!m)}}else {a.moveTo(v,w),a.arc(0,0,l,y,A,!m)}}if(!(k>t)||!(D>t)){a.lineTo(B,C)}else {if(p>t){f=cornerTangents(B,C,E,F,k,-p,m);j=cornerTangents(v,w,L,M,k,-p,m);a.lineTo(f.cx+f.x01,f.cy+f.y01);if(p<s){a.arc(f.cx,f.cy,p,u(f.y01,f.x01),u(j.y01,j.x01),!m)}else {a.arc(f.cx,f.cy,p,u(f.y01,f.x01),u(f.y11,f.x11),!m);a.arc(0,0,k,u(f.cy+f.y11,f.cx+f.x11),u(j.cy+j.y11,j.cx+j.x11),m);a.arc(j.cx,j.cy,p,u(j.y11,j.x11),u(j.y01,j.x01),!m)}}else {a.arc(0,0,k,z,x,m)}}}}a.closePath();if(J){return a=null,J+''||null}}q.centroid=function(){var e=(+b.apply(this,arguments)+ +c.apply(this,arguments))/2,a=(+d.apply(this,arguments)+ +g.apply(this,arguments))/2-aC/2;return [aN(a)*e,ac(a)*e]};q.innerRadius=function(a){return arguments.length?(b=typeof a==='function'?a:f(+a),q):b};q.outerRadius=function(a){return arguments.length?(c=typeof a==='function'?a:f(+a),q):c};q.cornerRadius=function(a){return arguments.length?(h=typeof a==='function'?a:f(+a),q):h};q.padRadius=function(a){return arguments.length?(e=a==null?null:typeof a==='function'?a:f(+a),q):e};q.startAngle=function(a){return arguments.length?(d=typeof a==='function'?a:f(+a),q):d};q.endAngle=function(a){return arguments.length?(g=typeof a==='function'?a:f(+a),q):g};q.padAngle=function(a){return arguments.length?(i=typeof a==='function'?a:f(+a),q):i};q.context=function(b){return arguments.length?(a=b==null?null:b,q):a};return q};function Linear(a){this._context=a}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1){this._context.closePath()}this._line=1-this._line},point:function(a,b){a=+a,b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._context.lineTo(a,b);break;}}};var bZ=function(a){return new Linear(a)};function x$3(a){return a[0]}function y$3(a){return a[1]}var E=function(){var e=x$3,g=y$3,d=f(!0),b=null,c=bZ,a=null;function E(h){var f,l=h.length,k,i=!1,j;if(b==null){a=c(j=path())}for(f=0;f<=l;++f){if(!(f<l&&d(k=h[f],f,h))===i){if(i=!i){a.lineStart()}else {a.lineEnd()}}if(i){a.point(+e(k,f,h),+g(k,f,h))}}if(j){return a=null,j+''||null}}E.x=function(a){return arguments.length?(e=typeof a==='function'?a:f(+a),E):e};E.y=function(a){return arguments.length?(g=typeof a==='function'?a:f(+a),E):g};E.defined=function(a){return arguments.length?(d=typeof a==='function'?a:f(!!a),E):d};E.curve=function(d){return arguments.length?(c=d,b!=null&&(a=c(b)),E):c};E.context=function(d){return arguments.length?(d==null?b=a=null:a=c(b=d),E):b};return E};var fD=function(){var c=x$3,g=null,d=f(0),h=y$3,i=f(!0),b=null,e=bZ,a=null;function l(j){var f,r,l,n=j.length,k,m=!1,o,p=new Array(n),q=new Array(n);if(b==null){a=e(o=path())}for(f=0;f<=n;++f){if(!(f<n&&i(k=j[f],f,j))===m){if(m=!m){r=f;a.areaStart();a.lineStart()}else {a.lineEnd();a.lineStart();for(l=f-1;l>=r;--l){a.point(p[l],q[l])}a.lineEnd();a.areaEnd()}}if(m){p[f]=+c(k,f,j),q[f]=+d(k,f,j);a.point(g?+g(k,f,j):p[f],h?+h(k,f,j):q[f])}}if(o){return a=null,o+''||null}}function arealine(){return E().defined(i).curve(e).context(b)}l.x=function(a){return arguments.length?(c=typeof a==='function'?a:f(+a),g=null,l):c};l.x0=function(a){return arguments.length?(c=typeof a==='function'?a:f(+a),l):c};l.x1=function(a){return arguments.length?(g=a==null?null:typeof a==='function'?a:f(+a),l):g};l.y=function(a){return arguments.length?(d=typeof a==='function'?a:f(+a),h=null,l):d};l.y0=function(a){return arguments.length?(d=typeof a==='function'?a:f(+a),l):d};l.y1=function(a){return arguments.length?(h=a==null?null:typeof a==='function'?a:f(+a),l):h};l.lineX0=l.lineY0=function(){return arealine().x(c).y(d)};l.lineY1=function(){return arealine().x(c).y(h)};l.lineX1=function(){return arealine().x(g).y(d)};l.defined=function(a){return arguments.length?(i=typeof a==='function'?a:f(!!a),l):i};l.curve=function(c){return arguments.length?(e=c,b!=null&&(a=e(b)),l):e};l.context=function(c){return arguments.length?(c==null?b=a=null:a=e(b=c),l):b};return l};var hG=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};var ie=function(a){return a};var F=function(){var g=ie,a=hG,b=null,c=f(0),d=f(aB),e=f(0);function F(i){var f,j=i.length,n,s,o=0,l=new Array(j),h=new Array(j),m=+c.apply(this,arguments),q=Math.min(aB,Math.max(-aB,d.apply(this,arguments)-m)),p,t=Math.min(Math.abs(q)/j,e.apply(this,arguments)),r=t*(q<0?-1:1),k;for(f=0;f<j;++f){if((k=h[l[f]=f]=+g(i[f],f,i))>0){o+=k}}if(a!=null){l.sort(function(b,c){return a(h[b],h[c])})}else {if(b!=null){l.sort(function(a,c){return b(i[a],i[c])})}}for(f=0,s=o?(q-j*r)/o:0;f<j;++f,m=p){n=l[f],k=h[n],p=m+(k>0?k*s:0)+r,h[n]={data:i[n],index:f,value:k,startAngle:m,endAngle:p,padAngle:t}}return h}F.value=function(a){return arguments.length?(g=typeof a==='function'?a:f(+a),F):g};F.sortValues=function(c){return arguments.length?(a=c,b=null,F):a};F.sort=function(c){return arguments.length?(b=c,a=null,F):b};F.startAngle=function(a){return arguments.length?(c=typeof a==='function'?a:f(+a),F):c};F.endAngle=function(a){return arguments.length?(d=typeof a==='function'?a:f(+a),F):d};F.padAngle=function(a){return arguments.length?(e=typeof a==='function'?a:f(+a),F):e};return F};var eg=curveRadial(bZ);function Radial(a){this._curve=a}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,b){this._curve.point(b*Math.sin(a),b*-Math.cos(a))}};function curveRadial(a){function radial(b){return new Radial(a(b))}radial._curve=a;return radial}function radialLine(a){var b=a.curve;a.angle=a.x,delete a.x;a.radius=a.y,delete a.y;a.curve=function(a){return arguments.length?b(curveRadial(a)):b()._curve};return a}var hM=function(){return radialLine(E().curve(eg))};var ij=function(){var a=fD().curve(eg),b=a.curve,c=a.lineX0,d=a.lineX1,e=a.lineY0,f=a.lineY1;a.angle=a.x,delete a.x;a.startAngle=a.x0,delete a.x0;a.endAngle=a.x1,delete a.x1;a.radius=a.y,delete a.y;a.innerRadius=a.y0,delete a.y0;a.outerRadius=a.y1,delete a.y1;a.lineStartAngle=function(){return radialLine(c())},delete a.lineX0;a.lineEndAngle=function(){return radialLine(d())},delete a.lineX1;a.lineInnerRadius=function(){return radialLine(e())},delete a.lineY0;a.lineOuterRadius=function(){return radialLine(f())},delete a.lineY1;a.curve=function(a){return arguments.length?b(curveRadial(a)):b()._curve};return a};var dm={draw:function(a,c){var b=Math.sqrt(c/aC);a.moveTo(b,0);a.arc(0,0,b,0,aB)}};var fm={draw:function(b,c){var a=Math.sqrt(c/5)/2;b.moveTo(-3*a,-a);b.lineTo(-a,-a);b.lineTo(-a,-3*a);b.lineTo(a,-3*a);b.lineTo(a,-a);b.lineTo(3*a,-a);b.lineTo(3*a,a);b.lineTo(a,a);b.lineTo(a,3*a);b.lineTo(-a,3*a);b.lineTo(-a,a);b.lineTo(-3*a,a);b.closePath()}};var fU=Math.sqrt(1/3);var jv=fU*2;var fq={draw:function(a,d){var b=Math.sqrt(d/jv),c=b*fU;a.moveTo(0,-b);a.lineTo(c,0);a.lineTo(0,b);a.lineTo(-c,0);a.closePath()}};var kD=0.8908130915292852;var gj=Math.sin(aC/10)/Math.sin(7*aC/10);var kE=Math.sin(aB/10)*gj;var kF=-Math.cos(aB/10)*gj;var f4={draw:function(a,i){var b=Math.sqrt(i*kD),f=kE*b,g=kF*b;a.moveTo(0,-b);a.lineTo(f,g);for(var d=1;d<5;++d){var h=aB*d/5,c=Math.cos(h),e=Math.sin(h);a.lineTo(e*b,-c*b);a.lineTo(c*f-e*g,e*f+c*g)}a.closePath()}};var fK={draw:function(c,d){var a=Math.sqrt(d),b=-a/2;c.rect(b,b,a,a)}};var dL=Math.sqrt(3);var fe={draw:function(b,c){var a=-Math.sqrt(c/(dL*3));b.moveTo(0,a*2);b.lineTo(-dL*a,-a);b.lineTo(dL*a,-a);b.closePath()}};var U=-0.5;var V=Math.sqrt(3)/2;var ea=1/Math.sqrt(12);var kI=(ea/2+1)*3;var gb={draw:function(a,i){var h=Math.sqrt(i/kI),b=h/2,f=h*ea,c=b,d=h*ea+h,e=-c,g=d;a.moveTo(b,f);a.lineTo(c,d);a.lineTo(e,g);a.lineTo(U*b-V*f,V*b+U*f);a.lineTo(U*c-V*d,V*c+U*d);a.lineTo(U*e-V*g,V*e+U*g);a.lineTo(U*b+V*f,U*f-V*b);a.lineTo(U*c+V*d,U*d-V*c);a.lineTo(U*e+V*g,U*g-V*e);a.closePath()}};var ju=[dm,fm,fq,fK,f4,fe,gb];var ao=function(){var c=f(dm),b=f(64),a=null;function ao(){var d;if(!a){a=d=path()}c.apply(this,arguments).draw(a,+b.apply(this,arguments));if(d){return a=null,d+''||null}}ao.type=function(a){return arguments.length?(c=typeof a==='function'?a:f(a),ao):c};ao.size=function(a){return arguments.length?(b=typeof a==='function'?a:f(+a),ao):b};ao.context=function(b){return arguments.length?(a=b==null?null:b,ao):a};return ao};var aw=function(){};function point$2(a,b,c){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+c)/6)}function Basis(a){this._context=a}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break;}if(this._line||this._line!==0&&this._point===1){this._context.closePath()}this._line=1-this._line},point:function(a,b){a=+a,b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,a,b);break;}this._x0=this._x1,this._x1=a;this._y0=this._y1,this._y1=b}};var i9=function(a){return new Basis(a)};function BasisClosed(a){this._context=a}BasisClosed.prototype={areaStart:aw,areaEnd:aw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4);break;}},point:function(a,b){a=+a,b=+b;switch(this._point){case 0:this._point=1;this._x2=a,this._y2=b;break;case 1:this._point=2;this._x3=a,this._y3=b;break;case 2:this._point=3;this._x4=a,this._y4=b;this._context.moveTo((this._x0+4*this._x1+a)/6,(this._y0+4*this._y1+b)/6);break;default:point$2(this,a,b);break;}this._x0=this._x1,this._x1=a;this._y0=this._y1,this._y1=b}};var hq=function(a){return new BasisClosed(a)};function BasisOpen(a){this._context=a}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3){this._context.closePath()}this._line=1-this._line},point:function(a,b){a=+a,b=+b;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+a)/6,d=(this._y0+4*this._y1+b)/6;this._line?this._context.lineTo(c,d):this._context.moveTo(c,d);break;case 3:this._point=4;default:point$2(this,a,b);break;}this._x0=this._x1,this._x1=a;this._y0=this._y1,this._y1=b}};var iu=function(a){return new BasisOpen(a)};function Bundle(a,b){this._basis=new Basis(a);this._beta=b}Bundle.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var c=this._x,e=this._y,a=c.length-1;if(a>0){var f=c[0],g=e[0],h=c[a]-f,i=e[a]-g,b=-1,d;while(++b<=a){d=b/a;this._basis.point(this._beta*c[b]+(1-this._beta)*(f+d*h),this._beta*e[b]+(1-this._beta)*(g+d*i))}}this._x=this._y=null;this._basis.lineEnd()},point:function(a,b){this._x.push(+a);this._y.push(+b)}};var cm=function custom(a){function cm(b){return a===1?new Basis(b):new Bundle(b,a)}cm.beta=function(a){return custom(+a)};return cm}(0.85);function point$3(a,b,c){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-b),a._y2+a._k*(a._y1-c),a._x2,a._y2)}function Cardinal(a,b){this._context=a;this._k=(1-b)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1);break;}if(this._line||this._line!==0&&this._point===1){this._context.closePath()}this._line=1-this._line},point:function(a,b){a=+a,b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;this._x1=a,this._y1=b;break;case 2:this._point=3;default:point$3(this,a,b);break;}this._x0=this._x1,this._x1=this._x2,this._x2=a;this._y0=this._y1,this._y1=this._y2,this._y2=b}};var ab=function custom(a){function ab(b){return new Cardinal(b,a)}ab.tension=function(a){return custom(+a)};return ab}(0);function CardinalClosed(a,b){this._context=a;this._k=(1-b)/6}CardinalClosed.prototype={areaStart:aw,areaEnd:aw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break;}},point:function(a,b){a=+a,b=+b;switch(this._point){case 0:this._point=1;this._x3=a,this._y3=b;break;case 1:this._point=2;this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3;this._x5=a,this._y5=b;break;default:point$3(this,a,b);break;}this._x0=this._x1,this._x1=this._x2,this._x2=a;this._y0=this._y1,this._y1=this._y2,this._y2=b}};var g8=function custom(a){function ab(b){return new CardinalClosed(b,a)}ab.tension=function(a){return custom(+a)};return ab}(0);function CardinalOpen(a,b){this._context=a;this._k=(1-b)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3){this._context.closePath()}this._line=1-this._line},point:function(a,b){a=+a,b=+b;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,a,b);break;}this._x0=this._x1,this._x1=this._x2,this._x2=a;this._y0=this._y1,this._y1=this._y2,this._y2=b}};var hE=function custom(a){function ab(b){return new CardinalOpen(b,a)}ab.tension=function(a){return custom(+a)};return ab}(0);function point$4(a,j,k){var b=a._x1,d=a._y1,c=a._x2,e=a._y2;if(a._l01_a>t){var f=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,i=3*a._l01_a*(a._l01_a+a._l12_a);b=(b*f-a._x0*a._l12_2a+a._x2*a._l01_2a)/i;d=(d*f-a._y0*a._l12_2a+a._y2*a._l01_2a)/i}if(a._l23_a>t){var g=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,h=3*a._l23_a*(a._l23_a+a._l12_a);c=(c*g+a._x1*a._l23_2a-j*a._l12_2a)/h;e=(e*g+a._y1*a._l23_2a-k*a._l12_2a)/h}a._context.bezierCurveTo(b,d,c,e,a._x2,a._y2)}function CatmullRom(a,b){this._context=a;this._alpha=b}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break;}if(this._line||this._line!==0&&this._point===1){this._context.closePath()}this._line=1-this._line},point:function(a,b){a=+a,b=+b;if(this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3;default:point$4(this,a,b);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=a;this._y0=this._y1,this._y1=this._y2,this._y2=b}};var aa=function custom(a){function aa(b){return a?new CatmullRom(b,a):new Cardinal(b,0)}aa.alpha=function(a){return custom(+a)};return aa}(0.5);function CatmullRomClosed(a,b){this._context=a;this._alpha=b}CatmullRomClosed.prototype={areaStart:aw,areaEnd:aw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break;}},point:function(a,b){a=+a,b=+b;if(this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=a,this._y3=b;break;case 1:this._point=2;this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3;this._x5=a,this._y5=b;break;default:point$4(this,a,b);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=a;this._y0=this._y1,this._y1=this._y2,this._y2=b}};var gG=function custom(a){function aa(b){return a?new CatmullRomClosed(b,a):new CardinalClosed(b,0)}aa.alpha=function(a){return custom(+a)};return aa}(0.5);function CatmullRomOpen(a,b){this._context=a;this._alpha=b}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3){this._context.closePath()}this._line=1-this._line},point:function(a,b){a=+a,b=+b;if(this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$4(this,a,b);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=a;this._y0=this._y1,this._y1=this._y2,this._y2=b}};var g9=function custom(a){function aa(b){return a?new CatmullRomOpen(b,a):new CardinalOpen(b,0)}aa.alpha=function(a){return custom(+a)};return aa}(0.5);function LinearClosed(a){this._context=a}LinearClosed.prototype={areaStart:aw,areaEnd:aw,lineStart:function(){this._point=0},lineEnd:function(){if(this._point){this._context.closePath()}},point:function(a,b){a=+a,b=+b;if(this._point){this._context.lineTo(a,b)}else {this._point=1,this._context.moveTo(a,b)}}};var hK=function(a){return new LinearClosed(a)};function sign$1(a){return a<0?-1:1}function slope3(a,f,g){var b=a._x1-a._x0,c=f-a._x1,d=(a._y1-a._y0)/(b||c<0&&-0),e=(g-a._y1)/(c||b<0&&-0),h=(d*c+e*b)/(b+c);return (sign$1(d)+sign$1(e))*Math.min(Math.abs(d),Math.abs(e),0.5*Math.abs(h))||0}function slope2(a,c){var b=a._x1-a._x0;return b?(3*(a._y1-a._y0)/b-c)/2:c}function point$5(a,f,g){var d=a._x0,h=a._y0,c=a._x1,e=a._y1,b=(c-d)/3;a._context.bezierCurveTo(d+b,h+b*f,c-b,e-b*g,c,e)}function MonotoneX(a){this._context=a}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$5(this,this._t0,slope2(this,this._t0));break;}if(this._line||this._line!==0&&this._point===1){this._context.closePath()}this._line=1-this._line},point:function(a,b){var c=NaN;a=+a,b=+b;if(a===this._x1&&b===this._y1){return}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3;point$5(this,slope2(this,c=slope3(this,a,b)),c);break;default:point$5(this,this._t0,c=slope3(this,a,b));break;}this._x0=this._x1,this._x1=a;this._y0=this._y1,this._y1=b;this._t0=c}};function MonotoneY(a){this._context=new ReflectContext(a)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(a,b){MonotoneX.prototype.point.call(this,b,a)};function ReflectContext(a){this._context=a}ReflectContext.prototype={moveTo:function(a,b){this._context.moveTo(b,a)},closePath:function(){this._context.closePath()},lineTo:function(a,b){this._context.lineTo(b,a)},bezierCurveTo:function(a,c,b,d,e,f){this._context.bezierCurveTo(c,a,d,b,f,e)}};function monotoneX(a){return new MonotoneX(a)}function monotoneY(a){return new MonotoneY(a)}function Natural(a){this._context=a}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var a=this._x,c=this._y,e=a.length;if(e){this._line?this._context.lineTo(a[0],c[0]):this._context.moveTo(a[0],c[0]);if(e===2){this._context.lineTo(a[1],c[1])}else {var f=controlPoints(a),g=controlPoints(c);for(var b=0,d=1;d<e;++b,++d){this._context.bezierCurveTo(f[0][b],g[0][b],f[1][b],g[1][b],a[d],c[d])}}}if(this._line||this._line!==0&&e===1){this._context.closePath()}this._line=1-this._line;this._x=this._y=null},point:function(a,b){this._x.push(+a);this._y.push(+b)}};function controlPoints(e){var a,b=e.length-1,g,c=new Array(b),d=new Array(b),f=new Array(b);c[0]=0,d[0]=2,f[0]=e[0]+2*e[1];for(a=1;a<b-1;++a){c[a]=1,d[a]=4,f[a]=4*e[a]+2*e[a+1]}c[b-1]=2,d[b-1]=7,f[b-1]=8*e[b-1]+e[b];for(a=1;a<b;++a){g=c[a]/d[a-1],d[a]-=g,f[a]-=g*f[a-1]}c[b-1]=f[b-1]/d[b-1];for(a=b-2;a>=0;--a){c[a]=(f[a]-c[a+1])/d[a]}d[b-1]=(e[b]+c[b-1])/2;for(a=0;a<b-1;++a){d[a]=2*e[a+1]-c[a+1]}return [c,d]}var jm=function(a){return new Natural(a)};function Step(a,b){this._context=a;this._t=b}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){if(0<this._t&&this._t<1&&this._point===2){this._context.lineTo(this._x,this._y)}if(this._line||this._line!==0&&this._point===1){this._context.closePath()}if(this._line>=0){this._t=1-this._t,this._line=1-this._line}},point:function(b,a){b=+b,a=+a;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;default:if(this._t<=0){this._context.lineTo(this._x,a);this._context.lineTo(b,a)}else {var c=this._x*(1-this._t)+b*this._t;this._context.lineTo(c,this._y);this._context.lineTo(c,a)};break;}this._x=b,this._y=a}};var cx=function(a){return new Step(a,0.5)};function stepBefore(a){return new Step(a,0)}function stepAfter(a){return new Step(a,1)}var fy=Array.prototype.slice;var a1=function(d,f){if(!((g=d.length)>1)){return}for(var e=1,c,b=d[f[0]],g,h=b.length;e<g;++e){c=b,b=d[f[e]];for(var a=0;a<h;++a){b[a][1]+=b[a][0]=isNaN(c[a][1])?c[a][0]:c[a][1]}}};var a2=function(c){var a=c.length,b=new Array(a);while(--a>=0){b[a]=a}return b};function stackValue(b,a){return b[a]}var $=function(){var d=f([]),b=a2,a=a1,c=stackValue;function $(h){var m=d.apply(this,arguments),e,o=h.length,j=m.length,g=new Array(j),i;for(e=0;e<j;++e){for(var l=m[e],n=g[e]=new Array(o),f=0,k;f<o;++f){n[f]=k=[0,+c(h[f],l,f,h)];k.data=h[f]}n.key=l}for(e=0,i=b(g);e<j;++e){g[i[e]].index=e}a(g,i);return g}$.keys=function(a){return arguments.length?(d=typeof a==='function'?a:f(fy.call(a)),$):d};$.value=function(a){return arguments.length?(c=typeof a==='function'?a:f(+a),$):c};$.order=function(a){return arguments.length?(b=a==null?a2:typeof a==='function'?a:f(fy.call(a)),$):b};$.offset=function(b){return arguments.length?(a=b==null?a1:b,$):a};return $};var jG=function(b,f){if(!((e=b.length)>0)){return}for(var a,e,c=0,g=b[0].length,d;c<g;++c){for(d=a=0;a<e;++a){d+=b[a][c][1]||0}if(d){for(a=0;a<e;++a){b[a][c][1]/=d}}}a1(b,f)};var ik=function(b,e){if(!((f=b.length)>0)){return}for(var a=0,c=b[e[0]],f,h=c.length;a<h;++a){for(var d=0,g=0;d<f;++d){g+=b[d][a][1]||0}c[a][1]+=c[a][0]=-g/2}a1(b,e)};var jT=function(b,d){if(!((o=b.length)>0)||!((n=(c=b[d[0]]).length)>0)){return}for(var i=0,a=1,c,n,o;a<n;++a){for(var e=0,g=0,j=0;e<o;++e){var l=b[d[e]],f=l[a][1]||0,p=l[a-1][1]||0,k=(f-p)/2;for(var h=0;h<e;++h){var m=b[d[h]],q=m[a][1]||0,r=m[a-1][1]||0;k+=q-r}g+=f,j+=k*f}c[a-1][1]+=c[a-1][0]=i;if(g){i-=j/g}}c[a-1][1]+=c[a-1][0]=i;a1(b,d)};var eB=function(a){var b=a.map(sum$2);return a2(a).sort(function(a,c){return b[a]-b[c]})};function sum$2(a){var c=0,b=-1,e=a.length,d;while(++b<e){if(d=+a[b][1]){c+=d}}return c}var hH=function(a){return eB(a).reverse()};var iy=function(d){var j=d.length,c,a,b=d.map(sum$2),i=a2(d).sort(function(a,c){return b[c]-b[a]}),h=0,f=0,g=[],e=[];for(c=0;c<j;++c){a=i[c];if(h<f){h+=b[a];g.push(a)}else {f+=b[a];e.push(a)}}return e.reverse().concat(g)};var jq=function(a){return a2(a).reverse()};var eE=function(a){return function(){return a}};function x$4(a){return a[0]}function y$4(a){return a[1]}function RedBlackTree(){this._=null}function RedBlackNode(a){a.U=a.C=a.L=a.R=a.P=a.N=null}RedBlackTree.prototype={constructor:RedBlackTree,insert:function(a,c){var b,d,e;if(a){c.P=a;c.N=a.N;if(a.N){a.N.P=c}a.N=c;if(a.R){a=a.R;while(a.L){a=a.L}a.L=c}else {a.R=c}b=a}else {if(this._){a=RedBlackFirst(this._);c.P=null;c.N=a;a.P=a.L=c;b=a}else {c.P=c.N=null;this._=c;b=null}}c.L=c.R=null;c.U=b;c.C=!0;a=c;while(b&&b.C){d=b.U;if(b===d.L){e=d.R;if(e&&e.C){b.C=e.C=!1;d.C=!0;a=d}else {if(a===b.R){RedBlackRotateLeft(this,b);a=b;b=a.U}b.C=!1;d.C=!0;RedBlackRotateRight(this,d)}}else {e=d.L;if(e&&e.C){b.C=e.C=!1;d.C=!0;a=d}else {if(a===b.L){RedBlackRotateRight(this,b);a=b;b=a.U}b.C=!1;d.C=!0;RedBlackRotateLeft(this,d)}}b=a.U}this._.C=!1},remove:function(b){if(b.N){b.N.P=b.P}if(b.P){b.P.N=b.N}b.N=b.P=null;var c=b.U,a,f=b.L,e=b.R,d,g;if(!f){d=e}else {if(!e){d=f}else {d=RedBlackFirst(e)}}if(c){if(c.L===b){c.L=d}else {c.R=d}}else {this._=d}if(f&&e){g=d.C;d.C=b.C;d.L=f;f.U=d;if(d!==e){c=d.U;d.U=b.U;b=d.R;c.L=b;d.R=e;e.U=d}else {d.U=c;c=d;b=d.R}}else {g=b.C;b=d}if(b){b.U=c}if(g){return}if(b&&b.C){b.C=!1;return}do{if(b===this._){break}if(b===c.L){a=c.R;if(a.C){a.C=!1;c.C=!0;RedBlackRotateLeft(this,c);a=c.R}if(a.L&&a.L.C||a.R&&a.R.C){if(!a.R||!a.R.C){a.L.C=!1;a.C=!0;RedBlackRotateRight(this,a);a=c.R}a.C=c.C;c.C=a.R.C=!1;RedBlackRotateLeft(this,c);b=this._;break}}else {a=c.L;if(a.C){a.C=!1;c.C=!0;RedBlackRotateRight(this,c);a=c.L}if(a.L&&a.L.C||a.R&&a.R.C){if(!a.L||!a.L.C){a.R.C=!1;a.C=!0;RedBlackRotateLeft(this,a);a=c.L}a.C=c.C;c.C=a.L.C=!1;RedBlackRotateRight(this,c);b=this._;break}}a.C=!0;b=c;c=c.U}while(!b.C);if(b){b.C=!1}}};function RedBlackRotateLeft(e,d){var a=d,b=d.R,c=a.U;if(c){if(c.L===a){c.L=b}else {c.R=b}}else {e._=b}b.U=c;a.U=b;a.R=b.L;if(a.R){a.R.U=a}b.L=a}function RedBlackRotateRight(e,d){var a=d,b=d.L,c=a.U;if(c){if(c.L===a){c.L=b}else {c.R=b}}else {e._=b}b.U=c;a.U=b;a.L=b.R;if(a.L){a.L.U=a}b.R=a}function RedBlackFirst(a){while(a.L){a=a.L}return a}function createEdge(c,b,e,f){var a=[null,null],d=v.push(a)-1;a.left=c;a.right=b;if(e){setEdgeEnd(a,c,b,e)}if(f){setEdgeEnd(a,b,c,f)}N[c.index].halfedges.push(d);N[b.index].halfedges.push(d);return a}function createBorderEdge(b,c,d){var a=[c,d];a.left=b;return a}function setEdgeEnd(a,d,c,b){if(!a[0]&&!a[1]){a[0]=b;a.left=d;a.right=c}else {if(a.left===c){a[1]=b}else {a[0]=b}}}function clipEdge(h,m,o,n,p){var i=h[0],j=h[1],f=i[0],g=i[1],k=j[0],l=j[1],b=0,c=1,d=k-f,e=l-g,a;a=m-f;if(!d&&a>0){return}a/=d;if(d<0){if(a<b){return}if(a<c){c=a}}else {if(d>0){if(a>c){return}if(a>b){b=a}}}a=n-f;if(!d&&a<0){return}a/=d;if(d<0){if(a>c){return}if(a>b){b=a}}else {if(d>0){if(a<b){return}if(a<c){c=a}}}a=o-g;if(!e&&a>0){return}a/=e;if(e<0){if(a<b){return}if(a<c){c=a}}else {if(e>0){if(a>c){return}if(a>b){b=a}}}a=p-g;if(!e&&a<0){return}a/=e;if(e<0){if(a>c){return}if(a>b){b=a}}else {if(e>0){if(a<b){return}if(a<c){c=a}}}if(!(b>0)&&!(c<1)){return !0}if(b>0){h[0]=[f+b*d,g+b*e]}if(c<1){h[1]=[f+c*d,g+c*e]}return !0}function connectEdge(h,i,e,j,f){var d=h[1];if(d){return !0}var a=h[0],p=h.left,o=h.right,k=p[0],l=p[1],m=o[0],n=o[1],g=(k+m)/2,q=(l+n)/2,b,c;if(n===l){if(g<i||g>=j){return}if(k>m){if(!a){a=[g,e]}else {if(a[1]>=f){return}}d=[g,f]}else {if(!a){a=[g,f]}else {if(a[1]<e){return}}d=[g,e]}}else {b=(k-m)/(n-l);c=q-b*g;if(b<-1||b>1){if(k>m){if(!a){a=[(e-c)/b,e]}else {if(a[1]>=f){return}}d=[(f-c)/b,f]}else {if(!a){a=[(f-c)/b,f]}else {if(a[1]<e){return}}d=[(e-c)/b,e]}}else {if(l<n){if(!a){a=[i,b*i+c]}else {if(a[0]>=j){return}}d=[j,b*j+c]}else {if(!a){a=[j,b*j+c]}else {if(a[0]<i){return}}d=[i,b*i+c]}}}h[0]=a;h[1]=d;return !0}function clipEdges(c,e,d,f){var b=v.length,a;while(b--){if(!connectEdge(a=v[b],c,e,d,f)||!clipEdge(a,c,e,d,f)||!(Math.abs(a[0][0]-a[1][0])>i||Math.abs(a[0][1]-a[1][1])>i)){delete v[b]}}}function createCell(a){return N[a.index]={site:a,halfedges:[]}}function cellHalfedgeAngle(e,c){var d=e.site,a=c.left,b=c.right;if(d===b){b=a,a=d}if(b){return Math.atan2(b[1]-a[1],b[0]-a[0])}if(d===a){a=c[1],b=c[0]}else {a=c[0],b=c[1]}return Math.atan2(a[0]-b[0],b[1]-a[1])}function cellHalfedgeStart(b,a){return a[+(a.left!==b.site)]}function cellHalfedgeEnd(b,a){return a[+(a.left===b.site)]}function sortCellHalfedges(){for(var g=0,h=N.length,f,d,a,b;g<h;++g){if((f=N[g])&&(b=(d=f.halfedges).length)){var e=new Array(b),c=new Array(b);for(a=0;a<b;++a){e[a]=a,c[a]=cellHalfedgeAngle(f,v[d[a]])}e.sort(function(a,b){return c[b]-c[a]});for(a=0;a<b;++a){c[a]=d[e[a]]}for(a=0;a<b;++a){d[a]=c[a]}}}}function clipCells(f,g,j,k){var r=N.length,a,b,d,c,e,p,s,l,m,q,n,o,h=!0;for(a=0;a<r;++a){if(b=N[a]){d=b.site;e=b.halfedges;c=e.length;while(c--){if(!v[e[c]]){e.splice(c,1)}}c=0,p=e.length;while(c<p){q=cellHalfedgeEnd(b,v[e[c]]),n=q[0],o=q[1];s=cellHalfedgeStart(b,v[e[++c%p]]),l=s[0],m=s[1];if(Math.abs(n-l)>i||Math.abs(o-m)>i){e.splice(c,0,v.push(createBorderEdge(d,q,Math.abs(n-f)<i&&k-o>i?[f,Math.abs(l-f)<i?m:k]:Math.abs(o-k)<i&&j-n>i?[Math.abs(m-k)<i?l:j,k]:Math.abs(n-j)<i&&o-g>i?[j,Math.abs(l-j)<i?m:g]:Math.abs(o-g)<i&&n-f>i?[Math.abs(m-g)<i?l:f,g]:null))-1);++p}}if(p){h=!1}}}if(h){var u,w,t,B=Infinity;for(a=0,h=null;a<r;++a){if(b=N[a]){d=b.site;u=d[0]-f;w=d[1]-g;t=u*u+w*w;if(t<B){B=t,h=b}}}if(h){var x=[f,g],y=[f,k],A=[j,k],z=[j,g];h.halfedges.push(v.push(createBorderEdge(d=h.site,x,y))-1,v.push(createBorderEdge(d,y,A))-1,v.push(createBorderEdge(d,A,z))-1,v.push(createBorderEdge(d,z,x))-1)}}for(a=0;a<r;++a){if(b=N[a]){if(!b.halfedges.length){delete N[a]}}}}var eK=[];var cZ;function Circle(){RedBlackNode(this);this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(c){var q=c.P,r=c.N;if(!q||!r){return}var j=q.site,i=c.site,k=r.site;if(j===k){return}var l=i[0],m=i[1],e=j[0]-l,f=j[1]-m,g=k[0]-l,h=k[1]-m;var n=2*(e*h-f*g);if(n>=-ic){return}var s=e*e+f*f,t=g*g+h*h,o=(h*s-f*t)/n,p=(e*t-g*s)/n;var b=eK.pop()||new Circle();b.arc=c;b.site=i;b.x=o+l;b.y=(b.cy=p+m)+Math.sqrt(o*o+p*p);c.circle=b;var d=null,a=bz._;while(a){if(b.y<a.y||b.y===a.y&&b.x<=a.x){if(a.L){a=a.L}else {d=a.P;break}}else {if(a.R){a=a.R}else {d=a;break}}}bz.insert(d,b);if(!d){cZ=b}}function detachCircle(b){var a=b.circle;if(a){if(!a.P){cZ=a.N}bz.remove(a);eK.push(a);RedBlackNode(a);b.circle=null}}var eW=[];function Beach(){RedBlackNode(this);this.edge=this.site=this.circle=null}function createBeach(b){var a=eW.pop()||new Beach();a.site=b;return a}function detachBeach(a){detachCircle(a);a$.remove(a);eW.push(a);RedBlackNode(a)}function removeBeach(d){var k=d.circle,h=k.x,j=k.cy,l=[h,j],f=d.P,g=d.N,c=[d];detachBeach(d);var b=f;while(b.circle&&Math.abs(h-b.circle.x)<i&&Math.abs(j-b.circle.cy)<i){f=b.P;c.unshift(b);detachBeach(b);b=f}c.unshift(b);detachCircle(b);var a=g;while(a.circle&&Math.abs(h-a.circle.x)<i&&Math.abs(j-a.circle.cy)<i){g=a.N;c.push(a);detachBeach(a);a=g}c.push(a);detachCircle(a);var m=c.length,e;for(e=1;e<m;++e){a=c[e];b=c[e-1];setEdgeEnd(a.edge,b.site,a.site,l)}b=c[0];a=c[m-1];a.edge=createEdge(b.site,a.site,null,l);attachCircle(b);attachCircle(a)}function addBeach(d){var v=d[0],r=d[1],a,b,n,o,c=a$._;while(c){n=leftBreakPoint(c,r)-v;if(n>i){c=c.L}else {o=v-rightBreakPoint(c,r);if(o>i){if(!c.R){a=c;break}c=c.R}else {if(n>-i){a=c.P;b=c}else {if(o>-i){a=c;b=c.N}else {a=b=c}}break}}}createCell(d);var e=createBeach(d);a$.insert(a,e);if(!a&&!b){return}if(a===b){detachCircle(a);b=createBeach(a.site);a$.insert(e,b);e.edge=b.edge=createEdge(a.site,e.site);attachCircle(a);attachCircle(b);return}if(!b){e.edge=createEdge(a.site,e.site);return}detachCircle(a);detachCircle(b);var f=a.site,p=f[0],q=f[1],h=d[0]-p,j=d[1]-q,g=b.site,k=g[0]-p,l=g[1]-q,u=2*(h*l-j*k),s=h*h+j*j,t=k*k+l*l,m=[(l*s-j*t)/u+p,(h*t-k*s)/u+q];setEdgeEnd(b.edge,f,g,m);e.edge=createEdge(f,d,null,m);b.edge=createEdge(d,g,null,m);attachCircle(a);attachCircle(b)}function leftBreakPoint(m,i){var b=m.site,c=b[0],k=b[1],f=k-i;if(!f){return c}var l=m.P;if(!l){return -Infinity}b=l.site;var d=b[0],j=b[1],a=j-i;if(!a){return d}var g=d-c,e=1/f-1/a,h=g/a;if(e){return (-h+Math.sqrt(h*h-2*e*(g*g/(-2*a)-j+a/2+k-f/2)))/e+c}return (c+d)/2}function rightBreakPoint(d,a){var b=d.N;if(b){return leftBreakPoint(b,a)}var c=d.site;return c[1]===a?c[0]:Infinity}var i=1.0E-6;var ic=1.0E-12;var a$;var N;var bz;var v;function triangleArea(a,b,c){return (a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1])}function lexicographic(a,b){return b[1]-a[1]||b[0]-a[0]}function Diagram(d,c){var a=d.sort(lexicographic).pop(),i,j,b;v=[];N=new Array(d.length);a$=new RedBlackTree();bz=new RedBlackTree();while(!0){b=cZ;if(a&&(!b||a[1]<b.y||a[1]===b.y&&a[0]<b.x)){if(a[0]!==i||a[1]!==j){addBeach(a);i=a[0],j=a[1]}a=d.pop()}else {if(b){removeBeach(b.arc)}else {break}}}sortCellHalfedges();if(c){var e=+c[0][0],g=+c[0][1],f=+c[1][0],h=+c[1][1];clipEdges(e,g,f,h);clipCells(e,g,f,h)}this.edges=v;this.cells=N;a$=bz=v=N=null}Diagram.prototype={constructor:Diagram,polygons:function(){var a=this.edges;return this.cells.map(function(b){var c=b.halfedges.map(function(c){return cellHalfedgeStart(b,a[c])});c.data=b.site.data;return c})},triangles:function(){var a=[],b=this.edges;this.cells.forEach(function(i,j){if(!(h=(g=i.halfedges).length)){return}var f=i.site,g,k=-1,h,e,c=b[g[h-1]],d=c.left===f?c.right:c.left;while(++k<h){e=d;c=b[g[k]];d=c.left===f?c.right:c.left;if(e&&d&&j<e.index&&j<d.index&&triangleArea(f,e,d)<0){a.push([f.data,e.data,d.data])}}});return a},links:function(){return this.edges.filter(function(a){return a.right}).map(function(a){return {source:a.left.data,target:a.right.data}})},find:function(i,j,d){var b=this,h,c=b._found||0,k=b.cells.length,a;while(!(a=b.cells[c])){if(++c>=k){return null}}var f=i-a.site[0],g=j-a.site[1],e=f*f+g*g;do{a=b.cells[h=c],c=null;a.halfedges.forEach(function(l){var f=b.edges[l],d=f.left;if((d===a.site||!d)&&!(d=f.right)){return}var h=i-d[0],k=j-d[1],g=h*h+k*k;if(g<e){e=g,c=d.index}})}while(c!==null);b._found=h;return d==null||e<=d*d?a.site:null}};var s=function(){var b=x$4,c=y$4,a=null;function s(d){return new Diagram(d.map(function(a,e){var f=[Math.round(b(a,e,d)/i)*i,Math.round(c(a,e,d)/i)*i];f.index=e;f.data=a;return f}),a)}s.polygons=function(a){return s(a).polygons()};s.links=function(a){return s(a).links()};s.triangles=function(a){return s(a).triangles()};s.x=function(a){return arguments.length?(b=typeof a==='function'?a:eE(+a),s):b};s.y=function(a){return arguments.length?(c=typeof a==='function'?a:eE(+a),s):c};s.extent=function(b){return arguments.length?(a=b==null?null:[[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]],s):a&&[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]};s.size=function(b){return arguments.length?(a=b==null?null:[[0,0],[+b[0],+b[1]]],s):a&&[a[1][0]-a[0][0],a[1][1]-a[0][1]]};return s};var eF=function(a){return function(){return a}};function ZoomEvent(b,c,a){this.target=b;this.type=c;this.transform=a}function Transform(a,b,c){this.k=a;this.x=b;this.y=c}Transform.prototype={constructor:Transform,scale:function(a){return a===1?this:new Transform(this.k*a,this.x,this.y)},translate:function(a,b){return a===0&b===0?this:new Transform(this.k,this.x+this.k*a,this.y+this.k*b)},apply:function(a){return [a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return [(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return (a-this.x)/this.k},invertY:function(a){return (a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return 'translate('+this.x+','+this.y+') scale('+this.k+')'}};var c6=new Transform(1,0,0);transform$1.prototype=Transform.prototype;function transform$1(a){return a.__zoom||c6}function nopropagation$2(){a.event.stopImmediatePropagation()}var bp=function(){a.event.preventDefault();a.event.stopImmediatePropagation()};function defaultFilter$2(){return !a.event.button}function defaultExtent$1(){var a=this,c,b;if(a instanceof SVGElement){a=a.ownerSVGElement||a;c=a.width.baseVal.value;b=a.height.baseVal.value}else {c=a.clientWidth;b=a.clientHeight}return [[0,0],[c,b]]}function defaultTransform(){return this.__zoom||c6}var j=function(){var d=defaultFilter$2,c=defaultExtent$1,k=0,e=Infinity,l=-e,m=e,o=l,p=m,h=250,n=el,i=[],g=dispatch('start','zoom','end'),b,f,q=500,r=150;function j(a){a.on('wheel.zoom',wheeled).on('mousedown.zoom',mousedowned).on('dblclick.zoom',dblclicked).on('touchstart.zoom',touchstarted).on('touchmove.zoom',touchmoved).on('touchend.zoom touchcancel.zoom',touchended).style('-webkit-tap-highlight-color','rgba(0,0,0,0)').property('__zoom',defaultTransform)}j.transform=function(a,b){var c=a.selection?a.selection():a;c.property('__zoom',defaultTransform);if(a!==c){ak(a,b)}else {c.interrupt().each(function(){gesture(this,arguments).start().zoom(null,typeof b==='function'?b.apply(this,arguments):b).end()})}};j.scaleBy=function(b,a){j.scaleTo(b,function(){var b=this.__zoom.k,c=typeof a==='function'?a.apply(this,arguments):a;return b*c})};j.scaleTo=function(b,a){j.transform(b,function(){var e=c.apply(this,arguments),d=this.__zoom,b=b8(e),g=d.invert(b),f=typeof a==='function'?a.apply(this,arguments):a;return constrain(translate(scale(d,f),b,g),e)})};j.translateBy=function(d,a,b){j.transform(d,function(){return constrain(this.__zoom.translate(typeof a==='function'?a.apply(this,arguments):a,typeof b==='function'?b.apply(this,arguments):b),c.apply(this,arguments))})};function scale(a,b){b=Math.max(k,Math.min(e,b));return b===a.k?a:new Transform(b,a.x,a.y)}function translate(a,b,c){var d=b[0]-c[0]*a.k,e=b[1]-c[1]*a.k;return d===a.x&&e===a.y?a:new Transform(a.k,d,e)}function constrain(a,b){var c=a.invertX(b[0][0])-l,d=a.invertX(b[1][0])-m,e=a.invertY(b[0][1])-o,f=a.invertY(b[1][1])-p;return a.translate(d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d),f>e?(e+f)/2:Math.min(0,e)||Math.max(0,f))}function b8(a){return [(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function ak(b,a,d){b.on('start.zoom',function(){gesture(this,arguments).start()}).on('interrupt.zoom end.zoom',function(){gesture(this,arguments).end()}).tween('zoom',function(){var e=this,g=arguments,k=gesture(e,g),b=c.apply(e,g),f=d||b8(b),i=Math.max(b[1][0]-b[0][0],b[1][1]-b[0][1]),j=e.__zoom,h=typeof a==='function'?a.apply(e,g):a,l=n(j.invert(f).concat(i/j.k),h.invert(f).concat(i/h.k));return function(a){if(a===1){a=h}else {var c=l(a),b=i/c[2];a=new Transform(b,f[0]-c[0]*b,f[1]-c[1]*b)}k.zoom(null,a)}})}function gesture(b,d){for(var a=0,e=i.length,c;a<e;++a){if((c=i[a]).that===b){return c}}return new Gesture(b,d)}function Gesture(b,a){this.that=b;this.args=a;this.index=-1;this.active=0;this.extent=c.apply(b,a)}Gesture.prototype={start:function(){if(++this.active===1){this.index=i.push(this)-1;this.emit('start')}return this},zoom:function(b,a){if(this.mouse&&b!=='mouse'){this.mouse[1]=a.invert(this.mouse[0])}if(this.touch0&&b!=='touch'){this.touch0[1]=a.invert(this.touch0[0])}if(this.touch1&&b!=='touch'){this.touch1[1]=a.invert(this.touch1[0])}this.that.__zoom=a;this.emit('zoom');return this},end:function(){if(--this.active===0){i.splice(this.index,1);this.index=-1;this.emit('end')}return this},emit:function(a){customEvent(new ZoomEvent(j,a,this.that.__zoom),g.apply,g,[a,this.that,this.args])}};function wheeled(){if(!d.apply(this,arguments)){return}var b=gesture(this,arguments),f=this.__zoom,g=Math.max(k,Math.min(e,f.k*Math.pow(2,-a.event.deltaY*(a.event.deltaMode?120:1)/500))),c=aA(this);if(b.wheel){if(b.mouse[0][0]!==c[0]||b.mouse[0][1]!==c[1]){b.mouse[1]=f.invert(b.mouse[0]=c)}clearTimeout(b.wheel)}else {if(f.k===g){return}else {b.mouse=[c,f.invert(c)];aI(this);b.start()}}bp();b.wheel=setTimeout(wheelidled,r);b.zoom('mouse',constrain(translate(scale(f,g),b.mouse[0],b.mouse[1]),b.extent));function wheelidled(){b.wheel=null;b.end()}}function mousedowned(){if(f||!d.apply(this,arguments)){return}var b=gesture(this,arguments),e=M(a.event.view).on('mousemove.zoom',mousemoved,!0).on('mouseup.zoom',mouseupped,!0),c=aA(this);b$(a.event.view);nopropagation$2();b.mouse=[c,this.__zoom.invert(c)];aI(this);b.start();function mousemoved(){bp();b.moved=!0;b.zoom('mouse',constrain(translate(b.that.__zoom,b.mouse[0]=aA(b.that),b.mouse[1]),b.extent))}function mouseupped(){e.on('mousemove.zoom mouseup.zoom',null);yesdrag(a.event.view,b.moved);bp();b.end()}}function dblclicked(){if(!d.apply(this,arguments)){return}var e=this.__zoom,b=aA(this),i=e.invert(b),g=e.k*(a.event.shiftKey?0.5:2),f=constrain(translate(scale(e,g),b,i),c.apply(this,arguments));bp();if(h>0){M(this).transition().duration(h).call(ak,f,b)}else {M(this).call(j.transform,f)}}function touchstarted(){if(!d.apply(this,arguments)){return}var e=gesture(this,arguments),g=a.event.changedTouches,i,j=g.length,f,h,c;nopropagation$2();for(f=0;f<j;++f){h=g[f],c=ct(this,g,h.identifier);c=[c,this.__zoom.invert(c),h.identifier];if(!e.touch0){e.touch0=c,i=!0}else {if(!e.touch1){e.touch1=c}}}if(b){b=clearTimeout(b);if(!e.touch1){e.end();c=M(this).on('dblclick.zoom');if(c){c.apply(this,arguments)}return}}if(i){b=setTimeout(function(){b=null},q);aI(this);e.start()}}function touchmoved(){var c=gesture(this,arguments),m=a.event.changedTouches,o=m.length,l,d,e,n;bp();if(b){b=clearTimeout(b)}for(l=0;l<o;++l){d=m[l],e=ct(this,m,d.identifier);if(c.touch0&&c.touch0[2]===d.identifier){c.touch0[0]=e}else {if(c.touch1&&c.touch1[2]===d.identifier){c.touch1[0]=e}}}d=c.that.__zoom;if(c.touch1){var j=c.touch0[0],h=c.touch0[1],k=c.touch1[0],i=c.touch1[1],g=(g=k[0]-j[0])*g+(g=k[1]-j[1])*g,f=(f=i[0]-h[0])*f+(f=i[1]-h[1])*f;d=scale(d,Math.sqrt(g/f));e=[(j[0]+k[0])/2,(j[1]+k[1])/2];n=[(h[0]+i[0])/2,(h[1]+i[1])/2]}else {if(c.touch0){e=c.touch0[0],n=c.touch0[1]}else {return}}c.zoom('touch',constrain(translate(d,e,n),c.extent))}function touchended(){var b=gesture(this,arguments),e=a.event.changedTouches,g=e.length,c,d;nopropagation$2();if(f){clearTimeout(f)}f=setTimeout(function(){f=null},q);for(c=0;c<g;++c){d=e[c];if(b.touch0&&b.touch0[2]===d.identifier){delete b.touch0}else {if(b.touch1&&b.touch1[2]===d.identifier){delete b.touch1}}}if(b.touch1&&!b.touch0){b.touch0=b.touch1,delete b.touch1}if(b.touch0){b.touch0[1]=this.__zoom.invert(b.touch0[0])}else {b.end()}}j.filter=function(a){return arguments.length?(d=typeof a==='function'?a:eF(!!a),j):d};j.extent=function(a){return arguments.length?(c=typeof a==='function'?a:eF([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),j):c};j.scaleExtent=function(a){return arguments.length?(k=+a[0],e=+a[1],j):[k,e]};j.translateExtent=function(a){return arguments.length?(l=+a[0][0],m=+a[1][0],o=+a[0][1],p=+a[1][1],j):[[l,o],[m,p]]};j.duration=function(a){return arguments.length?(h=+a,j):h};j.interpolate=function(a){return arguments.length?(n=a,j):n};j.on=function(){var a=g.on.apply(g,arguments);return a===g?j:a};return j};a.version=jA;a.bisect=aD;a.bisectRight=aD;a.bisectLeft=h3;a.ascending=aG;a.bisector=dl;a.cross=jV;a.descending=ia;a.deviation=eY;a.extent=fE;a.histogram=aj;a.thresholdFreedmanDiaconis=gJ;a.thresholdScott=j1;a.thresholdSturges=fz;a.max=kl;a.mean=kc;a.median=jH;a.merge=dI;a.min=f8;a.pairs=j0;a.permute=jo;a.quantile=br;a.range=Y;a.scan=kf;a.shuffle=jr;a.sum=km;a.ticks=cs;a.tickStep=tickStep;a.transpose=e1;a.variance=fg;a.zip=kq;a.axisTop=axisTop;a.axisRight=axisRight;a.axisBottom=axisBottom;a.axisLeft=axisLeft;a.brush=K;a.brushX=brushX;a.brushY=brushY;a.brushSelection=brushSelection;a.chord=Z;a.ribbon=A;a.nest=kd;a.set=set$2;a.map=map$1;a.keys=ka;a.values=jS;a.entries=ch;a.color=color;a.rgb=rgb;a.hsl=hsl;a.lab=lab;a.hcl=hcl;a.cubehelix=cubehelix;a.dispatch=dispatch;a.drag=O;a.dragDisable=b$;a.dragEnable=yesdrag;a.dsvFormat=d_;a.csvParse=e4;a.csvParseRows=hF;a.csvFormat=iv;a.csvFormatRows=hr;a.tsvParse=ff;a.tsvParseRows=hR;a.tsvFormat=iQ;a.tsvFormatRows=hB;a.easeLinear=linear$1;a.easeQuad=quadInOut;a.easeQuadIn=quadIn;a.easeQuadOut=quadOut;a.easeQuadInOut=quadInOut;a.easeCubic=cubicInOut;a.easeCubicIn=cubicIn;a.easeCubicOut=cubicOut;a.easeCubicInOut=cubicInOut;a.easePoly=bq;a.easePolyIn=cn;a.easePolyOut=ci;a.easePolyInOut=bq;a.easeSin=sinInOut;a.easeSinIn=sinIn;a.easeSinOut=sinOut;a.easeSinInOut=sinInOut;a.easeExp=expInOut;a.easeExpIn=expIn;a.easeExpOut=expOut;a.easeExpInOut=expInOut;a.easeCircle=circleInOut;a.easeCircleIn=circleIn;a.easeCircleOut=circleOut;a.easeCircleInOut=circleInOut;a.easeBounce=bounceOut;a.easeBounceIn=bounceIn;a.easeBounceOut=bounceOut;a.easeBounceInOut=bounceInOut;a.easeBack=bm;a.easeBackIn=cl;a.easeBackOut=cf;a.easeBackInOut=bm;a.easeElastic=aW;a.easeElasticIn=bn;a.easeElasticOut=aW;a.easeElasticInOut=bj;a.forceCenter=iS;a.forceCollide=ja;a.forceLink=kb;a.forceManyBody=iZ;a.forceSimulation=il;a.forceX=kn;a.forceY=kp;a.formatDefaultLocale=defaultLocale;a.formatLocale=ex;a.formatSpecifier=formatSpecifier;a.precisionFixed=eq;a.precisionPrefix=en;a.precisionRound=er;a.geoArea=l;a.geoBounds=jF;a.geoCentroid=b8;a.geoCircle=an;a.geoClipExtent=iV;a.geoContains=iT;a.geoDistance=bv;a.geoGraticule=graticule;a.geoGraticule10=graticule10;a.geoInterpolate=hv;a.geoLength=e6;a.geoPath=jg;a.geoAlbers=fC;a.geoAlbersUsa=J;a.geoAzimuthalEqualArea=gy;a.geoAzimuthalEqualAreaRaw=cT;a.geoAzimuthalEquidistant=gq;a.geoAzimuthalEquidistantRaw=cS;a.geoConicConformal=ha;a.geoConicConformalRaw=conicConformalRaw;a.geoConicEqualArea=bU;a.geoConicEqualAreaRaw=conicEqualAreaRaw;a.geoConicEquidistant=gH;a.geoConicEquidistantRaw=conicEquidistantRaw;a.geoEquirectangular=gV;a.geoEquirectangularRaw=equirectangularRaw;a.geoGnomonic=iW;a.geoGnomonicRaw=gnomonicRaw;a.geoIdentity=id;a.geoProjection=projection;a.geoProjectionMutator=projectionMutator;a.geoMercator=i$;a.geoMercatorRaw=mercatorRaw;a.geoOrthographic=hL;a.geoOrthographicRaw=orthographicRaw;a.geoStereographic=hz;a.geoStereographicRaw=stereographicRaw;a.geoTransverseMercator=gB;a.geoTransverseMercatorRaw=transverseMercatorRaw;a.geoRotation=bw;a.geoStream=X;a.geoTransform=iL;a.cluster=al;a.hierarchy=hierarchy;a.pack=jh;a.packSiblings=i4;a.packEnclose=fr;a.partition=y;a.stratify=aJ;a.tree=aq;a.treemap=ji;a.treemapBinary=jE;a.treemapDice=bl;a.treemapSlice=bX;a.treemapSliceDice=iJ;a.treemapSquarify=bx;a.treemapResquarify=b1;a.interpolate=bd;a.interpolateArray=fj;a.interpolateBasis=fl;a.interpolateBasisClosed=eC;a.interpolateDate=f_;a.interpolateNumber=w;a.interpolateObject=fI;a.interpolateRound=ei;a.interpolateString=cU;a.interpolateTransformCss=eb;a.interpolateTransformSvg=ec;a.interpolateZoom=el;a.interpolateRgb=bg;a.interpolateRgbBasis=i3;a.interpolateRgbBasisClosed=hf;a.interpolateHsl=jZ;a.interpolateHslLong=jf;a.interpolateLab=lab$1;a.interpolateHcl=jX;a.interpolateHclLong=je;a.interpolateCubehelix=hX;a.interpolateCubehelixLong=bV;a.quantize=i2;a.path=path;a.polygonArea=jD;a.polygonCentroid=h6;a.polygonHull=j8;a.polygonContains=h9;a.polygonLength=iY;a.quadtree=quadtree;a.queue=queue;a.randomUniform=jx;a.randomNormal=fH;a.randomLogNormal=iz;a.randomBates=jU;a.randomIrwinHall=eZ;a.randomExponential=hs;a.request=dx;a.html=j7;a.json=j9;a.text=kg;a.xml=ko;a.csv=jW;a.tsv=j3;a.scaleBand=band;a.scalePoint=point$1;a.scaleIdentity=identity$6;a.scaleLinear=linear$2;a.scaleLog=log$1;a.scaleOrdinal=ordinal;a.scaleImplicit=dq;a.scalePow=pow$1;a.scaleSqrt=sqrt$1;a.scaleQuantile=quantile$$1;a.scaleQuantize=quantize$1;a.scaleThreshold=threshold$1;a.scaleTime=kh;a.scaleUtc=jz;a.schemeCategory10=h4;a.schemeCategory20b=hV;a.schemeCategory20c=hW;a.schemeCategory20=h5;a.interpolateCubehelixDefault=hY;a.interpolateRainbow=iE;a.interpolateWarm=ki;a.interpolateCool=j5;a.interpolateViridis=jB;a.interpolateMagma=j$;a.interpolateInferno=jj;a.interpolatePlasma=jK;a.scaleSequential=sequential;a.creator=du;a.local=local$1;a.matcher=dg;a.mouse=aA;a.namespace=bo;a.namespaces=c8;a.select=M;a.selectAll=iH;a.selection=selection;a.selector=cc;a.selectorAll=c_;a.touch=ct;a.touches=jw;a.window=a4;a.customEvent=customEvent;a.arc=q;a.area=fD;a.line=E;a.pie=F;a.radialArea=ij;a.radialLine=hM;a.symbol=ao;a.symbols=ju;a.symbolCircle=dm;a.symbolCross=fm;a.symbolDiamond=fq;a.symbolSquare=fK;a.symbolStar=f4;a.symbolTriangle=fe;a.symbolWye=gb;a.curveBasisClosed=hq;a.curveBasisOpen=iu;a.curveBasis=i9;a.curveBundle=cm;a.curveCardinalClosed=g8;a.curveCardinalOpen=hE;a.curveCardinal=ab;a.curveCatmullRomClosed=gG;a.curveCatmullRomOpen=g9;a.curveCatmullRom=aa;a.curveLinearClosed=hK;a.curveLinear=bZ;a.curveMonotoneX=monotoneX;a.curveMonotoneY=monotoneY;a.curveNatural=jm;a.curveStep=cx;a.curveStepAfter=stepAfter;a.curveStepBefore=stepBefore;a.stack=$;a.stackOffsetExpand=jG;a.stackOffsetNone=a1;a.stackOffsetSilhouette=ik;a.stackOffsetWiggle=jT;a.stackOrderAscending=eB;a.stackOrderDescending=hH;a.stackOrderInsideOut=iy;a.stackOrderNone=a2;a.stackOrderReverse=jq;a.timeInterval=newInterval;a.timeMillisecond=aE;a.timeMilliseconds=ez;a.utcMillisecond=aE;a.utcMilliseconds=ez;a.timeSecond=bF;a.timeSeconds=fx;a.utcSecond=bF;a.utcSeconds=fx;a.timeMinute=dD;a.timeMinutes=jk;a.timeHour=dT;a.timeHours=jY;a.timeDay=cB;a.timeDays=j6;a.timeWeek=bG;a.timeWeeks=fA;a.timeSunday=bG;a.timeSundays=fA;a.timeMonday=dE;a.timeMondays=jl;a.timeTuesday=fB;a.timeTuesdays=i6;a.timeWednesday=e3;a.timeWednesdays=it;a.timeThursday=fd;a.timeThursdays=iK;a.timeFriday=fF;a.timeFridays=jd;a.timeSaturday=fb;a.timeSaturdays=iG;a.timeMonth=dK;a.timeMonths=jI;a.timeYear=aP;a.timeYears=j4;a.utcMinute=dj;a.utcMinutes=ir;a.utcHour=dA;a.utcHours=i7;a.utcDay=cp;a.utcDays=jy;a.utcWeek=bs;a.utcWeeks=eS;a.utcSunday=bs;a.utcSundays=eS;a.utcMonday=dk;a.utcMondays=is;a.utcTuesday=eT;a.utcTuesdays=h1;a.utcWednesday=eA;a.utcWednesdays=hC;a.utcThursday=eJ;a.utcThursdays=hT;a.utcFriday=e2;a.utcFridays=iq;a.utcSaturday=eI;a.utcSaturdays=hS;a.utcMonth=dr;a.utcMonths=iR;a.utcYear=aL;a.utcYears=i8;a.timeFormatDefaultLocale=defaultLocale$1;a.timeFormatLocale=formatLocale$1;a.isoFormat=ix;a.isoParse=i1;a.now=now;a.timer=timer;a.timerFlush=timerFlush;a.timeout=di;a.interval=ig;a.transition=transition;a.active=jC;a.interrupt=aI;a.voronoi=s;a.zoom=j;a.zoomTransform=transform$1;a.zoomIdentity=c6;Object.defineProperty(a,'__esModule',{value:!0})});Ext.define('Ext.d3.ComponentBase',{extend:'Ext.Component',onElementResize:function(c,b,a){this.handleResize({width:b,height:a})}});Ext.namespace('Ext.d3.lib').d3=!0;Ext.define('Ext.d3.Component',{extend:'Ext.d3.ComponentBase',requires:['Ext.d3.lib.d3'],isD3:!0,config:{store:null,componentCls:'',interactions:[],transitions:{none:{name:undefined,duration:0,ease:Ext.identityFn}},touchAction:{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1}},baseCls:Ext.baseCSSPrefix+'d3',defaultBindProperty:'store',isInitializing:!0,resizeDelay:250,resizeTimerId:0,size:null,d3Components:null,constructor:function(b){var a=this;a.d3Components={};a.callParent(arguments);a.isInitializing=!1;a.on('resize','onElementResize',a)},destroy:function(){var a=this;if(a.resizeTimerId){clearTimeout(a.resizeTimerId)}a.un('resize','onElementResize',a);a.setInteractions();a.callParent()},updateComponentCls:function(a,b){var c=this.baseCls,d=this.element;if(a&&Ext.isString(a)){d.addCls(a,c);if(b){d.removeCls(b,c)}}},register:function(a){var b=this.d3Components,c=a.getId();b[c]=a},unregister:function(a){var b=this.d3Components,c=a.getId();delete b[c]},applyInteractions:function(e,d){if(!d){d=[];d.map={}}var h=this,c=[],f=d.map,b,i,a,g;c.map={};e=Ext.Array.from(e,!0);for(b=0,i=e.length;b<i;b++){a=e[b];if(!a){continue}if(a.isInteraction){g=a.getId()}else {g=a.id;a.element=h.element}a=Ext.factory(a,null,f[g],'d3.interaction');if(a){a.setComponent(h);h.addInteraction(a);c.push(a);c.map[a.getId()]=a}}for(b in f){if(!c.map[b]){a=f[b];a.destroy()}}return c},applyTransitions:function(d){var c,a,b,e={};for(c in d){a=d[c];if(a===!0){Ext.raise("'true' is not a valid transition value (should be an object or 'false').")}e[c]=a=Ext.apply({},a||d.none);b=a.ease;if(typeof b==='string'){a.ease=d3['ease'+b.charAt(0).toUpperCase()+b.substr(1)]}if(!('name' in a)){a.name=this.getId()+'-'+c}}return e},createTransition:function(c,b){var a=this.getTransitions()[c];if(!b){b=d3}return b.transition(a.name).ease(a.ease).duration(a.duration)},panZoom:null,onPanZoom:Ext.emptyFn,getContentRect:Ext.emptyFn,getViewportRect:Ext.emptyFn,addInteraction:function(b){var a=this;if(b.isPanZoom){b.setContentRect(a.getContentRect.bind(a));b.setViewportRect(a.getViewportRect.bind(a));a.panZoom=b;b.on('panzoom',a.onPanZoom,a)}b.on('destroy',a.onInteractionDestroy,a)},removeInteraction:function(a){if(a.isPanZoom){a.setContentRect(null);a.setViewportRect(null);this.panZoom=null;a.un('panzoom',this.onPanZoom,this)}},onInteractionDestroy:function(a){a.un('destroy',this.onInteractionDestroy,this);this.removeInteraction(a)},applyStore:function(a){return a&&Ext.StoreManager.lookup(a)},updateStore:function(a,b){var e=this,d={datachanged:'onDataChange',update:'onDataUpdate',load:'onDataLoad',scope:e,order:'after'},c;if(b){b.un(d);if(b.getAutoDestroy()){b.destroy()}}if(a){a.on(d);e.onDataChange(a);if(a.isTreeStore){c=a.getRoot();if(!c.isExpanded()){a.suspendEvent('datachanged');c.on({expand:function(){a.resumeEvent('datachanged');a.fireEvent('datachanged',a)},single:!0})}}}},onDataChange:function(b){var a=this;if(a.isInitializing){return}a.processDataChange(b)},onDataUpdate:function(f,e,c,b,d){var a=this;if(a.isInitializing){return}a.processDataUpdate(f,e,c,b,d)},onDataLoad:function(d,c,a,b){this.processDataLoad(d,c,a,b)},processDataChange:Ext.emptyFn,processDataUpdate:Ext.emptyFn,processDataLoad:Ext.emptyFn,maskEl:null,showMask:function(b){var a=this;if(a.maskEl){a.maskEl.dom.firstChild.textContent=b;a.maskEl.setStyle('display','flex')}else {a.maskEl=this.element.createChild({style:{position:'absolute',display:'flex',alignItems:'center',justifyContent:'center',left:0,top:0,bottom:0,right:0,background:'rgba(0,0,0,0.5)'},children:[{html:b,style:{background:'rgba(0,0,0,0.8)',color:'white',fontWeight:'bold',borderRadius:'10px',padding:'10px'}}]})}},hideMask:function(){this.maskEl&&this.maskEl.setStyle('display','none')},handleResize:function(b,d){var a=this,c=a.element;b=b||c&&c.getSize();if(!(b&&b.width&&b.height)){return}clearTimeout(a.resizeTimerId);if(d){a.resizeTimerId=0}else {a.resizeTimerId=Ext.defer(a.handleResize,a.resizeDelay,a,[b,!0]);return}a.resizeHandler(b);if(a.panZoom&&a.panZoom.updateIndicator){a.panZoom.updateIndicator()}a.size=b},resizeHandler:Ext.emptyFn,toLocalXY:function(d,c){var a=d.getXY(),b=c?c.getXY():this.element.getXY();return [a[0]-b[0],a[1]-b[1]]}});Ext.define('Ext.d3.svg.Svg',{extend:'Ext.d3.Component',xtype:['d3-svg','d3'],isSvg:!0,config:{padding:{top:0,left:0,right:0,bottom:0},clipScene:!1},defaultCls:{wrapper:Ext.baseCSSPrefix+'d3-wrapper',scene:Ext.baseCSSPrefix+'d3-scene',hidden:Ext.baseCSSPrefix+'d3-hidden',invisible:Ext.baseCSSPrefix+'d3-invisible'},defs:null,wrapper:null,wrapperClipRect:null,wrapperClipId:'wrapper-clip',scene:null,sceneRect:null,svg:null,onClassExtended:function(a,b){Ext.applyIf(b.defaultCls,a.superclass.defaultCls)},applyPadding:function(a,c){var b;if(!Ext.isObject(a)){b=Ext.util.Format.parseBox(a)}else {if(!c){b=a}else {b=Ext.apply(c,a)}}return b},getSvg:function(){return this.svg||(this.svg=d3.select(this.element.dom).append('svg').attr('version','1.1'))},resizeHandler:function(d){var b=this,k=b.getSvg(),c=b.getPadding(),j=b.getInherited().rtl,i=b.getWrapper(),h=b.getWrapperClipRect(),g=b.getScene(),f=d&&d.width,e=d&&d.height,a;if(!(f&&e)){return}k.attr('width',f).attr('height',e);a=b.sceneRect||(b.sceneRect={});a.x=j?c.right:c.left;a.y=c.top;a.width=f-c.left-c.right;a.height=e-c.top-c.bottom;i.attr('transform','translate('+a.x+','+a.y+')');h.attr('width',a.width).attr('height',a.height);b.onSceneResize(g,a);b.fireEvent('sceneresize',b,g,a)},updatePadding:function(){var a=this;if(!a.isConfiguring){a.resizeHandler(a.getSize())}},getSceneRect:function(){return this.sceneRect},getContentRect:function(){return this.scene&&this.scene.node().getBBox()},getViewportRect:function(){return this.sceneRect},scaleRe:/scale\((.+),(.+)\)/i,alignContentTransitionName:null,alignMap:{'c':'cc','t':'ct','b':'cb','l':'lc','r':'rc','lc':'lc','cl':'lc','rc':'rc','cr':'rc','ct':'ct','tc':'ct','cb':'cb','bc':'cb','rt':'rt','tr':'rt','rb':'rb','br':'rb','lt':'lt','tl':'lt','lb':'lb','bl':'lb'},alignContent:function(q,c){var b=this,n='',i=1,j=1,e=b.getSceneRect(),a=b.getContentRect(),h=b.scene.interrupt(b.alignContentTransitionName),f,g,l,m,d,k,o,p;if(e&&a){m=h.attr('transform');if(m){d=m.match(b.scaleRe);if(d){n=d[0];i=d[1];j=d[2]}}k=b.alignMap[q];if(!k){Ext.raise('Invalid content align options.')}o=k[0];p=k[1];switch(o){case 'c':f=e.width/2-(a.x+a.width/2)*i;break;case 'l':f=-a.x*i;break;case 'r':f=e.width-(a.x+a.width)*i;break;}switch(p){case 'c':g=e.height/2-(a.y+a.height/2)*j;break;case 't':g=-a.y*j;break;case 'b':g=e.height-(a.y+a.height)*j;break;}}if(Ext.isNumber(f)&&Ext.isNumber(g)){l=[f,g];if(c){if(typeof c==='string'){c=b.createTransition(c)}b.alignContentTransitionName=c._name;h=h.transition(c)}h.attr('transform','translate('+l+')'+n);b.panZoom&&b.panZoom.setPanZoomSilently(l)}},onSceneResize:Ext.emptyFn,getScene:function(){var a=this,c=a.getWrapper(),b=a.scene;if(!b){a.scene=b=c.append('g').classed(a.defaultCls.scene,!0);a.setupScene(b);a.fireEvent('scenesetup',a,b)}return b},clearScene:function(){var c=this,a=c.scene,b=c.defs;if(a){a=a.node();a.removeAttribute('transform');while(a.firstChild){a.removeChild(a.firstChild)}}if(b){b=b.node();while(b.firstChild){b.removeChild(b.firstChild)}}},showScene:function(){var a=this.scene;if(a){a.classed(this.defaultCls.invisible,!1)}},hideScene:function(){var a=this.scene;if(a){a.classed(this.defaultCls.invisible,!0)}},setupScene:Ext.emptyFn,onPanZoom:function(c,b,a){this.scene.attr('transform','translate('+a+')scale('+b+')')},removeInteraction:function(a){if(a.isPanZoom){this.scene.attr('transform',null)}this.callParent([a])},getWrapper:function(){var a=this,b=a.wrapper;if(!b){b=a.wrapper=a.getSvg().append('g').classed(a.defaultCls.wrapper,!0)}return b},getWrapperClipRect:function(){var a=this,b=a.wrapperClipRect;if(!b){b=a.wrapperClipRect=a.getDefs().append('clipPath').attr('id',a.wrapperClipId).append('rect').attr('fill','white')}return b},updateClipScene:function(a){this.getWrapper().attr('clip-path',a?'url(#'+this.wrapperClipId+')':'')},getDefs:function(){var a=this.defs;if(!a){a=this.defs=this.getSvg().append('defs')}return a},destroy:function(){this.getSvg().remove();this.callParent()}});Ext.define('Ext.d3.Helpers',{singleton:!0,makeScale:function(b){var c=b.type,d,a;d=c.charAt(0).toUpperCase()+c.substr(1);a=this.make('scale'+d,b);if('nice' in b&&a.nice){a.nice(this.eval(b.nice))}a._type=c;return a},makeAxis:function(c){var b=c.orient,d,a;d=b.charAt(0).toUpperCase()+b.substr(1);a=this.make('axis'+d,c);a._type=b;return a},make:function(b,a){return this.configure(d3[b](),a)},configure:function(b,e){var a,c,d;for(a in e){c=a.charAt(0)==='$';if(c){a=a.substr(1)}if(typeof b[a]==='function'){if(c){d=e['$'+a].map(function(a){if(typeof a==='string'&&!a.search('d3.')){a=(new Function('return '+a))()}return a});b[a].apply(b,d);c=!1}else {d=this.eval(e[a]);b[a](d)}}}return b},'eval':function(a){if(typeof a==='string'&&!a.search('d3.')){a=(new Function('return '+a))()}return a},isBBoxable:function(a){if(Ext.isFirefox){if(a){if(a instanceof Element){a=d3.select(a)}return document.contains(a.node())&&a.style('display')!=='none'&&a.attr('visibility')!=='hidden'}}return !0},getBBox:function(a){var b=a.style('display');if(b!=='none'){return a.node().getBBox()}},setDominantBaseline:function(b,a){b.setAttribute('dominant-baseline',a);this.fakeDominantBaseline(b,a);if(Ext.isSafari&&a==='text-after-edge'){b.setAttribute('baseline-shift','super')}},noDominantBaseline:function(){return Ext.isIE||Ext.isEdge},fakeDominantBaselineMap:{'alphabetic':'0em','ideographic':'-.24em','hanging':'.72em','mathematical':'.46em','middle':'.22em','central':'.33em','text-after-edge':'-.26em','text-before-edge':'.91em'},fakeDominantBaseline:function(c,b,d){if(d||this.noDominantBaseline()){var a=this.fakeDominantBaselineMap[b];a&&c.setAttribute('dy',a)}},fakeDominantBaselines:function(g){var h=this.fakeDominantBaselineMap,d,e,c,b,a,f;if(this.noDominantBaseline()){if(arguments.length>1){d=arguments[0];e=arguments[1];b=document.querySelectorAll(d);c=h[e];if(c){for(a=0,f=b.length;a<f;a++){b[a].setAttribute('dy',c)}}}else {for(d in g){e=g[d];c=h[e];if(c){b=document.querySelectorAll(d);for(a=0,f=b.length;a<f;a++){b[a].setAttribute('dy',c)}}}}}},unitMath:function(c,d,b){var a=parseFloat(c),e=c.substr(a.toString().length);switch(d){case '*':a*=b;break;case '+':a+=b;break;case '/':a/=b;break;case '-':a-=b;break;}return a.toString()+e},getLinkId:function(a){var b=a.search('#'),c=a.substr(b,a.length-b-1);return c},alignRect:function(g,h,a,b,f){var c,d,e;if(b&&a){switch(g){case 'center':c=b.width/2-(a.x+a.width/2);break;case 'left':c=-a.x;break;case 'right':c=b.width-(a.x+a.width);break;default:Ext.raise('Invalid value. Valid `x` values are: center, left, right.');}switch(h){case 'center':d=b.height/2-(a.y+a.height/2);break;case 'top':d=-a.y;break;case 'bottom':d=b.height-(a.y+a.height);break;default:Ext.raise('Invalid value. Valid `y` values are: center, top, bottom.');}}if(Ext.isNumber(c)&&Ext.isNumber(d)){c+=b.x;d+=b.y;e=[c,d];f.attr('transform','translate('+e+')')}},commasRe:/,+/g,getTransformComponent:function(d,i){var g=d.indexOf(i),c,f,a,b,e,h;if(g>=0){c=d.indexOf('(',g)+1;f=d.indexOf(')',c);if(c>=0&&f>=0){a=d.substr(c,f-c);a=a.replace(' ',',');a=a.replace(this.commasRe,',')}}if(a){b=a.split(',');if(b.length>1){e=parseFloat(b[0]);h=parseFloat(b[1]);return [e,h]}else {e=parseFloat(b[0]);return [e]}}},parseTransform:function(d){var a=this.getTransformComponent(d,'scale'),c=this.getTransformComponent(d,'rotate'),b=this.getTransformComponent(d,'translate');if(a){if(a.length<2){a.push(a[0])}}else {a=[0,0]}c=c?c[0]:0;if(b){if(b.length<2){b.push(0)}}else {b=[0,0]}return {scale:a,rotate:c,translate:b}}});Ext.define('Ext.d3.mixin.Detached',{extend:'Ext.Mixin',detached:null,constructor:function(a){this.detached=d3.select('body').append('svg').remove().attr('version','1.1')},getDetached:function(){return this.detached},isDetached:function(a){return a&&a.node().parentElement===this.detached.node()},attach:function(a,b){if(a instanceof d3.selection){a=a.node()}if(!(a instanceof SVGElement)){Ext.raise('The `parent` must either be a D3 selection or an SVG element.')}if(b instanceof d3.selection){a.appendChild(b.node())}else {if(b instanceof SVGElement){a.appendChild(b)}else {Ext.raise('The `child` must either be a D3 selection or an SVG element.')}}},detach:function(a){this.attach(this.detached,a)},destroy:function(){var a=this.detached.node();if(a&&a.parentNode){a.parentNode.removeChild(a)}this.callParent()}});Ext.define('Ext.d3.axis.Axis',{requires:['Ext.d3.Helpers'],mixins:{observable:'Ext.mixin.Observable',detached:'Ext.d3.mixin.Detached'},config:{axis:{orient:'top'},scale:{type:'linear'},title:null,parent:null,component:null},defaultCls:{self:Ext.baseCSSPrefix+'d3-axis',title:Ext.baseCSSPrefix+'d3-axis-title'},title:null,group:null,domain:null,constructor:function(b){var a=this,c;b=b||{};if('id' in b){c=b.id}else {if('id' in a.config){c=a.config.id}else {c=a.getId()}}a.setId(c);a.mixins.detached.constructor.call(a,b);a.group=a.getDetached().append('g').classed(a.defaultCls.self,!0).attr('id',a.getId());a.mixins.observable.constructor.call(a,b)},getGroup:function(){return this.group},getBox:function(){return this.group.node().getBBox()},applyScale:function(a,c){var b=this.getAxis();if(a){if(!Ext.isFunction(a)){a=Ext.d3.Helpers.makeScale(a)}if(b){b.scale(a)}}return a||c},applyAxis:function(a,c){var b=this.getScale();if(a){if(!Ext.isFunction(a)){a=Ext.d3.Helpers.makeAxis(a)}if(b){a.scale(b)}}return a||c},updateParent:function(b){var a=this;if(b){a.attach(b,a.group);a.render()}else {a.detach(a.group)}},updateTitle:function(b){var a=this;if(b){if(a.title){if(a.isDetached(a.title)){a.attach(a.group,a.title)}}else {a.title=a.group.append('text').classed(a.defaultCls.title,!0)}a.title.text(b.text||'');a.title.attr(b.attr);a.positionTitle(b)}else {if(a.title){a.detach(a.title)}}},getAxisLine:function(){var b=this,a=b.domain;if(!a){a=b.group.select('path.domain')}return a.empty()?null:b.domain=a},getTicksBBox:function(){var g=this,c=g.group,e,d,b,a,f;a=c.selectAll('.tick');if(a.size()){d=c.append('g');b=d.node();e=c.node();a.each(function(){b.appendChild(this)});f=b.getBBox();a.each(function(){e.appendChild(this)});d.remove()}return f},positionTitle:function(j){var i=this,a=i.title,s=i.getAxis(),r=i.getAxisLine(),o=s._type,n=o==='left'||o==='right',g=Ext.d3.Helpers,l='text-before-edge',m='text-after-edge',p,q,d,h,e,c,b,f=0,k=0;if(!(r&&a&&Ext.d3.Helpers.isBBoxable(i.getParent()))){return}j=j||i.getTitle();c=r.node().getBBox();b=i.getTicksBBox();p=j.alignment||'middle';q=j.position||'outside';e=q==='outside';d=j.padding||'0.5em';switch(p){case 'start':case 'left':h='start';if(n){k=c.y+c.height}else {f=c.x};break;case 'end':case 'right':h='end';if(n){k=c.y}else {f=c.x+c.width};break;case 'middle':case 'center':h='middle';if(n){k=c.y+c.height/2}else {f=c.x+c.width/2};break;}switch(o){case 'top':if(e){a.attr('y',b?b.y:0);d=g.unitMath(d,'*',-1)};g.setDominantBaseline(a.node(),e?m:l);a.attr('text-anchor',h).attr('x',f);break;case 'bottom':if(e){a.attr('y',b?b.y+b.height:0)}else {d=g.unitMath(d,'*',-1)};g.setDominantBaseline(a.node(),e?l:m);a.attr('text-anchor',h).attr('x',f);break;case 'left':if(e){f=b?b.x:0;d=g.unitMath(d,'*',-1)};g.setDominantBaseline(a.node(),e?m:l);a.attr('text-anchor',h).attr('transform','translate('+f+', '+k+')'+'rotate(-90)');break;case 'right':if(e){f=b?b.x+b.width:0}else {d=g.unitMath(d,'*',-1)};g.setDominantBaseline(a.node(),e?l:m);a.attr('text-anchor',h).attr('transform','translate('+f+', '+k+')'+'rotate(-90)');break;}a.attr('dy',d)},render:function(c){var a=this,b=a.getAxis(),e=b._type,d=a.getScale();if(!(d.domain().length&&d.range().length)){return}if(c){a.group.transition(c).call(b)}else {a.group.call(b)}a.group.attr('data-orient',e);a.positionTitle()},destroy:function(){this.mixins.detached.destroy.call(this)}});Ext.define('Ext.d3.axis.Data',{extend:'Ext.d3.axis.Axis',config:{field:null,step:null},applyAxis:function(a,c){var b=this.getComponent(),d=b.getInherited().rtl;if(a&&d){a=Ext.Object.chain(a);if(a.orient==='left'){a.orient='right'}else {if(a.orient==='right'){a.orient='left'}}}return this.callParent([a,c])}});Ext.define('Ext.d3.axis.Color',{requires:['Ext.d3.Helpers'],mixins:{observable:'Ext.mixin.Observable'},isColorAxis:!0,config:{scale:{merge:function(a,b){if(a&&a.type&&b&&b.type===a.type){a=Ext.Object.merge(b,a)}return a},$value:{type:'linear',range:['white','maroon']}},field:null,processor:null,minimum:null,maximum:null},constructor:function(a){this.mixins.observable.constructor.call(this,a)},applyScale:function(a,b){if(a){if(!Ext.isFunction(a)){this.isUserSetDomain=!!a.domain;a=Ext.d3.Helpers.makeScale(a)}}return a||b},updateScale:function(a){this.scale=a},updateField:function(a){this.field=a},updateProcessor:function(a){this.processor=a},getColor:function(a){var d=this.scale,c=this.field,e=this.processor,b;if(e){b=e(this,d,a,c)}else {if(a&&a.data&&a.data.isModel&&c){b=d(a.data.data[c])}else {b=d(a)}}return b},updateMinimum:function(){this.setDomain()},updateMaximum:function(){this.setDomain()},findDataDomain:function(b){var a=this.field,e=d3.min(b,function(b){return b.data[a]}),d=d3.max(b,function(b){return b.data[a]}),c;if(a){if(Ext.isNumber(e)&&Ext.isNumber(d)){c=[e,d]}else {c=b.map(function(b){return b.data[a]}).sort().filter(function(c,a,b){return !a||c!==b[a-1]})}}return c},setDomainFromData:function(a){if(!this.isUserSetDomain){this.setDomain(this.findDataDomain(a))}},setDomain:function(a){var c=this,b=c.getScale(),k=b.range(),e=k.length,i=c.getMinimum(),h=c.getMaximum(),j,f,g,d;if(b&&!c.isUserSetDomain){if(!a){a=b.domain()}a=a.slice();if(Ext.isNumber(i)){a[0]=i}if(Ext.isNumber(h)){a[a.length-1]=h}if(b.ticks&&a.length!==e){f=a[0];g=a[a.length-1];j=(g-f)/(e-1);a=[];for(d=0;d<e-1;d++){a.push(f+d*j)}a.push(g)}b.domain(a);c.fireEvent('scalechange',c,b)}}});Ext.define('Ext.d3.legend.Legend',{mixins:{observable:'Ext.mixin.Observable',detached:'Ext.d3.mixin.Detached'},config:{docked:'bottom',padding:30,hidden:!1,component:null},defaultCls:{self:Ext.baseCSSPrefix+'d3-legend',item:Ext.baseCSSPrefix+'d3-legend-item',label:Ext.baseCSSPrefix+'d3-legend-label',hidden:Ext.baseCSSPrefix+'d3-hidden'},constructor:function(b){var a=this;a.mixins.detached.constructor.call(a,b);a.group=a.getDetached().append('g').classed(a.defaultCls.self,!0);a.mixins.observable.constructor.call(a,b)},getGroup:function(){return this.group},applyDocked:function(a){var b=this.getComponent(),c=b.getInherited().rtl;if(c){if(a==='left'){a='right'}else {if(a==='right'){a='left'}}}return a},getBox:function(){var b=this,f=b.getHidden(),e=b.getDocked(),c=b.getPadding(),d=b.group.node().getBBox(),a=b.box||(b.box={});if(f){return {x:0,y:0,width:0,height:0}}a.x=d.x;a.y=d.y;a.width=d.width;a.height=d.height;switch(e){case 'right':a.x-=c;case 'left':a.width+=c;break;case 'bottom':a.y-=c;case 'top':a.height+=c;break;}return a},updateHidden:function(a){a?this.hide():this.show()},show:function(){var a=this;a.group.classed(a.defaultCls.hidden,!1);a.setHidden(!1);a.fireEvent('show',a)},hide:function(){var a=this;a.group.classed(a.defaultCls.hidden,!0);a.setHidden(!0);a.fireEvent('hide',a)},updateComponent:function(b,c){var a=this;if(c){a.detach(a.group)}if(b){a.attach(b.getScene(),a.group)}},destroy:function(){this.mixins.detached.destroy.call(this)}});Ext.define('Ext.d3.legend.Color',{extend:'Ext.d3.legend.Legend',requires:['Ext.d3.Helpers'],config:{axis:null,items:{count:5,slice:null,reverse:!1,size:{x:30,y:30}}},getScale:function(){return this.getAxis().getScale()},updateAxis:function(c,b){var a=this;if(b){b.un('scalechange',a.onScaleChange,a)}if(c){c.on('scalechange',a.onScaleChange,a)}},onScaleChange:function(b,a){this.renderItems()},updateItems:function(){if(!this.isConfiguring){this.renderItems()}},renderItems:function(){var b=this,e=b.getScale(),c=b.getItems(),f=b.getRenderedItems(),a,d;if(c.count>0&&e.ticks){a=e.ticks(c.count);if(c.slice){a=a.slice.apply(a,c.slice)}if(c.reverse){a=a.reverse()}}else {a=e.domain()}if(a){d=f.data(a);b.onAddItems(d.enter());b.onUpdateItems(d);b.onRemoveItems(d.exit())}},getRenderedItems:function(){return this.group.selectAll('.'+this.defaultCls.item)},onAddItems:function(a){var b=this;a=a.append('g').classed(b.defaultCls.item,!0);a.append('rect');a.append('text');b.onUpdateItems(a)},onUpdateItems:function(e){var d=this,a=d.getItems(),f=d.getDocked(),g=d.getScale(),b,c;b=e.select('rect').attr('width',a.size.x).attr('height',a.size.y).style('fill',g);c=e.select('text').each(function(){Ext.d3.Helpers.setDominantBaseline(this,'middle')}).attr('text-anchor','middle').text(String);switch(f){case 'left':case 'right':b.attr('transform',function(c,b){return 'translate(0,'+b*a.size.y+')'});c.attr('x',a.size.x+10).attr('y',function(c,b){return (b+0.5)*a.size.y}).attr('dx',10);break;case 'top':case 'bottom':b.attr('transform',function(c,b){return 'translate('+b*a.size.x+',0)'});c.attr('x',function(c,b){return (b+0.5)*a.size.x}).attr('y',a.size.y).attr('dy','1em');break;}},onRemoveItems:function(a){a.remove()}});Ext.define('Ext.d3.mixin.ToolTip',{extend:'Ext.Mixin',mixinConfig:{id:'d3tooltip'},requires:['Ext.tip.ToolTip'],config:{tooltip:null},applyTooltip:function(c,b){var d=Ext.merge({renderer:Ext.emptyFn,target:this.el,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,trackMouse:!0,showOnTap:!0},c),a;Ext.destroy(b);a=new Ext.tip.ToolTip(d);a.on('hovertarget','onTargetHover',this);return a},onTargetHover:function(b,a){if(a.dom){Ext.callback(b.renderer,b.scope,[this,b,a.dom.__data__,a],0,this)}}});Ext.define('Ext.d3.HeatMap',{extend:'Ext.d3.svg.Svg',xtype:'d3-heatmap',requires:['Ext.d3.axis.Data','Ext.d3.axis.Color','Ext.d3.legend.Color','Ext.d3.Helpers'],mixins:['Ext.d3.mixin.ToolTip'],config:{componentCls:'heatmap',xAxis:{axis:{orient:'bottom'},scale:{type:'linear'}},yAxis:{axis:{orient:'left'},scale:{type:'linear'}},colorAxis:{},legend:!1,tiles:null,labels:!0,transitions:{layout:{duration:500,ease:'cubicInOut',delay:10}}},data:null,tiles:null,tilesGroup:null,tilesRect:null,legendRect:null,defaultCls:{tiles:Ext.baseCSSPrefix+'d3-tiles',tile:Ext.baseCSSPrefix+'d3-tile'},constructor:function(a){this.callParent([a]);this.mixins.d3tooltip.constructor.call(this,a)},applyTooltip:function(a,b){if(a){a.delegate='g.'+this.defaultCls.tile}return this.mixins.d3tooltip.applyTooltip.call(this,a,b)},updateTooltip:null,applyAxis:function(a,b){if(a){a=new Ext.d3.axis.Data(Ext.merge({parent:this.getScene(),component:this},a))}return a||b},updateAxis:function(c,b){var a=this;if(!a.isConfiguring){a.processData();a.renderScene()}},applyXAxis:function(b,a){return this.applyAxis(b,a)},updateXAxis:function(){this.updateAxis()},applyYAxis:function(b,a){return this.applyAxis(b,a)},updateYAxis:function(){this.updateAxis()},applyLegend:function(a,c){var b=this;if(a){a.axis=b.getColorAxis();a=new Ext.d3.legend.Color(Ext.merge({component:b},a))}return a||c},updateLegend:function(d,b){var a=this,c={show:'onLegendVisibility',hide:'onLegendVisibility',scope:a};if(b){b.un(c)}if(d){d.on(c)}if(!a.isConfiguring){a.performLayout()}},onLegendVisibility:function(){this.performLayout()},applyColorAxis:function(a,b){if(a){a=new Ext.d3.axis.Color(a)}return a||b},updateColorAxis:function(){var a=this;if(!a.isConfiguring){a.processData();a.renderScene()}},getStoreData:function(a){return a?a.getData().items:[]},processData:function(j){var a=this,b=a.data=a.getStoreData(j||a.getStore()),c=a.getXAxis(),d=a.getYAxis(),e=a.getColorAxis(),g=c.getScale(),i=d.getScale(),f=c.getField(),h=d.getField(),k=c.getStep(),l=d.getStep();a.setDomainFromData(b,f,g,k);a.setDomainFromData(b,h,i,l);e.setDomainFromData(b)},setDomainFromData:function(e,d,b,f){var a,c;if(b.bandwidth){c=e.map(function(a){return a.data[d]}).filter(function(a,c,b){return b.indexOf(a)===c});b.domain(c)}else {a=d3.extent(e,function(a){return a.data[d]});b.domain([+a[0],+a[1]+f])}},isDataProcessed:!1,processDataChange:function(b){var a=this;a.processData(b);a.isDataProcessed=!0;if(!a.isConfiguring){a.performLayout()}},onSceneResize:function(c,b){var a=this;a.callParent([c,b]);if(!a.isDataProcessed){a.processData()}a.isOldSize=!1;a.performLayout(b)},performLayout:function(e){var c=this;e=e||c.getSceneRect();if(!e){return}c.showScene();var f=c.getLegend(),i=c.getXAxis(),j=c.getYAxis(),l=i.getGroup(),m=j.getGroup(),n=i.getAxis(),o=j.getAxis(),p=i.getScale(),q=j.getScale(),r=c.getInherited().rtl,d,b,k,a,g,h;g={x:0,y:0,width:e.width,height:e.height};c.tilesRect=a=Ext.Object.chain(g);if(f){b=f.getBox();k=f.getDocked();c.legendRect=d=Ext.Object.chain(g);switch(k){case 'right':a.width-=b.width;d.width=b.width;d.x=e.width-b.width;break;case 'left':a.width-=b.width;d.width=b.width;a.x+=b.width;break;case 'bottom':a.height-=b.height;d.height=b.height;d.y=e.height-b.height;break;case 'top':a.height-=b.height;d.height=b.height;a.y+=b.height;break;}Ext.d3.Helpers.alignRect('center','center',b,d,f.getGroup())}h=[a.x,a.x+a.width];if(r){h.reverse()}p.range(h);q.range([a.y+a.height,a.y]);l.attr('transform','translate(0,'+(n._type==='top'?a.y:a.y+a.height)+')');m.attr('transform','translate('+(o._type==='left'?a.x:a.x+a.width)+',0)');c.renderScene()},setupScene:function(b){var a=this;a.callParent([b]);a.tilesGroup=b.append('g').classed(a.defaultCls.tiles,!0);a.hideScene()},getRenderedTiles:function(){return this.tilesGroup.selectAll('.'+this.defaultCls.tile)},renderScene:function(c){var a=this,e=a.getXAxis(),f=a.getYAxis(),h=e.getField(),i=f.getField(),g=a.hasFirstRender&&a.isOldSize?'layout':'none',b,d;c=c||a.data||a.getStoreData(a.getStore());b=a.getRenderedTiles().data(c,function(c){var a=c.data[h],b=c.data[i];if(a instanceof Date){a=+a}if(b instanceof Date){b=+b}return String(a)+'-'+String(b)});a.layoutTransition=a.createTransition(g).on('end',function(){a.layoutTransition=null});d=a.onAddTiles(b.enter());a.onUpdateTiles(b.merge(d));a.onRemoveTiles(b.exit());e.render();f.render();a.hasFirstRender=!0;a.isOldSize=!0},onAddTiles:function(f){var g=this,d=g.getTiles(),c=g.getLabels(),b,h,e,a;if(f.empty()){return f}b=f.append('g').classed(g.defaultCls.tile,!0);h=b.append('rect').attr('fill','white');if(d){for(a in d.attr){h.attr(a,d.attr[a])}b.classed(d.cls,!!d.cls);if(c){e=b.append('text').attr('opacity',0);for(a in c.attr){e.attr(a,c.attr[a])}e.classed(c.cls,!!c.cls);if(Ext.d3.Helpers.noDominantBaseline()){e.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,'central',!0)})}}}return b},onUpdateTiles:function(k){var a=this,q=a.getInherited().rtl,d=a.getXAxis(),f=a.getYAxis(),j=a.getColorAxis(),b=d.getScale(),c=f.getScale(),o=j.getScale(),r=d.getStep(),s=f.getStep(),e=b.bandwidth?b.bandwidth():b(r)-b(0),g=c.bandwidth?c.bandwidth():c(s)-c(0),m=d.getField(),n=f.getField(),h=j.getField(),p=a.hasFirstRender&&a.isOldSize&&a.getTransitions().layout.delay||0,l=function(b,a){return a*p},i=a.layoutTransition;k.select('rect').transition(i).delay(l).attr('x',function(c){var a=b(c.data[m]);if(q&&!b.bandwidth){a+=e}return a+0.5}).attr('y',function(b){var a=c(b.data[n]);if(!c.bandwidth){a+=g}return a+0.5}).attrTween('width',function(){var a=+this.getAttribute('width'),b=Math.abs(e);return function(c){return Math.max(a*(1-c)+b*c,0)}}).attrTween('height',function(){var a=+this.getAttribute('height'),b=Math.abs(g);return function(c){return Math.max(a*(1-c)+b*c,0)}}).style('fill',function(a){return o(a.data[h])});k.select('text').text(function(a){return a.data[h]}).transition(i).delay(l).attr('opacity',1).attr('x',function(a){return b(a.data[m])+e/2}).attr('y',function(a){return c(a.data[n])+g/2}).on('end',function(){this.removeAttribute('opacity')})},onRemoveTiles:function(a){a.remove()},destroy:function(){var a=this,d=a.getXAxis(),e=a.getYAxis(),b=a.getColorAxis(),c=a.getLegend();Ext.destroy(d,e,b,c);a.callParent()}});Ext.define('Ext.d3.canvas.HiDPI',{singleton:!0,relFontSizeRegEx:/(^[0-9])*(\d+(?:\.\d+)?)(px|%|em|pt)/,absFontSizeRegEx:/(xx-small)|(x-small)|(small)|(medium)|(large)|(x-large)|(xx-large)/,fillStroke:function(a,b,i){var d=a.font,j=d!==a.$oldFont,f=a.shadowOffsetX,g=a.shadowOffsetY,e=a.lineDashOffset,h=a.lineWidth,c;if(j){c=d.replace(this.relFontSizeRegEx,function(c,d,a){return parseFloat(a)*b});c=c.replace(this.absFontSizeRegEx,function(i,a,c,d,e,f,g,h){if(a){return 9*b+'px'}if(c){return 10*b+'px'}if(d){return 13*b+'px'}if(e){return 16*b+'px'}if(f){return 18*b+'px'}if(g){return 24*b+'px'}if(h){return 32*b+'px'}});a.font=c;a.$oldFont=d;a.$scaledFont=c}else {a.font=a.$scaledFont}a.shadowOffsetX=f*b;a.shadowOffsetY=g*b;a.lineDashOffset=e*b;a.lineWidth=h*b;if(arguments.length>3){a[i].apply(a,Array.prototype.slice.call(arguments,3))}else {a[i]()}a.font=d;a.shadowOffsetX=f;a.shadowOffsetY=g;a.lineDashOffset=e;a.lineWidth=h},getOverrides:function(){var b=this,a=b.getDevicePixelRatio();return this.overrides||(this.overrides={fill:function(){b.fillStroke(this,a,'$fill')},stroke:function(){b.fillStroke(this,a,'$stroke')},moveTo:function(b,c){this.$moveTo(b*a,c*a)},lineTo:function(b,c){this.$lineTo(b*a,c*a)},quadraticCurveTo:function(b,c,d,e){this.$quadraticCurveTo(b*a,c*a,d*a,e*a)},bezierCurveTo:function(b,c,d,e,f,g){this.$bezierCurveTo(b*a,c*a,d*a,e*a,f*a,g*a)},arcTo:function(c,e,d,f,b){this.$arcTo(c*a,e*a,d*a,f*a,b*a)},arc:function(f,g,e,c,d,b){this.$arc(f*a,g*a,e*a,c,d,b)},rect:function(d,e,c,b){this.$rect(d*a,e*a,c*a,b*a)},clearRect:function(d,e,c,b){this.$clearRect(d*a,e*a,c*a,b*a)},fillRect:function(e,f,d,c){b.fillStroke(this,a,'$fillRect',e*a,f*a,d*a,c*a)},strokeRect:function(e,f,d,c){b.fillStroke(this,a,'$strokeRect',e*a,f*a,d*a,c*a)},translate:function(b,c){this.$translate(b*a,c*a)},transform:function(d,f,e,g,b,c){this.$transform(d,f,e,g,b*a,c*a)},setTransform:function(d,f,e,g,b,c){this.$setTransform(d,f,e,g,b*a,c*a)},isPointInPath:function(b,c,e,f){var d=arguments.length;if(d>3){return this.$isPointInPath(b,c*a,e*a,f)}else {if(d>2){return this.$isPointInPath(b*a,c*a,e)}else {return this.$isPointInPath(b*a,c*a)}}},isPointInStroke:function(b,c,e){var d=arguments.length;if(d>2){return this.$isPointInStroke(b,c*a,e*a)}else {return this.$isPointInStroke(b*a,c*a)}},drawImage:function(b,c,d,f,e,j,k,i,h){var g=arguments.length;if(g>5){this.$drawImage(b,c,d,f,e,j*a,k*a,i*a,h*a)}else {if(g>3){this.$drawImage(b,c*a,d*a,f*a,e*a)}else {this.$drawImage(b,c*a,d*a)}}},putImageData:function(d,g,h,e,f,c,b){this.$putImageData(d,g*a,h*a,e,f,c,b)},setLineDash:function(b){if(!(b instanceof Array)){b=Array.prototype.slice.call(b)}this.$setLineDash(b.map(function(b){return b*a}))},fillText:function(c,d,e,b){this.$fillText(c,d*a,e*a,b*a)},strokeText:function(c,d,e,b){this.$strokeText(c,d*a,e*a,b*a)},measureText:function(c){var b=this.$measureText(c);b.width*=a;return b},createLinearGradient:function(b,d,c,e){return this.$createLinearGradient(b*a,d*a,c*a,e*a)},createRadialGradient:function(d,f,b,e,g,c){return this.$createRadialGradient(d*a,f*a,b*a,e*a,g*a,c*a)}})},getDevicePixelRatio:function(a){if(a){return a.$devicePixelRatio||1}return window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1},applyOverrides:function(a){var c=a.getContext('2d'),e=this.getDevicePixelRatio(),d=this.getOverrides(),b;if(!(a.$devicePixelRatio||e===1)){for(b in d){c['$'+b]=c[b]}Ext.apply(c,d);a.$devicePixelRatio=e}return a},setSize:function(a,d,b){var c=this.getDevicePixelRatio(a);a.width=Math.round(d*c);a.height=Math.round(b*c);a.style.width=Math.round(d)+'px';a.style.height=Math.round(b)+'px';return a}});Ext.define('Ext.d3.canvas.Canvas',{extend:'Ext.d3.Component',xtype:'d3-canvas',isCanvas:!0,config:{hdpi:!0},requires:['Ext.d3.canvas.HiDPI'],template:[{tag:'canvas',reference:'canvasElement',style:{position:'absolute'}}],canvas:null,context2D:null,renderScene:null,getCanvas:function(){var b=this,a=b.canvas;if(!a){a=b.canvasElement.dom;if(b.getHdpi()){a=Ext.d3.canvas.HiDPI.applyOverrides(a)}b.canvas=a;b.context2D=a.getContext('2d')}return a},resizeHandler:function(d){var b=this,c=b.canvas||b.getCanvas(),a=b.sceneRect||(b.sceneRect={});a.x=0;a.y=0;a.width=d.width;a.height=d.height;Ext.d3.canvas.HiDPI.setSize(c,a.width,a.height);b.onSceneResize(c,a);b.fireEvent('sceneresize',b,c,a)},onSceneResize:Ext.emptyFn,onPanZoom:function(f,d,c){var b=this,e=b.canvas,a=b.context2D;if(a&&b.renderScene){a.save();a.clearRect(0,0,e.width,e.height);a.setTransform(d[0],0,0,d[1],c[0],c[1]);b.renderScene(a);a.restore()}},getSceneRect:function(){return this.sceneRect}});Ext.define('Ext.d3.hierarchy.Hierarchy',{extend:'Ext.d3.svg.Svg',requires:['Ext.d3.axis.Color','Ext.plugin.MouseEnter'],mixins:['Ext.d3.mixin.ToolTip'],config:{hierarchyCls:'hierarchy',selection:null,colorAxis:{scale:{type:'ordinal',range:'d3.schemeCategory20c.slice(0, -4)'},field:'name'},nodeChildren:function(a){return a.isExpanded()?a.childNodes:null},nodeClass:undefined,nodeText:['name','text'],sorter:null,nodeTransform:function(a){a.attr('transform',function(a){return 'translate('+a.x+','+a.y+')'})},nodeValue:1,noParentValue:!1,nodeKey:function(a,b){return a.data.id},linkKey:function(a,b){return a.target.data.id},selectEventName:'click',expandEventName:'dblclick',rootVisible:!0,layout:undefined,noSizeLayout:!0,renderLinks:!1,transitions:{layout:{duration:500,ease:'cubicInOut'},select:{duration:150,ease:'cubicInOut',sourceScale:1,targetScale:1.07}}},publishes:'selection',root:null,nodes:null,links:null,defaultCls:{links:Ext.baseCSSPrefix+'d3-links',nodes:Ext.baseCSSPrefix+'d3-nodes',link:Ext.baseCSSPrefix+'d3-link',node:Ext.baseCSSPrefix+'d3-node',root:Ext.baseCSSPrefix+'d3-root',label:Ext.baseCSSPrefix+'d3-label',parent:Ext.baseCSSPrefix+'d3-parent',leaf:Ext.baseCSSPrefix+'d3-leaf',selected:Ext.baseCSSPrefix+'d3-selected',expanded:Ext.baseCSSPrefix+'d3-expanded'},nodeClassCfg:null,mouseEnterPlugin:null,constructor:function(b){var a=this;a.callParent([b]);a.mixins.d3tooltip.constructor.call(a,b)},applyTooltip:function(a,b){if(a){a.delegate='g.'+this.defaultCls.node}return this.mixins.d3tooltip.applyTooltip.call(this,a,b)},updateTooltip:null,defaultNodeClass:function(e){var c=this,b=c.defaultCls,a=c.nodeClassCfg,d;if(!a){c.nodeClassCfg=a={};a[b.parent]=function(a){return !a.data.isLeaf()};a[b.leaf]=function(a){return a.data.isLeaf()};a[b.expanded]=function(a){return a.data.isExpanded()};a[b.root]=function(a){return a===c.root}}for(d in a){e.classed(d,a[d])}},applyColorAxis:function(a,b){if(a&&!a.isColorAxis){a=new Ext.d3.axis.Color(a)}return a||b},applyNodeText:function(a){var b;if(typeof a==='function'){b=a}else {if(typeof a==='string'){b=function(d,b){var c=b&&b.data&&b.data.data;return c&&c[a]||''}}else {if(Array.isArray(a)){b=function(f,c){var e=c&&c.data&&c.data.data,d,b;if(e){for(b=0;b<a.length&&!d;b++){d=e[a[b]]}}return d||''}}}}return b},applyNodeClass:function(c,b){var a;if(Ext.isFunction(c)){a=c}else {if(b){a=b}else {a=this.defaultNodeClass}}if(a){a=a.bind(this)}return a},applyNodeTransform:function(a){if(a){a=a.bind(this)}return a},updateHierarchyCls:function(a,b){var c=this.baseCls,d=this.element;if(a&&Ext.isString(a)){d.addCls(a,c);if(b){d.removeCls(b,c)}}},applyStore:function(b,c){var a=b&&Ext.StoreManager.lookup(b,'tree');if(a&&!a.isTreeStore){Ext.raise('The store must be a Ext.data.TreeStore.')}return a},applyNodeValue:function(a){var d=this.getNoParentValue(),e=this.getNodeChildren(),b,c;if(typeof a==='string'){b=function(b){return b.data[a]}}else {if(Ext.isNumber(a)){b=function(){return a}}else {if(typeof a==='function'){b=a}}}if(b){if(d){c=function(a){return e(a)?0:b.call(this,a)}}else {c=b.bind(this)}}return c},updateNodeValue:function(){if(!this.isConfiguring){this.performLayout()}},updateNodeChildren:function(){if(!this.isConfiguring){this.performLayout()}},updateSorter:function(a){if(!this.isConfiguring){this.performLayout()}},findNode:function(b,a){a=a||this.getRenderedNodes();return a.filter(function(a){return b&&(a.data.id===b.data.id||a===b)})},nodeFromRecord:function(b){var a=b&&this.selectionFromRecord(b);return a&&!a.empty()?a.datum():null},selectionFromRecord:function(a){return this.scene.select('[data-id="'+a.id+'"]')},isRecordInStore:function(a){var b=this.getStore();return !!(a&&a.isModel&&b&&!b.isEmptyStore&&(a.store===b||b.getNodeById(a.id)===a||b.getRoot()===a))},applySelection:function(a){return this.isRecordInStore(a)?a:null},updateSelection:function(b,c){var a=this,e,d,f;if(!a.hasFirstRender){if(b){a.on({scenerender:a.updateSelection.bind(a,b,c),single:!0})}return}if(b){e=a.selectionFromRecord(b);f=!e.empty();if(f){a.onNodeSelect(b,e)}else {a[a.self.getConfigurator().configs.selection.names.internal]=null;Ext.log.warn('Selected record "'+b.id+'" does not have an associated element. E.g.:\n'+'- record was selected before it was rendered;\n'+'- record was selected in some other view, but is not supposed '+'to be rendered by this D3 component (see "nodeChildren" config).')}}if(c){d=a.selectionFromRecord(c);if(!d.empty()){a.onNodeDeselect(c,d)}}if(f){a.fireEvent('selectionchange',a,b,c)}},onNodeSelect:function(b,a){a.classed(this.defaultCls.selected,!0);this.fireEvent('select',this,b,a)},onNodeDeselect:function(b,a){a.classed(this.defaultCls.selected,!1);this.fireEvent('deselect',this,b,a)},onNodesAdd:function(b){var a=this,c=a.getNodeClass();b.attr('class',a.defaultCls.node).each(function(a){this.setAttribute('data-id',a.data.id)})},addNodeListeners:function(){var b=this,e=Ext.Array.from(b.getSelectEventName()),d=Ext.Array.from(b.getExpandEventName()),a,c;for(a=0,c=e.length;a<c;a++){b.addNodeListener(e[a],b.onSelectEvent)}for(a=0,c=d.length;a<c;a++){b.addNodeListener(d[a],b.onExpandEvent)}},updateEventName:function(h,g,d){var f=this,e=Ext.Array.from(h),c=Ext.Array.from(g),a,b;for(a=0,b=c.length;a<b;a++){f.removeNodeListener(c[a],d)}for(a=0,b=e.length;a<b;a++){f.addNodeListener(e[a],d)}},updateSelectEventName:function(b,a){this.updateEventName(b,a,this.onSelectEvent)},updateExpandEventName:function(b,a){this.updateEventName(b,a,this.onExpandEvent)},addNodeListener:function(b,d){var a=this,c=a.el;if(b==='mouseenter'){a.mouseEnterPlugin=a.addPlugin({type:'mouseenter',element:c,delegate:'g.'+a.defaultCls.node,handler:d})}else {if(b){c.on(b,d,a,{delegate:'g.'+a.defaultCls.node})}}},removeNodeListener:function(b,d){var a=this,c=a.el;if(b==='mouseenter'){Ext.destroy(a.mouseEnterPlugin)}else {if(b){c.un(b,d,a,{delegate:'g.'+a.defaultCls.node})}}},onSelectEvent:function(d,c){var a=d3.select(c),b=a.node(),e=a.datum();this.handleSelectEvent(d,e,b)},handleSelectEvent:function(c,a,b){this.setSelection(a.data)},onExpandEvent:function(b){var a=d3.select(b.currentTarget),c=a.node(),d=a.datum();this.handleExpandEvent(b,d,c)},handleExpandEvent:function(d,b,c){var a=b.data;if(a.isExpanded()){a.collapse()}else {a.expand()}},setLayoutSize:function(b){var a=this.getLayout();a.size(b)},getLayoutSize:function(){var a=this.getLayout();return a.size&&a.size()},onSceneResize:function(b,a){this.callParent([b,a]);this.setLayoutSize([a.width,a.height]);this.performLayout()},hasFirstLayout:!1,hasFirstRender:!1,isLayoutTransitionSkipped:!1,oldLayoutSaving:!1,oldNodes:null,oldLinks:null,isLayoutBlocked:Ext.emptyFn,skipLayoutTransition:function(){this.isLayoutTransitionSkipped=!0},processDataChange:function(a){if(this.getNoSizeLayout()||this.size){this.performLayout()}},setupScene:function(b){var a=this;a.callParent([b]);a.linksGroup=b.append('g').classed(a.defaultCls.links,!0);a.nodesGroup=b.append('g').classed(a.defaultCls.nodes,!0)},performLayout:function(){var a=this,i=a.getStore(),c=i&&i.getRoot(),l=a.getRootVisible(),e=a.getLayout(),b,h,g,d;if(!c||a.isInitializing||a.isLayoutBlocked(e)){return}if(!l&&c.data.autoRoot&&c.childNodes.length===1){d=c.firstChild}else {d=c}var f=a.getSorter(),k=a.getRenderLinks(),j=a.getNodeChildren(),m=a.getNodeValue();a.getScene();a.oldLayoutSaving&&a.saveLayout(a.nodes,a.links);b=d3.hierarchy(d,j).sum(m);if(f){b=b.sort(f)}a.storeRoot=c;a.root=b=e(b);h=a.nodes=b.descendants();if(k){g=a.links=b.links()}a.hasFirstLayout=!0;a.renderScene(h,g)},saveLayout:function(b,g){var f=this,d={},a,e,c;f.oldNodes=d;if(b){for(a=0,e=b.length;a<e;a++){c=b[a];d[c.data.id]=c}}f.oldLinks=g},getOldNode:function(a){return a&&this.oldNodes&&this.oldNodes[a.data.id]},renderScene:function(c,b){var a=this,g=a.getNodeKey(),f=a.getLinkKey(),e,d;if(!a.hasFirstLayout){a.performLayout()}c=c||a.nodes;b=b||a.links;a.onBeforeRender(c,b);if(c){e=a.getRenderedNodes().data(c,g);a.renderNodes(e);if(b){d=a.getRenderedLinks().data(b,f);a.renderLinks(d)}}a.hideRoot();a.hasFirstRender=!0;a.onAfterRender(e,d);a.fireEvent('scenerender',a,e,d)},getRenderedNodes:function(){return this.nodesGroup.selectAll('.'+this.defaultCls.node)},getRenderedLinks:function(){return this.linksGroup.selectAll('.'+this.defaultCls.link)},hideRoot:function(){var a=this,b=a.getRootVisible();a.nodesGroup.select('.'+a.defaultCls.root).classed(a.defaultCls.invisible,!b)},renderLinks:function(a){this.updateLinks(a,this.addLinks(a.enter()));this.removeLinks(a.exit())},renderNodes:function(b){var a=this,d=a.getNodeClass(),c=b.enter().append('g');c.call(a.onNodesAdd.bind(a));a.addNodes(c);c.call(d);b.call(d);a.updateNodes(b,c);a.removeNodes(b.exit())},layoutTransition:null,onBeforeRender:function(){var a=this,b=a.hasFirstRender&&!a.isLayoutTransitionSkipped,c=a.createTransition(b?'layout':'none');a.isLayoutTransitionSkipped=!1;a.layoutTransition=c.on('end',function(){a.layoutTransition=null;if(!(a.destroyed||a.destroying)){a.onLayout()}})},onLayout:function(){var a=this;if(a.panZoom){a.panZoom.updateIndicator()}a.fireEvent('layout',a)},onAfterRender:Ext.emptyFn,updateLinks:Ext.emptyFn,addLinks:Ext.emptyFn,updateNodes:Ext.emptyFn,addNodes:Ext.emptyFn,removeLinks:function(a){a.remove()},removeNodes:function(a){a.remove()}});Ext.define('Ext.d3.hierarchy.Pack',{extend:'Ext.d3.hierarchy.Hierarchy',xtype:'d3-pack',requires:['Ext.d3.Helpers'],config:{componentCls:'pack',textPadding:[3,3],nodeValue:function(a){return a.childNodes.length+1},clipText:!0,noSizeLayout:!1},applyLayout:function(){return d3.pack()},onNodeSelect:function(b,a){this.callParent(arguments);a.select('circle').style('fill',null)},onNodeDeselect:function(d,c){var a=this,b=a.getColorAxis();a.callParent(arguments);c.select('circle').style('fill',function(a){return b.getColor(a)})},updateColorAxis:function(b){var a=this;if(!a.isConfiguring){a.getRenderedNodes().select('circle').style('fill',function(a){return b.getColor(a)})}},textVisibilityFn:function(b){var e=this,a=this.getTextPadding(),c=parseFloat(a[0])*2,d=parseFloat(a[1])*2;b.classed(e.defaultCls.invisible,function(b){var a=this.getBBox(),f=b.r-c,e=b.r-d;return a.width>f||a.height>e})},addNodes:function(c){var a=this,d=a.getNodeTransform(),e=a.getClipText(),b;c.call(a.onNodesAdd.bind(a)).call(d).append('circle');b=c.append('text').attr('class',a.defaultCls.label);if(e){b.call(a.textVisibilityFn.bind(a))}if(Ext.d3.Helpers.noDominantBaseline()){b.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,'central',!0)})}b.attr('opacity',0)},updateNodes:function(j,k){var a=this,g=a.getColorAxis(),e=a.getNodeTransform(),f=a.getSelection(),i=a.getNodeText(),h=a.getClipText(),c=j.merge(k),b=a.layoutTransition,d;c.transition(b).call(e);c.select('circle').transition(b).attr('r',function(a){return a.r}).style('fill',function(a){return a.data===f?null:g.getColor(a)});d=c.select('text').text(function(b){return i(a,b)});if(h){d.call(a.textVisibilityFn.bind(a))}d.transition(b).attr('opacity',1)},removeNodes:function(a){a.attr('opacity',1).transition(this.layoutTransition).attr('opacity',0).remove()}});Ext.define('Ext.d3.hierarchy.TreeMap',{extend:'Ext.d3.hierarchy.Hierarchy',xtype:'d3-treemap',requires:['Ext.d3.Helpers'],config:{componentCls:'treemap',tiling:null,parentTile:{padding:4,label:{offset:[5,2],clipSize:[110,40]}},leafTile:{padding:0},nodeTransform:function(a){a.attr('transform',function(a){return 'translate('+a.x0+','+a.y0+')'})},busyLayoutText:'Layout in progress...',noParentValue:!0,noSizeLayout:!1,scaleLabels:!1},labelQuantizer:null,constructor:function(a){this.labelQuantizer=this.createLabelQuantizer();this.callParent([a])},createLabelQuantizer:function(){return d3.scaleQuantize().domain([8,27]).range(['8px','12px','18px','27px'])},labelSizer:function(a,b){return Math.min((a.x1-a.x0)/4,(a.y1-a.y0)/2)},applyTiling:function(b,a){return Ext.d3.Helpers.eval(b||a)},updateTiling:function(a){if(a){this.getLayout().tile(a);if(!this.isConfiguring){this.performLayout()}}},updateLeafTile:function(a){if(a){this.getLayout().paddingInner(a.padding||0)}if(!this.isConfiguring){this.performLayout()}},applyParentTile:function(a){if(a){var c=this,b=a.padding;if(Ext.isNumber(b)){a.padding=function(a){return !c.getRootVisible()&&a===c.root?0:b}}}return a},updateParentTile:function(c){if(c){var b=this.getLayout(),a=c.padding;b.paddingRight(a);b.paddingBottom(a);b.paddingLeft(a)}if(!this.isConfiguring){this.performLayout()}},applyLayout:function(){return d3.treemap().round(!0)},setLayoutSize:function(a){this.callParent([a])},deferredLayoutId:null,isLayoutBlocked:function(d){var a=this,c=a.getBusyLayoutText(),b=!1;if(!a.deferredLayoutId){a.showMask(c);a.deferredLayoutId=setTimeout(a.performLayout.bind(a),100);b=!0}else {clearTimeout(a.deferredLayoutId);a.deferredLayoutId=null}return b},setupScene:function(a){this.callParent([a]);this.getScaleLabels()},onAfterRender:function(){this.hideMask()},hiddenParentLabels:null,labelSizes:null,getContentRect:function(){var a=this.getSceneRect(),b=this.contentRect||(this.contentRect={x:0,y:0});if(a){b.width=a.width;b.height=a.height}return a&&b},onNodeSelect:function(b,a){this.callParent(arguments);a.select('rect').style('fill',null)},onNodeDeselect:function(d,c){var a=this,b=a.getColorAxis();a.callParent(arguments);c.select('rect').style('fill',function(a){return b.getColor(a)})},renderNodes:function(b){var a=this,f=a.root,e=a.getLayout(),j=a.getParentTile(),c=j.label,h=a.getNodeTransform(),d=a.hiddenParentLabels={},i=a.labelSizes={},g;a.callParent([b]);e.paddingTop(function(b){var l=b.data,f=l.data.id,g=i[f],k=c.clipSize,e,h,j;if(!a.getRootVisible()&&b===a.root){e=0;d[f]=!0}else {e=c.offset[1]*2;h=b.x1-b.x0;j=b.y1-b.y0;if(g.width<h&&g.height<j&&h>k[0]&&j>k[1]){e+=g.height;d[f]=!1}else {d[f]=!0}}return e});a.root=f=e(f);g=a.nodes=f.descendants();e.paddingTop(0);b=a.getRenderedNodes().data(g,a.getNodeKey());b.transition(a.layoutTransition).call(h);b.select('rect').call(a.nodeSizeFn.bind(a));b.select('text').call(a.textVisibilityFn.bind(a)).each(function(a){if(a.data.isLeaf()){this.setAttribute('x',(a.x1-a.x0)/2);this.setAttribute('y',(a.y1-a.y0)/2)}else {this.setAttribute('x',c.offset[0]);this.setAttribute('y',c.offset[1])}})},addNodes:function(b){var a=this,d=a.labelSizes,e=a.getColorAxis(),f=a.getNodeText(),c=a.getScaleLabels(),g=a.defaultCls;b.append('rect').style('fill',function(a){return e.getColor(a)});b.append('text').style('font-size',function(b){return c?a.getLabelSize(b,this):null}).each(function(b){var c=f(a,b);this.textContent=c==null?'':c;this.setAttribute('class',g.label);Ext.d3.Helpers.fakeDominantBaseline(this,b.data.isLeaf()?'central':'text-before-edge');d[b.data.id]=this.getBBox()})},updateNodes:function(b){var a=this,e=a.getNodeText(),c=a.getScaleLabels(),d=a.labelSizes;b.select('rect').call(a.nodeSizeFn.bind(a));b.select('text').style('font-size',function(b){return c?a.getLabelSize(b,this):null}).each(function(b){var c=e(a,b);this.textContent=c==null?'':c;d[b.data.id]=this.getBBox()})},getLabelSize:function(a,b){if(a.data.isLeaf()){return this.labelQuantizer(this.labelSizer(a,b))}return null},updateScaleLabels:function(){if(!this.isConfiguring){this.performLayout()}},updateNodeValue:function(a){this.callParent(arguments);if(!this.isConfiguring){this.performLayout()}},nodeSizeFn:function(a){a.attr('width',function(a){return Math.max(0,a.x1-a.x0)}).attr('height',function(a){return Math.max(0,a.y1-a.y0)})},isLabelVisible:function(k,a){var h=this,g=k.getBBox(),d=a.x1-a.x0,b=a.y1-a.y0,f=a.data.isLeaf(),j=h.getParentTile(),i=h.hiddenParentLabels,e=j.label.offset,c;if(f){d-=2;b-=2}else {d-=e[0]*2;b-=e[1]*2}if(f||!a.data.isExpanded()){c=g.width<d&&g.height<b}else {c=!i[a.data.id]}return c},textVisibilityFn:function(b){var a=this;b.classed(a.defaultCls.invisible,function(b){return !a.isLabelVisible(this,b)})},destroy:function(){var a=this,b=a.getColorAxis();if(a.deferredLayoutId){clearTimeout(a.deferredLayoutId)}b.destroy();a.callParent()}});Ext.define('Ext.d3.hierarchy.partition.Partition',{extend:'Ext.d3.hierarchy.Hierarchy',xtype:'d3-partition',config:{partitionCls:'partition',nodeValue:function(a){return a.isExpanded()&&a.childNodes?0:1}},updatePartitionCls:function(a,b){var c=this.baseCls,d=this.element;if(a&&Ext.isString(a)){d.addCls(a,c);if(b){d.removeCls(b,c)}}},applyLayout:function(){return d3.partition()},resetZoom:function(c){var b=this,a=b.getStore(),d=a&&a.getRoot();b.zoomInNode(d,c)}});Ext.define('Ext.d3.hierarchy.partition.Sunburst',{extend:'Ext.d3.hierarchy.partition.Partition',xtype:'d3-sunburst',config:{componentCls:'sunburst',textPadding:[5,'0.35em'],zoomParentDotRadius:30,transitions:{zoom:{duration:1000,ease:'cubicInOut'}}},setupScene:function(a){this.callParent([a]);this.setupScales();this.setupArcGenerator()},scaleDefaults:{x:{domain:[0,1],range:[0,2*Math.PI]},y:{domain:[0,1]}},setupScales:function(){var a=this.scaleDefaults;this.xScale=d3.scaleLinear().domain(a.x.domain.slice()).range(a.x.range.slice());this.yScale=d3.scaleSqrt().domain(a.y.domain.slice())},arc:null,defaultCls:{center:Ext.baseCSSPrefix+'d3-center'},setupArcGenerator:function(){var a=this,b=a.xScale,c=a.yScale;a.arc=d3.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,b(a.x0)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,b(a.x1)))}).innerRadius(function(a){return Math.max(0,c(a.y0))}).outerRadius(function(a){return Math.max(0,c(a.y1))})},onSceneResize:function(g,c){var d=this,e=d.nodesGroup,a=0.5*c.width,b=0.5*c.height,f=Math.min(a,b);e.attr('transform','translate('+a+','+b+')');d.setRadius(f)},radius:null,minRadius:1,setRadius:function(a){var b=this;a=Math.max(b.minRadius,a);b.radius=a;b.yScale.range([0,a]);b.renderScene()},zoomInNode:function(c,h){var a=this,k=a.getScene(),f=a.getZoomParentDotRadius(),i=a.radius,j=a.xScale,d=a.yScale,l=a.arc,g,b,e;if(a.hasFirstLayout&&a.hasFirstRender&&a.size&&c&&c.isNode){b=a.nodeFromRecord(c)}if(!b){return}g=a.createTransition(h?'none':'zoom',k);e=g.tween('scale',function(){var a=d3.interpolate(j.domain(),[b.x0,b.x1]),c=d3.interpolate(d.domain(),[b.y0,1]),e=d3.interpolate(d.range(),[b.y0?f:0,i]);return function(b){j.domain(a(b));d.domain(c(b)).range(e(b))}}).selectAll('.'+a.defaultCls.node);e.selectAll('path').attrTween('d',function(a){return function(b){return l(a)}});e.selectAll('text').call(a.positionTextFn.bind(a)).call(a.textVisibilityFn.bind(a));if(h){a.xScale.domain([b.x0,b.x1]);a.yScale.domain([b.y0,1]).range([b.y0?f:0,i])}},onNodeSelect:function(g,e){var b=this,c=b.getTransitions().select,f=c.targetScale,d=c.sourceScale,a=b.createTransition('select');b.callParent(arguments);e.raise().select('path').style('fill',null);if(a.duration()){e.transition(a).attr('transform','scale('+f+','+f+')').transition(a).attr('transform','scale('+d+','+d+')')}},onNodeDeselect:function(d,c){var a=this,b=a.getColorAxis();a.callParent(arguments);c.select('path').style('fill',function(a){return b.getColor(a)})},isBBoxInSlice:function(a,j,k,c,d,b,l){var e=Math.abs(k-j),i=Math.abs(d-c)-b*2,h=e<Math.PI?2*(c+b)*Math.tan(0.5*e)-l*2:0.5*d,g=a.width>i,f=a.height>h;return !(g||f)},textVisibilityFn:function(b){var a=this,c=a.xScale,d=a.yScale,e=a.defaultCls.invisible,f=a.getTextPadding(),h=parseFloat(f[0]),i=parseFloat(f[1]),g=b instanceof d3.transition;function isInvisible(o,b){var l=o.getBBox(),m=c(b.x0),n=c(b.x1),p=d(b.y0),q=d(b.y1),g=a.isBBoxInSlice(l,m,n,p,q,h,i),e=c.domain(),f=d.domain(),j=e[0]>b.x0||e[1]<b.x1,k=f[0]>b.y0||f[1]<b.y1;return !g||j||k}if(g){b.tween('class.invisible',function(b){var a=this;return function(){d3.select(a).classed(e,isInvisible(a,b))}})}else {b.classed(e,function(a){return isInvisible(this,a)})}},positionTextFn:function(d){var c=this,i=c.xScale,j=c.yScale,h=Math.PI/2,g=180/Math.PI,e=d instanceof d3.transition,f=e?'attrTween':'attr',b,a;function getX(a){return j(a.y0)}function getTransform(a){return a===c.root?'':'rotate('+(i((a.x0+a.x1)/2)-h)*g+')'}if(e){b=function(a){return function(){return getX(a)}};a=function(a){return function(){return getTransform(a)}}}else {b=function(a){return getX(a)};a=function(a){return getTransform(a)}}d[f]('x',b)[f]('transform',a)},addNodes:function(c){var a=this,b=a.getTextPadding();c.append('path').attr('d',a.arc);c.append('text').attr('class',a.defaultCls.label).each(function(c){if(c!==a.root){this.setAttribute('dx',b[0]);this.setAttribute('dy',b[1])}})},updateNodes:function(f,g){var a=this,d=a.getColorAxis(),e=a.getNodeText(),c=a.getSelection(),b=f.merge(g);b.select('path').attr('d',a.arc).style('fill',function(a){return a.data===c?null:d.getColor(a)});b.select('text').text(function(b){return e(a,b)}).call(a.positionTextFn.bind(a)).call(a.textVisibilityFn.bind(a));a.nodesGroup.select('.'+a.defaultCls.selected).raise()},updateColorAxis:function(b){var a=this;if(!a.isConfiguring){a.getRenderedNodes().select('path').style('fill',function(a){return b.getColor(a)})}}});Ext.define('Ext.d3.hierarchy.tree.Tree',{extend:'Ext.d3.hierarchy.Hierarchy',config:{treeCls:'tree',nodeTransform:null,depth:0,nodeRadius:5,nodeTransition:!0,nodeSize:null,noSizeLayout:!1,renderLinks:!0,transitions:{select:{targetScale:1.5}}},updateTreeCls:function(a,b){var c=this.baseCls,d=this.element;if(a&&Ext.isString(a)){d.addCls(a,c);if(b){d.removeCls(b,c)}}},applyLayout:function(){return d3.tree()},updateNodeSize:function(a){var b=this.getLayout();b.nodeSize(a)},updateColorAxis:function(b){var a=this;if(!a.isConfiguring){a.getRenderedNodes().select('circle').style('fill',function(a){return b.getColor(a)})}},hideRoot:function(){var a=this,b=a.getRootVisible();a.nodesGroup.select('.'+a.defaultCls.root).classed(a.defaultCls.hidden,!b)},onNodeSelect:function(h,g){var b=this,c=b.getTransitions().select,f=c.targetScale,e=c.sourceScale,a=b.createTransition('select'),d=g.select('circle');b.callParent(arguments);d.style('fill',null);if(a.duration()){d.transition(a).attr('transform','scale('+f+','+f+')').transition(a).attr('transform','scale('+e+','+e+')')}},onNodeDeselect:function(d,c){var a=this,b=a.getColorAxis();a.callParent(arguments);c.select('circle').style('fill',function(a){return b.getColor(a)})}});Ext.define('Ext.d3.hierarchy.tree.HorizontalTree',{extend:'Ext.d3.hierarchy.tree.Tree',xtype:['d3-tree','d3-horizontal-tree'],requires:['Ext.d3.Helpers'],config:{componentCls:'horizontal-tree',nodeTransform:function(a){a.attr('transform',function(a){return 'translate('+a.y+','+a.x+')'})}},pendingTreeAlign:!1,oldLayoutSaving:!0,alignAfterLayout:function(){this.pendingTreeAlign=!0},onSceneResize:function(c,d){var a=this,b=a.getLayout();a.alignAfterLayout();if(b.nodeSize()){if(a.size){this.alignTree()}else {a.performLayout()}}else {a.callParent(arguments)}},onLayout:function(){var a=this;if(a.pendingTreeAlign){a.pendingTreeAlign=!1;a.alignTree()}a.callParent()},alignTree:function(){if(this.getNodeSize()){this.alignContent('l')}},updateNodeSize:function(b){var a=this;if(b){a.getLayout().nodeSize(b.slice().reverse())}else {a.setLayoutSize([a.sceneRect.width,a.sceneRect.height])}if(!a.isConfiguring){a.skipLayoutTransition();a.alignAfterLayout();a.performLayout()}},setLayoutSize:function(a){var b=a[0];a[0]=a[1];a[1]=b;this.callParent([a])},onNodesAdd:function(c){var a=this;a.callParent([c]);var b=a.getOldNode(a.nodeFromRecord(a.getSelection()));if(b){c.attr('transform','translate('+b.y+','+b.x+')')}},addNodes:function(b){var d=this,a=d.getNodeRadius(),c;b.append('circle').attr('opacity',0);c=b.append('text').attr('class',d.defaultCls.label).each(function(c){var b=c.data.isLeaf();this.setAttribute('x',b?a+5:-5-a)}).attr('opacity',0);if(Ext.d3.Helpers.noDominantBaseline()){c.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,'central',!0)})}},updateNodes:function(i,j){var a=this,e=a.getSelection(),d=a.getNodeTransform(),g=a.getColorAxis(),f=a.getNodeRadius(),h=a.getNodeText(),c=i.merge(j),b=a.layoutTransition;c.transition(b).call(d);c.select('circle').style('fill',function(a){return a.data===e?null:g.getColor(a)}).attr('r',f).transition(b).attr('opacity',1);c.select('text').text(function(b){return h(a,b)}).transition(b).attr('opacity',1)},removeNodes:function(c){var a=this,b=a.nodeFromRecord(a.getSelection());c.attr('opacity',1).transition(a.layoutTransition).attr('opacity',0).attr('transform',function(e){var d=e.parent,c=b||d&&a.nodeFromRecord(d.data),f=c&&c.x||0,g=c&&c.y||0;return 'translate('+g+','+f+')'}).remove()},getLinkPath:function(a){var b=a.source.y+(a.target.y-a.source.y)/2;return 'M'+a.source.y+','+a.source.x+'C'+b+','+a.source.x+' '+b+','+a.target.x+' '+a.target.y+','+a.target.x},addLinks:function(c){var a=this,b=a.nodeFromRecord(a.getSelection());return c.append('path').classed(a.defaultCls.link,!0).attr('d',function(g){var f=b||g.source,c=a.getOldNode(f),d=c?c.x:f.x,e=c?c.y:f.y;return 'M'+e+','+d+'C'+e+','+d+' '+e+','+d+' '+e+','+d}).attr('opacity',0)},updateLinks:function(e,f){var a=this,d=e.merge(f),c=a.layoutTransition,b=!a.getRootVisible();d.classed(a.defaultCls.hidden,function(c){return b&&c.source.data===a.storeRoot}).transition(c).attr('d',a.getLinkPath).attr('opacity',1)},removeLinks:function(c){var a=this,b=a.nodeFromRecord(a.getSelection());c.attr('opacity',1).transition(a.layoutTransition).attr('opacity',0).attr('d',function(g){var f=g.source,c=b||f&&a.nodeFromRecord(f.data),d=c&&c.x||0,e=c&&c.y||0;return 'M'+e+','+d+'C'+e+','+d+' '+e+','+d+' '+e+','+d}).remove()}});Ext.define('Ext.d3.interaction.Abstract',{isInteraction:!0,mixins:{observable:'Ext.mixin.Observable'},statics:{lockedEvents:{}},config:{component:null,gestures:null,enabled:!0},supports:[],listeners:null,constructor:function(b){var a=this,c;b=b||{};if('id' in b){c=b.id}else {if('id' in a.config){c=a.config.id}else {c=a.getId()}}a.setId(c);a.mixins.observable.constructor.call(a,b)},resetComponent:function(){var a=this,b=a.getComponent();if(!a.isConfiguring){a.setComponent(null);a.setGestures(null);a.setComponent(b)}},updateComponent:function(b,a){var c=this;if(a===b){return}if(a){c.removeComponent(a)}if(b){c.addComponent(b)}},addComponent:function(a){a.register(this);this.component=a;this.addElementListener(a.element)},removeComponent:function(a){this.removeElementListener(a.element);this.component=null;a.unregister(this)},updateEnabled:function(c){var b=this,a=b.getComponent();if(a){if(c){b.addElementListener(a.element)}else {b.removeElementListener(a.element)}}},onGesture:Ext.emptyFn,addElementListener:function(e){var a=this,c=a.getGestures(),d=a.getLocks(),b;if(!a.getEnabled()){return}function addGesture(b,c){if(!Ext.isFunction(c)){c=a[c]}e.on(b,a.listeners[b]=function(e){if(a.getEnabled()&&(!(b in d)||d[b]===a)){var f=c.apply(this,arguments);if(f===!1&&e&&e.stopPropagation){e.stopPropagation()}return f}},a)}a.listeners=a.listeners||{};for(b in c){addGesture(b,c[b])}},removeElementListener:function(d){var a=this,c=a.getGestures(),b;function removeGesture(b){var c=a.listeners[b];if(c){d.un(b,c);delete a.listeners[b]}}if(a.listeners){for(b in c){removeGesture(b)}}},lockEvents:function(){var b=this,d=b.getLocks(),a=Array.prototype.slice.call(arguments),c=a.length;while(c--){d[a[c]]=b}},unlockEvents:function(){var c=this.getLocks(),a=Array.prototype.slice.call(arguments),b=a.length;while(b--){delete c[a[b]]}},getLocks:function(){return this.statics().lockedEvents},destroy:function(){var a=this;a.fireEvent('destroy',a);a.setComponent(null);a.listeners=null}});Ext.define('Ext.d3.interaction.PanZoom',{extend:'Ext.d3.interaction.Abstract',type:'panzoom',alias:'d3.interaction.panzoom',isPanZoom:!0,config:{pan:{gesture:'drag',constrain:!0,momentum:{friction:1,spring:0.2}},zoom:{gesture:'pinch',extent:[1,3],uniform:!0,mouseWheel:{factor:1.02},doubleTap:{factor:1.1}},contentRect:null,viewportRect:null,indicator:{parent:'element'}},panOrigin:null,startSpread:null,minSpread:50,scaling:null,oldScaling:null,oldScalingCenter:null,translation:null,oldTranslation:null,dx:0,dy:0,velocityX:0,velocityY:0,pan:null,viewportRect:null,contentRect:null,updatePan:function(a){this.pan=a;this.resetComponent()},updateZoom:function(){this.resetComponent()},updateContentRect:function(a){this.contentRect=a;this.constrainTranslation()},updateViewportRect:function(a){this.viewportRect=a;this.constrainTranslation()},constructor:function(a){var b=this;b.translation=a&&a.translation?a.translation.slice():[0,0];b.scaling=a&&a.scaling?a.scaling.slice():[1,1];b.callParent(arguments)},destroy:function(){this.destroyIndicator();Ext.AnimationQueue.stop(this.panFxFrame,this);this.callParent()},toViewportXY:function(c,d){var b=this.component.element.getXY(),a=this.viewportRect&&this.viewportRect(),e=c-b[0]-(a?a.x:0),f=d-b[1]-(a?a.y:0);return [e,f]},toRtlViewportXY:function(c,d){var a=this.toViewportXY(c,d),b=this.component;if(b.getInherited().rtl){a[0]=b.getWidth()-a[0]}return a},constrainRange:function(a,c,b){b=b||c;a[0]=Math.max(c[0],Math.min(c[1],a[0]));a[1]=Math.max(b[0],Math.min(b[1],a[1]));return a},constrainTranslation:function(b){var a=this,f=a.pan,i=f&&f.constrain,e=f&&f.momentum,h=i&&a.contentRect&&a.contentRect(),g=i&&a.viewportRect&&a.viewportRect(),c,d;if(h&&g){b=b||a.translation;c=a.getConstraints(h,g);d=a.getOffLimits(b,c);a.constrainRange(b,c.slice(0,2),c.slice(2));if(d&&e&&e.spring){b[0]+=d[0]*e.spring;b[1]+=d[1]*e.spring}a.updateIndicator(h,g)}},createInterpolator:function(a){var d=0,b=1;a=a||1;var c=function(e){var c=0;if(b){c=(e-d)/b;c=Math.max(0,c);c=Math.min(1,c);c*=a}return c};c.domain=function(a,c){d=a;b=c-a};return c},updateIndicator:function(c,b){var a=this,h=a.hScrollScale,i=a.vScrollScale,f,g,e,d,j,n,m,o,k,l;c=c||a.contentRect&&a.contentRect();b=b||a.viewportRect&&a.viewportRect();if(a.hScroll&&c&&b){k=a.scaling[0];l=a.scaling[1];f=c.x*k+a.translation[0];g=c.y*l+a.translation[1];e=c.width*k;d=c.height*l;if(e>b.width){h.domain(f,f+e);j=h(0);n=h(b.width);a.hScrollBar.style.left=j+'%';a.hScrollBar.style.width=n-j+'%';a.hScroll.dom.style.display='block'}else {a.hScroll.dom.style.display='none'}if(d>b.height){i.domain(g,g+d);m=i(0);o=i(b.height);a.vScrollBar.style.top=m+'%';a.vScrollBar.style.height=o-m+'%';a.vScroll.dom.style.display='block'}else {a.vScroll.dom.style.display='none'}}},getConstraints:function(a,c){var b=this,m=b.pan,l=null,d,e,k,j,h,i,f,g;a=m&&m.constrain&&(a||b.contentRect&&b.contentRect());c=c||b.viewportRect&&b.viewportRect();if(a&&c){h=b.scaling[0];i=b.scaling[1];d=a.x*h;e=a.y*i;k=a.width*h;j=a.height*i;f=c.width-k-d;g=c.height-j-e;l=[Math.min(-d,f),Math.max(-d,f),Math.min(-e,g),Math.max(-e,g)]}return l},getOffLimits:function(d,c,e){var k=this,j=null,h,i,f,g,a,b;c=c||k.getConstraints();e=e||0.1;if(c){d=d||k.translation;a=d[0];b=d[1];h=c[0];f=c[1];i=c[2];g=c[3];if(a<h){a=a-h}else {if(a>f){a=a-f}else {a=0}}if(b<i){b=b-i}else {if(b>g){b=b-g}else {b=0}}if(a&&Math.abs(a)<e){a=0}if(b&&Math.abs(b)<e){b=0}if(a||b){j=[a,b]}}return j},translate:function(b,c){var a=this.translation;this.setTranslation(a[0]+b,a[1]+c)},setTranslation:function(c,d){var a=this,b=a.translation;b[0]=c;b[1]=d;a.constrainTranslation(b);a.fireEvent('panzoom',a,a.scaling,b)},scale:function(c,d,b){var a=this.scaling;this.setScaling(a[0]*c,a[1]*d,b)},setScaling:function(d,e,i){var b=this,j=b.getZoom(),a=b.scaling,k=a[0],l=a[1],c=b.translation,f=b.oldTranslation,g,h;if(j){if(j.uniform){d=e=(d+e)/2}a[0]=d;a[1]=e;b.constrainRange(a,j.extent);d=a[0]/k;e=a[1]/l;g=i&&i[0]||0;h=i&&i[1]||0;c[0]=g+d*(c[0]-g);c[1]=h+e*(c[1]-h);if(f){f[0]=g-(g-f[0])*d;f[1]=h-(h-f[1])*e}b.constrainTranslation(c);b.fireEvent('panzoom',b,a,c)}},setPanZoomSilently:function(c,b){var a=this;a.suspendEvent('panzoom');c&&a.setTranslation(c[0],c[1]);b&&a.setScaling(b[0],b[1]);a.resumeEvent('panzoom')},setPanZoom:function(c,b){var a=this;a.setPanZoomSilently(c,b);a.fireEvent('panzoom',a,a.scaling,a.translation)},normalize:function(b,c,d){var a=(d||1)/this.magnitude(b,c);return [b*a,c*a]},magnitude:function(a,b){return Math.sqrt(a*a+b*b)},panFx:function(h){if(!h.momentum){return}var a=this,g=h.momentum,i=a.translation,b=a.getOffLimits(i),c=a.velocityX=a.dx,d=a.velocityY=a.dy,e,f;if(b){if(b[0]){a.velocityX=0;c=b[0]}if(b[1]){a.velocityY=0;d=b[1]}}e=a.normalize(c,d,-g.friction);a.frictionX=e[0];a.frictionY=e[1];f=a.normalize(c,d,-g.spring);a.springX=f[0];a.springY=f[1];Ext.AnimationQueue.start(a.panFxFrame,a)},incKeepSign:function(a,b){if(a){if(a*b<0&&Math.abs(a)<Math.abs(b)){return 0}else {return a+b}}return a},panFxFrame:function(){var a=this,d=a.translation,e=a.getOffLimits(d),f=e&&e[0],g=e&&e[1],j=0,k=0,b=0,c=0,l=1,h,i;b+=a.velocityX=a.incKeepSign(a.velocityX,a.frictionX);c+=a.velocityY=a.incKeepSign(a.velocityY,a.frictionY);if(f){j=Math.abs(f);h=a.springX*j;a.velocityX=a.incKeepSign(b,h);b+=h;if(Math.abs(b)<0.1){b=Ext.Number.sign(b)*0.1}if(!(a.velocityX||Math.abs(b)>l||a.incKeepSign(f,b))){b=-f}}if(g){k=Math.abs(g);i=a.springY*k;a.velocityY=a.incKeepSign(c,i);c+=i;if(Math.abs(c)<0.1){c=Ext.Number.sign(c)*0.1}if(!(a.velocityY||Math.abs(c)>l||a.incKeepSign(g,c))){c=-g}}a.prevForceX=b;a.prevForceY=c;d[0]+=b;d[1]+=c;a.updateIndicator();if(!(b||c)){Ext.AnimationQueue.stop(a.panFxFrame,a)}a.fireEvent('panzoom',a,a.scaling,d)},getGestures:function(){var e=this,a=e.gestures,f=e.getPan(),d=e.getZoom(),c,b;if(!a){e.gestures=a={};if(f){c=f.gesture;a[c]='onPanGesture';a[c+'start']='onPanGestureStart';a[c+'end']='onPanGestureEnd';a[c+'cancel']='onPanGestureEnd'}if(d){b=d.gesture;a[b]='onZoomGesture';a[b+'start']='onZoomGestureStart';a[b+'end']='onZoomGestureEnd';a[b+'cancel']='onZoomGestureEnd';if(d.doubleTap){a.doubletap='onDoubleTap'}if(d.mouseWheel){a.wheel='onMouseWheel'}}}return a},updateGestures:function(a){this.gestures=a},isPanning:function(a){a=a||this.getPan();return a&&this.getLocks()[a.gesture]===this},onPanGestureStart:function(b){var a=this,d=b&&b.event&&b.event.touches||b.touches,e=a.getPan(),c;if(e&&(!d||d.length<2)){b.claimGesture();Ext.AnimationQueue.stop(a.panFxFrame,a);a.lockEvents(e.gesture);c=b.getXY();a.panOrigin=a.lastPanXY=a.toRtlViewportXY(c[0],c[1]);a.oldTranslation=a.translation.slice();return !1}},onPanGesture:function(g){var a=this,c=a.oldTranslation,d=a.panOrigin,b,e,f;if(a.isPanning()){b=g.getXY();b=a.toRtlViewportXY(b[0],b[1]);a.dx=b[0]-a.lastPanXY[0];a.dy=b[1]-a.lastPanXY[1];a.lastPanXY=b;e=b[0]-d[0];f=b[1]-d[1];a.setTranslation(c[0]+e,c[1]+f);return !1}},onPanGestureEnd:function(){var a=this,b=a.getPan();if(a.isPanning(b)){a.panOrigin=null;a.oldTranslation=null;a.unlockEvents(b.gesture);a.panFx(b);return !1}},onZoomGestureStart:function(c){var a=this,j=a.getZoom(),d=c&&c.event&&c.event.touches||c.touches,b,g,e,f,h,i;if(j&&d&&d.length===2){c.claimGesture();a.lockEvents(j.gesture);a.oldTranslation=a.translation.slice();h=d[0];i=d[1];b=a.toViewportXY(h.pageX,h.pageY);g=a.toViewportXY(i.pageX,i.pageY);e=g[0]-b[0];f=g[1]-b[1];a.startSpread=[Math.max(a.minSpread,Math.abs(e)),Math.max(a.minSpread,Math.abs(f))];a.oldScaling=a.scaling.slice();a.oldScalingCenter=[b[0]+0.5*e,b[1]+0.5*f];return !1}},onZoomGesture:function(f){var a=this,p=a.getZoom(),k=a.startSpread,l=a.oldScaling,j=a.oldScalingCenter,m=f&&f.event&&f.event.touches||f.touches,d,g,b,c,n,o,h,i,e,q,r;if(p&&a.getLocks()[p.gesture]===a){h=m[0];i=m[1];d=a.toViewportXY(h.pageX,h.pageY);g=a.toViewportXY(i.pageX,i.pageY);b=g[0]-d[0];c=g[1]-d[1];e=[d[0]+0.5*b,d[1]+0.5*c];q=e[0]-j[0];r=e[1]-j[1];a.setTranslation(a.oldTranslation[0]+q,a.oldTranslation[1]+r);b=Math.max(a.minSpread,Math.abs(b));c=Math.max(a.minSpread,Math.abs(c));n=b/k[0];o=c/k[1];a.setScaling(n*l[0],o*l[1],e);return !1}},onZoomGestureEnd:function(){var a=this,b=a.getZoom();if(b&&a.getLocks()[b.gesture]===a){a.startSpread=null;a.oldScalingCenter=null;a.oldTranslation=null;a.unlockEvents(b.gesture);a.dx=0;a.dy=0;a.panFx(a.getPan());return !1}},onMouseWheel:function(e){var c=this,g=e.getWheelDelta(),b=c.getZoom(),a,f,d;if(b&&b.mouseWheel&&(a=b.mouseWheel.factor)){a=Math.pow(a,g);d=e.getXY();f=c.toViewportXY(d[0],d[1]);c.scale(a,a,f);e.preventDefault()}},onDoubleTap:function(f){var c=this,b=c.getZoom(),a,e,d;if(b&&b.doubleTap&&(a=b.doubleTap.factor)){d=f.getXY();e=c.toViewportXY(d[0],d[1]);c.scale(a,a,e)}},createIndicator:function(){var a=this;if(a.hScroll){return}a.hScroll=Ext.dom.Element.create({tag:'div',classList:[Ext.baseCSSPrefix+'d3-scroll',Ext.baseCSSPrefix+'d3-hscroll'],style:{},children:[{tag:'div',reference:'bar',classList:[Ext.baseCSSPrefix+'d3-scrollbar',Ext.baseCSSPrefix+'d3-hscrollbar']}]});a.hScrollBar=a.hScroll.dom.querySelector('[reference=bar]');a.hScrollBar.removeAttribute('reference');a.vScroll=Ext.dom.Element.create({tag:'div',classList:[Ext.baseCSSPrefix+'d3-scroll',Ext.baseCSSPrefix+'d3-vscroll'],style:{},children:[{tag:'div',reference:'bar',classList:[Ext.baseCSSPrefix+'d3-scrollbar',Ext.baseCSSPrefix+'d3-vscrollbar']}]});a.vScrollBar=a.vScroll.dom.querySelector('[reference=bar]');a.vScrollBar.removeAttribute('reference');a.hScrollScale=a.createInterpolator(100);a.vScrollScale=a.createInterpolator(100)},destroyIndicator:function(){var a=this;Ext.destroy(a.hScroll,a.vScroll);a.hScroll=a.vScroll=a.hScrollBar=a.vScrollBar=null},addIndicator:function(d){var a=this,c=a.getIndicator(),b=a.indicatorParent;if(c&&!b){a.createIndicator();b=a.indicatorParent=d[c.parent];if(b){b.appendChild(a.hScroll);b.appendChild(a.vScroll)}}},removeIndicator:function(){var a=this,b=a.indicatorParent;if(b){if(a.hScroll){b.removeChild(a.hScroll)}if(a.vScroll){b.removeChild(a.vScroll)}a.indicatorParent=null}},addComponent:function(a){this.callParent([a]);this.addIndicator(a)},removeComponent:function(a){this.removeIndicator();this.callParent([a])}});Ext.define('Ext.d3.svg.Export',{singleton:!0,toSvg:function(a){return '<?xml version="1.0" standalone="yes"?>'+this.serializeNode(a)},download:function(b,c){var d=new Blob([c]),a=document.createElement('a');a.setAttribute('download',b);a.setAttribute('href',URL.createObjectURL(d));a.click()},quotesRe:/"/g,serializeNode:function(a){var c='',b,d,f,i,e,h,g;if(a.nodeType===document.TEXT_NODE){return this.escapeText(a.nodeValue)}c+='<'+a.nodeName;if(a.attributes.length){for(b=0,d=a.attributes.length;b<d;b++){f=a.attributes[b];if(f.name!=='style'){c+=' '+f.name+'="'+f.value+'"'}}}e=getComputedStyle(a);c+=' style="';for(b=0,d=e.length;b<d;b++){h=e[b];g=e[h];if(typeof g==='string'){c+=h+':'+g.replace(this.quotesRe,"'")+';'}}c+='"';c+='>';if(a.childNodes&&a.childNodes.length){for(b=0,d=a.childNodes.length;b<d;b++){i=a.childNodes[b];c+=this.serializeNode(i)}}c+='</'+a.nodeName+'>';return c},escapeTextRe:[[/&/g,'&amp;'],[/"/g,'&quot;'],[/'/g,'&apos;'],[/</g,'&lt;'],[/>/g,'&gt;']],escapeText:function(c){var d=this.escapeTextRe,e=d.length,a,b;for(a=0;a<e;a++){b=d[a];c=c.replace(b[0],b[1])}return c}});